appId: com.rawalite.app
productName: RawaLite
artifactName: "${productName} Setup ${version}.${ext}"

directories:
  output: release
  buildResources: assets

files:
  - "dist/**/*"
  - "dist-electron/**/*"
  - "templates/**/*"
  - "package.json"

extraResources:
  - from: "templates"
    to: "app/templates"
    filter: ["**/*"]

win:
  icon: assets/icon.ico
  target:
    - target: nsis
      arch: x64
  # ðŸ”§ CRITICAL FIX: Prevent registry duplication
  compression: "normal"

nsis:
  oneClick: false
  allowToChangeInstallationDirectory: true
  perMachine: false
  allowElevation: true
  runAfterFinish: true
  createDesktopShortcut: true
  # ðŸ”§ CRITICAL FIX: Feste GUID verhindert mehrfache App-Registrierung
  guid: "b6b5b9b2-7b8b-4b9b-8b7b-7b8b7b8b7b8b"
  menuCategory: "RawaLite"
  shortcutName: "RawaLite"

publish:
  provider: github
  owner: MonaFP
  repo: RawaLite
  releaseType: release

# File associations
fileAssociations:
  - ext: rawalite
    name: RawaLite Document
    description: RawaLite Document File

# Build optimization
nodeGypRebuild: false
buildDependenciesFromSource: false

# Metadata for proper update detection
extraMetadata:
  main: dist-electron/main.cjs
  homepage: https://github.com/MonaFP/RawaLite
  repository: https://github.com/MonaFP/RawaLite