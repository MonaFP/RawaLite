var bg=Object.defineProperty;var wg=(e,t,n)=>t in e?bg(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Qt=(e,t,n)=>wg(e,typeof t!="symbol"?t+"":t,n);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=n(i);fetch(i.href,a)}})();var yv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ep(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Eg(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var tp={exports:{}},Ba={},np={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var so=Symbol.for("react.element"),Sg=Symbol.for("react.portal"),kg=Symbol.for("react.fragment"),Tg=Symbol.for("react.strict_mode"),jg=Symbol.for("react.profiler"),Cg=Symbol.for("react.provider"),Ng=Symbol.for("react.context"),Ig=Symbol.for("react.forward_ref"),Rg=Symbol.for("react.suspense"),Ag=Symbol.for("react.memo"),Lg=Symbol.for("react.lazy"),Ac=Symbol.iterator;function Dg(e){return e===null||typeof e!="object"?null:(e=Ac&&e[Ac]||e["@@iterator"],typeof e=="function"?e:null)}var rp={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ip=Object.assign,op={};function ai(e,t,n){this.props=e,this.context=t,this.refs=op,this.updater=n||rp}ai.prototype.isReactComponent={};ai.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};ai.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function ap(){}ap.prototype=ai.prototype;function Yl(e,t,n){this.props=e,this.context=t,this.refs=op,this.updater=n||rp}var Zl=Yl.prototype=new ap;Zl.constructor=Yl;ip(Zl,ai.prototype);Zl.isPureReactComponent=!0;var Lc=Array.isArray,sp=Object.prototype.hasOwnProperty,Jl={current:null},lp={key:!0,ref:!0,__self:!0,__source:!0};function up(e,t,n){var r,i={},a=null,l=null;if(t!=null)for(r in t.ref!==void 0&&(l=t.ref),t.key!==void 0&&(a=""+t.key),t)sp.call(t,r)&&!lp.hasOwnProperty(r)&&(i[r]=t[r]);var d=arguments.length-2;if(d===1)i.children=n;else if(1<d){for(var p=Array(d),u=0;u<d;u++)p[u]=arguments[u+2];i.children=p}if(e&&e.defaultProps)for(r in d=e.defaultProps,d)i[r]===void 0&&(i[r]=d[r]);return{$$typeof:so,type:e,key:a,ref:l,props:i,_owner:Jl.current}}function Pg(e,t){return{$$typeof:so,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function eu(e){return typeof e=="object"&&e!==null&&e.$$typeof===so}function _g(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Dc=/\/+/g;function bs(e,t){return typeof e=="object"&&e!==null&&e.key!=null?_g(""+e.key):t.toString(36)}function Zo(e,t,n,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var l=!1;if(e===null)l=!0;else switch(a){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case so:case Sg:l=!0}}if(l)return l=e,i=i(l),e=r===""?"."+bs(l,0):r,Lc(i)?(n="",e!=null&&(n=e.replace(Dc,"$&/")+"/"),Zo(i,t,n,"",function(u){return u})):i!=null&&(eu(i)&&(i=Pg(i,n+(!i.key||l&&l.key===i.key?"":(""+i.key).replace(Dc,"$&/")+"/")+e)),t.push(i)),1;if(l=0,r=r===""?".":r+":",Lc(e))for(var d=0;d<e.length;d++){a=e[d];var p=r+bs(a,d);l+=Zo(a,t,n,p,i)}else if(p=Dg(e),typeof p=="function")for(e=p.call(e),d=0;!(a=e.next()).done;)a=a.value,p=r+bs(a,d++),l+=Zo(a,t,n,p,i);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function Lo(e,t,n){if(e==null)return e;var r=[],i=0;return Zo(e,r,"","",function(a){return t.call(n,a,i++)}),r}function zg(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vt={current:null},Jo={transition:null},Fg={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:Jo,ReactCurrentOwner:Jl};function cp(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Lo,forEach:function(e,t,n){Lo(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Lo(e,function(){t++}),t},toArray:function(e){return Lo(e,function(t){return t})||[]},only:function(e){if(!eu(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};xe.Component=ai;xe.Fragment=kg;xe.Profiler=jg;xe.PureComponent=Yl;xe.StrictMode=Tg;xe.Suspense=Rg;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fg;xe.act=cp;xe.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=ip({},e.props),i=e.key,a=e.ref,l=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,l=Jl.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var d=e.type.defaultProps;for(p in t)sp.call(t,p)&&!lp.hasOwnProperty(p)&&(r[p]=t[p]===void 0&&d!==void 0?d[p]:t[p])}var p=arguments.length-2;if(p===1)r.children=n;else if(1<p){d=Array(p);for(var u=0;u<p;u++)d[u]=arguments[u+2];r.children=d}return{$$typeof:so,type:e.type,key:i,ref:a,props:r,_owner:l}};xe.createContext=function(e){return e={$$typeof:Ng,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Cg,_context:e},e.Consumer=e};xe.createElement=up;xe.createFactory=function(e){var t=up.bind(null,e);return t.type=e,t};xe.createRef=function(){return{current:null}};xe.forwardRef=function(e){return{$$typeof:Ig,render:e}};xe.isValidElement=eu;xe.lazy=function(e){return{$$typeof:Lg,_payload:{_status:-1,_result:e},_init:zg}};xe.memo=function(e,t){return{$$typeof:Ag,type:e,compare:t===void 0?null:t}};xe.startTransition=function(e){var t=Jo.transition;Jo.transition={};try{e()}finally{Jo.transition=t}};xe.unstable_act=cp;xe.useCallback=function(e,t){return vt.current.useCallback(e,t)};xe.useContext=function(e){return vt.current.useContext(e)};xe.useDebugValue=function(){};xe.useDeferredValue=function(e){return vt.current.useDeferredValue(e)};xe.useEffect=function(e,t){return vt.current.useEffect(e,t)};xe.useId=function(){return vt.current.useId()};xe.useImperativeHandle=function(e,t,n){return vt.current.useImperativeHandle(e,t,n)};xe.useInsertionEffect=function(e,t){return vt.current.useInsertionEffect(e,t)};xe.useLayoutEffect=function(e,t){return vt.current.useLayoutEffect(e,t)};xe.useMemo=function(e,t){return vt.current.useMemo(e,t)};xe.useReducer=function(e,t,n){return vt.current.useReducer(e,t,n)};xe.useRef=function(e){return vt.current.useRef(e)};xe.useState=function(e){return vt.current.useState(e)};xe.useSyncExternalStore=function(e,t,n){return vt.current.useSyncExternalStore(e,t,n)};xe.useTransition=function(){return vt.current.useTransition()};xe.version="18.3.1";np.exports=xe;var k=np.exports;const fa=ep(k);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og=k,Mg=Symbol.for("react.element"),Bg=Symbol.for("react.fragment"),Ug=Object.prototype.hasOwnProperty,$g=Og.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Wg={key:!0,ref:!0,__self:!0,__source:!0};function dp(e,t,n){var r,i={},a=null,l=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(r in t)Ug.call(t,r)&&!Wg.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:Mg,type:e,key:a,ref:l,props:i,_owner:$g.current}}Ba.Fragment=Bg;Ba.jsx=dp;Ba.jsxs=dp;tp.exports=Ba;var o=tp.exports,el={},pp={exports:{}},_t={},fp={exports:{}},hp={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(G,O){var W=G.length;G.push(O);e:for(;0<W;){var V=W-1>>>1,te=G[V];if(0<i(te,O))G[V]=O,G[W]=te,W=V;else break e}}function n(G){return G.length===0?null:G[0]}function r(G){if(G.length===0)return null;var O=G[0],W=G.pop();if(W!==O){G[0]=W;e:for(var V=0,te=G.length,Se=te>>>1;V<Se;){var Z=2*(V+1)-1,$=G[Z],Q=Z+1,fe=G[Q];if(0>i($,W))Q<te&&0>i(fe,$)?(G[V]=fe,G[Q]=W,V=Q):(G[V]=$,G[Z]=W,V=Z);else if(Q<te&&0>i(fe,W))G[V]=fe,G[Q]=W,V=Q;else break e}}return O}function i(G,O){var W=G.sortIndex-O.sortIndex;return W!==0?W:G.id-O.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();e.unstable_now=function(){return l.now()-d}}var p=[],u=[],m=1,g=null,v=3,E=!1,h=!1,S=!1,T=typeof setTimeout=="function"?setTimeout:null,b=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(G){for(var O=n(u);O!==null;){if(O.callback===null)r(u);else if(O.startTime<=G)r(u),O.sortIndex=O.expirationTime,t(p,O);else break;O=n(u)}}function R(G){if(S=!1,w(G),!h)if(n(p)!==null)h=!0,me(N);else{var O=n(u);O!==null&&ve(R,O.startTime-G)}}function N(G,O){h=!1,S&&(S=!1,b(F),F=-1),E=!0;var W=v;try{for(w(O),g=n(p);g!==null&&(!(g.expirationTime>O)||G&&!C());){var V=g.callback;if(typeof V=="function"){g.callback=null,v=g.priorityLevel;var te=V(g.expirationTime<=O);O=e.unstable_now(),typeof te=="function"?g.callback=te:g===n(p)&&r(p),w(O)}else r(p);g=n(p)}if(g!==null)var Se=!0;else{var Z=n(u);Z!==null&&ve(R,Z.startTime-O),Se=!1}return Se}finally{g=null,v=W,E=!1}}var L=!1,A=null,F=-1,B=5,j=-1;function C(){return!(e.unstable_now()-j<B)}function z(){if(A!==null){var G=e.unstable_now();j=G;var O=!0;try{O=A(!0,G)}finally{O?M():(L=!1,A=null)}}else L=!1}var M;if(typeof y=="function")M=function(){y(z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,he=Y.port2;Y.port1.onmessage=z,M=function(){he.postMessage(null)}}else M=function(){T(z,0)};function me(G){A=G,L||(L=!0,M())}function ve(G,O){F=T(function(){G(e.unstable_now())},O)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(G){G.callback=null},e.unstable_continueExecution=function(){h||E||(h=!0,me(N))},e.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):B=0<G?Math.floor(1e3/G):5},e.unstable_getCurrentPriorityLevel=function(){return v},e.unstable_getFirstCallbackNode=function(){return n(p)},e.unstable_next=function(G){switch(v){case 1:case 2:case 3:var O=3;break;default:O=v}var W=v;v=O;try{return G()}finally{v=W}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(G,O){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var W=v;v=G;try{return O()}finally{v=W}},e.unstable_scheduleCallback=function(G,O,W){var V=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?V+W:V):W=V,G){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=W+te,G={id:m++,callback:O,priorityLevel:G,startTime:W,expirationTime:te,sortIndex:-1},W>V?(G.sortIndex=W,t(u,G),n(p)===null&&G===n(u)&&(S?(b(F),F=-1):S=!0,ve(R,W-V))):(G.sortIndex=te,t(p,G),h||E||(h=!0,me(N))),G},e.unstable_shouldYield=C,e.unstable_wrapCallback=function(G){var O=v;return function(){var W=v;v=O;try{return G.apply(this,arguments)}finally{v=W}}}})(hp);fp.exports=hp;var Vg=fp.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hg=k,Pt=Vg;function X(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gp=new Set,Wi={};function wr(e,t){Jr(e,t),Jr(e+"Capture",t)}function Jr(e,t){for(Wi[e]=t,e=0;e<t.length;e++)gp.add(t[e])}var jn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),tl=Object.prototype.hasOwnProperty,qg=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pc={},_c={};function Xg(e){return tl.call(_c,e)?!0:tl.call(Pc,e)?!1:qg.test(e)?_c[e]=!0:(Pc[e]=!0,!1)}function Kg(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Gg(e,t,n,r){if(t===null||typeof t>"u"||Kg(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function bt(e,t,n,r,i,a,l){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=l}var ot={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ot[e]=new bt(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];ot[t]=new bt(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ot[e]=new bt(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ot[e]=new bt(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ot[e]=new bt(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ot[e]=new bt(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ot[e]=new bt(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ot[e]=new bt(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ot[e]=new bt(e,5,!1,e.toLowerCase(),null,!1,!1)});var tu=/[\-:]([a-z])/g;function nu(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(tu,nu);ot[t]=new bt(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(tu,nu);ot[t]=new bt(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(tu,nu);ot[t]=new bt(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ot[e]=new bt(e,1,!1,e.toLowerCase(),null,!1,!1)});ot.xlinkHref=new bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ot[e]=new bt(e,1,!1,e.toLowerCase(),null,!0,!0)});function ru(e,t,n,r){var i=ot.hasOwnProperty(t)?ot[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Gg(t,n,i,r)&&(n=null),r||i===null?Xg(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var An=Hg.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Do=Symbol.for("react.element"),Dr=Symbol.for("react.portal"),Pr=Symbol.for("react.fragment"),iu=Symbol.for("react.strict_mode"),nl=Symbol.for("react.profiler"),mp=Symbol.for("react.provider"),yp=Symbol.for("react.context"),ou=Symbol.for("react.forward_ref"),rl=Symbol.for("react.suspense"),il=Symbol.for("react.suspense_list"),au=Symbol.for("react.memo"),On=Symbol.for("react.lazy"),xp=Symbol.for("react.offscreen"),zc=Symbol.iterator;function bi(e){return e===null||typeof e!="object"?null:(e=zc&&e[zc]||e["@@iterator"],typeof e=="function"?e:null)}var Ve=Object.assign,ws;function Ii(e){if(ws===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);ws=t&&t[1]||""}return`
`+ws+e}var Es=!1;function Ss(e,t){if(!e||Es)return"";Es=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(u){var r=u}Reflect.construct(e,[],t)}else{try{t.call()}catch(u){r=u}e.call(t.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),l=i.length-1,d=a.length-1;1<=l&&0<=d&&i[l]!==a[d];)d--;for(;1<=l&&0<=d;l--,d--)if(i[l]!==a[d]){if(l!==1||d!==1)do if(l--,d--,0>d||i[l]!==a[d]){var p=`
`+i[l].replace(" at new "," at ");return e.displayName&&p.includes("<anonymous>")&&(p=p.replace("<anonymous>",e.displayName)),p}while(1<=l&&0<=d);break}}}finally{Es=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?Ii(e):""}function Qg(e){switch(e.tag){case 5:return Ii(e.type);case 16:return Ii("Lazy");case 13:return Ii("Suspense");case 19:return Ii("SuspenseList");case 0:case 2:case 15:return e=Ss(e.type,!1),e;case 11:return e=Ss(e.type.render,!1),e;case 1:return e=Ss(e.type,!0),e;default:return""}}function ol(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Pr:return"Fragment";case Dr:return"Portal";case nl:return"Profiler";case iu:return"StrictMode";case rl:return"Suspense";case il:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case yp:return(e.displayName||"Context")+".Consumer";case mp:return(e._context.displayName||"Context")+".Provider";case ou:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case au:return t=e.displayName||null,t!==null?t:ol(e.type)||"Memo";case On:t=e._payload,e=e._init;try{return ol(e(t))}catch{}}return null}function Yg(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ol(t);case 8:return t===iu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Zn(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function vp(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Zg(e){var t=vp(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(l){r=""+l,a.call(this,l)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(l){r=""+l},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Po(e){e._valueTracker||(e._valueTracker=Zg(e))}function bp(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=vp(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function ha(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function al(e,t){var n=t.checked;return Ve({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Fc(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Zn(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function wp(e,t){t=t.checked,t!=null&&ru(e,"checked",t,!1)}function sl(e,t){wp(e,t);var n=Zn(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?ll(e,t.type,n):t.hasOwnProperty("defaultValue")&&ll(e,t.type,Zn(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Oc(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function ll(e,t,n){(t!=="number"||ha(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var Ri=Array.isArray;function Hr(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Zn(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function ul(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(X(91));return Ve({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Mc(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(X(92));if(Ri(n)){if(1<n.length)throw Error(X(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Zn(n)}}function Ep(e,t){var n=Zn(t.value),r=Zn(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Bc(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sp(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function cl(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sp(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var _o,kp=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(_o=_o||document.createElement("div"),_o.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=_o.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Vi(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Di={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jg=["Webkit","ms","Moz","O"];Object.keys(Di).forEach(function(e){Jg.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Di[t]=Di[e]})});function Tp(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Di.hasOwnProperty(e)&&Di[e]?(""+t).trim():t+"px"}function jp(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Tp(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var em=Ve({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function dl(e,t){if(t){if(em[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(X(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(X(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(X(61))}if(t.style!=null&&typeof t.style!="object")throw Error(X(62))}}function pl(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fl=null;function su(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var hl=null,qr=null,Xr=null;function Uc(e){if(e=co(e)){if(typeof hl!="function")throw Error(X(280));var t=e.stateNode;t&&(t=Ha(t),hl(e.stateNode,e.type,t))}}function Cp(e){qr?Xr?Xr.push(e):Xr=[e]:qr=e}function Np(){if(qr){var e=qr,t=Xr;if(Xr=qr=null,Uc(e),t)for(e=0;e<t.length;e++)Uc(t[e])}}function Ip(e,t){return e(t)}function Rp(){}var ks=!1;function Ap(e,t,n){if(ks)return e(t,n);ks=!0;try{return Ip(e,t,n)}finally{ks=!1,(qr!==null||Xr!==null)&&(Rp(),Np())}}function Hi(e,t){var n=e.stateNode;if(n===null)return null;var r=Ha(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(X(231,t,typeof n));return n}var gl=!1;if(jn)try{var wi={};Object.defineProperty(wi,"passive",{get:function(){gl=!0}}),window.addEventListener("test",wi,wi),window.removeEventListener("test",wi,wi)}catch{gl=!1}function tm(e,t,n,r,i,a,l,d,p){var u=Array.prototype.slice.call(arguments,3);try{t.apply(n,u)}catch(m){this.onError(m)}}var Pi=!1,ga=null,ma=!1,ml=null,nm={onError:function(e){Pi=!0,ga=e}};function rm(e,t,n,r,i,a,l,d,p){Pi=!1,ga=null,tm.apply(nm,arguments)}function im(e,t,n,r,i,a,l,d,p){if(rm.apply(this,arguments),Pi){if(Pi){var u=ga;Pi=!1,ga=null}else throw Error(X(198));ma||(ma=!0,ml=u)}}function Er(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Lp(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function $c(e){if(Er(e)!==e)throw Error(X(188))}function om(e){var t=e.alternate;if(!t){if(t=Er(e),t===null)throw Error(X(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return $c(i),e;if(a===r)return $c(i),t;a=a.sibling}throw Error(X(188))}if(n.return!==r.return)n=i,r=a;else{for(var l=!1,d=i.child;d;){if(d===n){l=!0,n=i,r=a;break}if(d===r){l=!0,r=i,n=a;break}d=d.sibling}if(!l){for(d=a.child;d;){if(d===n){l=!0,n=a,r=i;break}if(d===r){l=!0,r=a,n=i;break}d=d.sibling}if(!l)throw Error(X(189))}}if(n.alternate!==r)throw Error(X(190))}if(n.tag!==3)throw Error(X(188));return n.stateNode.current===n?e:t}function Dp(e){return e=om(e),e!==null?Pp(e):null}function Pp(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Pp(e);if(t!==null)return t;e=e.sibling}return null}var _p=Pt.unstable_scheduleCallback,Wc=Pt.unstable_cancelCallback,am=Pt.unstable_shouldYield,sm=Pt.unstable_requestPaint,Ge=Pt.unstable_now,lm=Pt.unstable_getCurrentPriorityLevel,lu=Pt.unstable_ImmediatePriority,zp=Pt.unstable_UserBlockingPriority,ya=Pt.unstable_NormalPriority,um=Pt.unstable_LowPriority,Fp=Pt.unstable_IdlePriority,Ua=null,hn=null;function cm(e){if(hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Ua,e,void 0,(e.current.flags&128)===128)}catch{}}var rn=Math.clz32?Math.clz32:fm,dm=Math.log,pm=Math.LN2;function fm(e){return e>>>=0,e===0?32:31-(dm(e)/pm|0)|0}var zo=64,Fo=4194304;function Ai(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function xa(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,l=n&268435455;if(l!==0){var d=l&~i;d!==0?r=Ai(d):(a&=l,a!==0&&(r=Ai(a)))}else l=n&~i,l!==0?r=Ai(l):a!==0&&(r=Ai(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,a=t&-t,i>=a||i===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-rn(t),i=1<<n,r|=e[n],t&=~i;return r}function hm(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function gm(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var l=31-rn(a),d=1<<l,p=i[l];p===-1?(!(d&n)||d&r)&&(i[l]=hm(d,t)):p<=t&&(e.expiredLanes|=d),a&=~d}}function yl(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Op(){var e=zo;return zo<<=1,!(zo&4194240)&&(zo=64),e}function Ts(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function lo(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-rn(t),e[t]=n}function mm(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-rn(n),a=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~a}}function uu(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-rn(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Ce=0;function Mp(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Bp,cu,Up,$p,Wp,xl=!1,Oo=[],Vn=null,Hn=null,qn=null,qi=new Map,Xi=new Map,Bn=[],ym="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vc(e,t){switch(e){case"focusin":case"focusout":Vn=null;break;case"dragenter":case"dragleave":Hn=null;break;case"mouseover":case"mouseout":qn=null;break;case"pointerover":case"pointerout":qi.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xi.delete(t.pointerId)}}function Ei(e,t,n,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},t!==null&&(t=co(t),t!==null&&cu(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function xm(e,t,n,r,i){switch(t){case"focusin":return Vn=Ei(Vn,e,t,n,r,i),!0;case"dragenter":return Hn=Ei(Hn,e,t,n,r,i),!0;case"mouseover":return qn=Ei(qn,e,t,n,r,i),!0;case"pointerover":var a=i.pointerId;return qi.set(a,Ei(qi.get(a)||null,e,t,n,r,i)),!0;case"gotpointercapture":return a=i.pointerId,Xi.set(a,Ei(Xi.get(a)||null,e,t,n,r,i)),!0}return!1}function Vp(e){var t=dr(e.target);if(t!==null){var n=Er(t);if(n!==null){if(t=n.tag,t===13){if(t=Lp(n),t!==null){e.blockedOn=t,Wp(e.priority,function(){Up(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ea(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=vl(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);fl=r,n.target.dispatchEvent(r),fl=null}else return t=co(n),t!==null&&cu(t),e.blockedOn=n,!1;t.shift()}return!0}function Hc(e,t,n){ea(e)&&n.delete(t)}function vm(){xl=!1,Vn!==null&&ea(Vn)&&(Vn=null),Hn!==null&&ea(Hn)&&(Hn=null),qn!==null&&ea(qn)&&(qn=null),qi.forEach(Hc),Xi.forEach(Hc)}function Si(e,t){e.blockedOn===t&&(e.blockedOn=null,xl||(xl=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,vm)))}function Ki(e){function t(i){return Si(i,e)}if(0<Oo.length){Si(Oo[0],e);for(var n=1;n<Oo.length;n++){var r=Oo[n];r.blockedOn===e&&(r.blockedOn=null)}}for(Vn!==null&&Si(Vn,e),Hn!==null&&Si(Hn,e),qn!==null&&Si(qn,e),qi.forEach(t),Xi.forEach(t),n=0;n<Bn.length;n++)r=Bn[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Bn.length&&(n=Bn[0],n.blockedOn===null);)Vp(n),n.blockedOn===null&&Bn.shift()}var Kr=An.ReactCurrentBatchConfig,va=!0;function bm(e,t,n,r){var i=Ce,a=Kr.transition;Kr.transition=null;try{Ce=1,du(e,t,n,r)}finally{Ce=i,Kr.transition=a}}function wm(e,t,n,r){var i=Ce,a=Kr.transition;Kr.transition=null;try{Ce=4,du(e,t,n,r)}finally{Ce=i,Kr.transition=a}}function du(e,t,n,r){if(va){var i=vl(e,t,n,r);if(i===null)_s(e,t,r,ba,n),Vc(e,r);else if(xm(i,e,t,n,r))r.stopPropagation();else if(Vc(e,r),t&4&&-1<ym.indexOf(e)){for(;i!==null;){var a=co(i);if(a!==null&&Bp(a),a=vl(e,t,n,r),a===null&&_s(e,t,r,ba,n),a===i)break;i=a}i!==null&&r.stopPropagation()}else _s(e,t,r,null,n)}}var ba=null;function vl(e,t,n,r){if(ba=null,e=su(r),e=dr(e),e!==null)if(t=Er(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Lp(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ba=e,null}function Hp(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lm()){case lu:return 1;case zp:return 4;case ya:case um:return 16;case Fp:return 536870912;default:return 16}default:return 16}}var $n=null,pu=null,ta=null;function qp(){if(ta)return ta;var e,t=pu,n=t.length,r,i="value"in $n?$n.value:$n.textContent,a=i.length;for(e=0;e<n&&t[e]===i[e];e++);var l=n-e;for(r=1;r<=l&&t[n-r]===i[a-r];r++);return ta=i.slice(e,1<r?1-r:void 0)}function na(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Mo(){return!0}function qc(){return!1}function zt(e){function t(n,r,i,a,l){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=l,this.currentTarget=null;for(var d in e)e.hasOwnProperty(d)&&(n=e[d],this[d]=n?n(a):a[d]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?Mo:qc,this.isPropagationStopped=qc,this}return Ve(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Mo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Mo)},persist:function(){},isPersistent:Mo}),t}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fu=zt(si),uo=Ve({},si,{view:0,detail:0}),Em=zt(uo),js,Cs,ki,$a=Ve({},uo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:hu,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ki&&(ki&&e.type==="mousemove"?(js=e.screenX-ki.screenX,Cs=e.screenY-ki.screenY):Cs=js=0,ki=e),js)},movementY:function(e){return"movementY"in e?e.movementY:Cs}}),Xc=zt($a),Sm=Ve({},$a,{dataTransfer:0}),km=zt(Sm),Tm=Ve({},uo,{relatedTarget:0}),Ns=zt(Tm),jm=Ve({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),Cm=zt(jm),Nm=Ve({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Im=zt(Nm),Rm=Ve({},si,{data:0}),Kc=zt(Rm),Am={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Dm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pm(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Dm[e])?!!t[e]:!1}function hu(){return Pm}var _m=Ve({},uo,{key:function(e){if(e.key){var t=Am[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=na(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Lm[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:hu,charCode:function(e){return e.type==="keypress"?na(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?na(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),zm=zt(_m),Fm=Ve({},$a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gc=zt(Fm),Om=Ve({},uo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:hu}),Mm=zt(Om),Bm=Ve({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),Um=zt(Bm),$m=Ve({},$a,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wm=zt($m),Vm=[9,13,27,32],gu=jn&&"CompositionEvent"in window,_i=null;jn&&"documentMode"in document&&(_i=document.documentMode);var Hm=jn&&"TextEvent"in window&&!_i,Xp=jn&&(!gu||_i&&8<_i&&11>=_i),Qc=" ",Yc=!1;function Kp(e,t){switch(e){case"keyup":return Vm.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gp(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var _r=!1;function qm(e,t){switch(e){case"compositionend":return Gp(t);case"keypress":return t.which!==32?null:(Yc=!0,Qc);case"textInput":return e=t.data,e===Qc&&Yc?null:e;default:return null}}function Xm(e,t){if(_r)return e==="compositionend"||!gu&&Kp(e,t)?(e=qp(),ta=pu=$n=null,_r=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Xp&&t.locale!=="ko"?null:t.data;default:return null}}var Km={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zc(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Km[e.type]:t==="textarea"}function Qp(e,t,n,r){Cp(r),t=wa(t,"onChange"),0<t.length&&(n=new fu("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var zi=null,Gi=null;function Gm(e){lf(e,0)}function Wa(e){var t=Or(e);if(bp(t))return e}function Qm(e,t){if(e==="change")return t}var Yp=!1;if(jn){var Is;if(jn){var Rs="oninput"in document;if(!Rs){var Jc=document.createElement("div");Jc.setAttribute("oninput","return;"),Rs=typeof Jc.oninput=="function"}Is=Rs}else Is=!1;Yp=Is&&(!document.documentMode||9<document.documentMode)}function ed(){zi&&(zi.detachEvent("onpropertychange",Zp),Gi=zi=null)}function Zp(e){if(e.propertyName==="value"&&Wa(Gi)){var t=[];Qp(t,Gi,e,su(e)),Ap(Gm,t)}}function Ym(e,t,n){e==="focusin"?(ed(),zi=t,Gi=n,zi.attachEvent("onpropertychange",Zp)):e==="focusout"&&ed()}function Zm(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wa(Gi)}function Jm(e,t){if(e==="click")return Wa(t)}function ey(e,t){if(e==="input"||e==="change")return Wa(t)}function ty(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var an=typeof Object.is=="function"?Object.is:ty;function Qi(e,t){if(an(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!tl.call(t,i)||!an(e[i],t[i]))return!1}return!0}function td(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function nd(e,t){var n=td(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=td(n)}}function Jp(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Jp(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ef(){for(var e=window,t=ha();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=ha(e.document)}return t}function mu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function ny(e){var t=ef(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Jp(n.ownerDocument.documentElement,n)){if(r!==null&&mu(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=nd(n,a);var l=nd(n,r);i&&l&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==l.node||e.focusOffset!==l.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(l.node,l.offset)):(t.setEnd(l.node,l.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var ry=jn&&"documentMode"in document&&11>=document.documentMode,zr=null,bl=null,Fi=null,wl=!1;function rd(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;wl||zr==null||zr!==ha(r)||(r=zr,"selectionStart"in r&&mu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Fi&&Qi(Fi,r)||(Fi=r,r=wa(bl,"onSelect"),0<r.length&&(t=new fu("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=zr)))}function Bo(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Fr={animationend:Bo("Animation","AnimationEnd"),animationiteration:Bo("Animation","AnimationIteration"),animationstart:Bo("Animation","AnimationStart"),transitionend:Bo("Transition","TransitionEnd")},As={},tf={};jn&&(tf=document.createElement("div").style,"AnimationEvent"in window||(delete Fr.animationend.animation,delete Fr.animationiteration.animation,delete Fr.animationstart.animation),"TransitionEvent"in window||delete Fr.transitionend.transition);function Va(e){if(As[e])return As[e];if(!Fr[e])return e;var t=Fr[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in tf)return As[e]=t[n];return e}var nf=Va("animationend"),rf=Va("animationiteration"),of=Va("animationstart"),af=Va("transitionend"),sf=new Map,id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function er(e,t){sf.set(e,t),wr(t,[e])}for(var Ls=0;Ls<id.length;Ls++){var Ds=id[Ls],iy=Ds.toLowerCase(),oy=Ds[0].toUpperCase()+Ds.slice(1);er(iy,"on"+oy)}er(nf,"onAnimationEnd");er(rf,"onAnimationIteration");er(of,"onAnimationStart");er("dblclick","onDoubleClick");er("focusin","onFocus");er("focusout","onBlur");er(af,"onTransitionEnd");Jr("onMouseEnter",["mouseout","mouseover"]);Jr("onMouseLeave",["mouseout","mouseover"]);Jr("onPointerEnter",["pointerout","pointerover"]);Jr("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Li="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ay=new Set("cancel close invalid load scroll toggle".split(" ").concat(Li));function od(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,im(r,t,void 0,e),e.currentTarget=null}function lf(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var l=r.length-1;0<=l;l--){var d=r[l],p=d.instance,u=d.currentTarget;if(d=d.listener,p!==a&&i.isPropagationStopped())break e;od(i,d,u),a=p}else for(l=0;l<r.length;l++){if(d=r[l],p=d.instance,u=d.currentTarget,d=d.listener,p!==a&&i.isPropagationStopped())break e;od(i,d,u),a=p}}}if(ma)throw e=ml,ma=!1,ml=null,e}function _e(e,t){var n=t[jl];n===void 0&&(n=t[jl]=new Set);var r=e+"__bubble";n.has(r)||(uf(t,e,2,!1),n.add(r))}function Ps(e,t,n){var r=0;t&&(r|=4),uf(n,e,r,t)}var Uo="_reactListening"+Math.random().toString(36).slice(2);function Yi(e){if(!e[Uo]){e[Uo]=!0,gp.forEach(function(n){n!=="selectionchange"&&(ay.has(n)||Ps(n,!1,e),Ps(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Uo]||(t[Uo]=!0,Ps("selectionchange",!1,t))}}function uf(e,t,n,r){switch(Hp(t)){case 1:var i=bm;break;case 4:i=wm;break;default:i=du}n=i.bind(null,t,n,e),i=void 0,!gl||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function _s(e,t,n,r,i){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var l=r.tag;if(l===3||l===4){var d=r.stateNode.containerInfo;if(d===i||d.nodeType===8&&d.parentNode===i)break;if(l===4)for(l=r.return;l!==null;){var p=l.tag;if((p===3||p===4)&&(p=l.stateNode.containerInfo,p===i||p.nodeType===8&&p.parentNode===i))return;l=l.return}for(;d!==null;){if(l=dr(d),l===null)return;if(p=l.tag,p===5||p===6){r=a=l;continue e}d=d.parentNode}}r=r.return}Ap(function(){var u=a,m=su(n),g=[];e:{var v=sf.get(e);if(v!==void 0){var E=fu,h=e;switch(e){case"keypress":if(na(n)===0)break e;case"keydown":case"keyup":E=zm;break;case"focusin":h="focus",E=Ns;break;case"focusout":h="blur",E=Ns;break;case"beforeblur":case"afterblur":E=Ns;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":E=Xc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":E=km;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":E=Mm;break;case nf:case rf:case of:E=Cm;break;case af:E=Um;break;case"scroll":E=Em;break;case"wheel":E=Wm;break;case"copy":case"cut":case"paste":E=Im;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":E=Gc}var S=(t&4)!==0,T=!S&&e==="scroll",b=S?v!==null?v+"Capture":null:v;S=[];for(var y=u,w;y!==null;){w=y;var R=w.stateNode;if(w.tag===5&&R!==null&&(w=R,b!==null&&(R=Hi(y,b),R!=null&&S.push(Zi(y,R,w)))),T)break;y=y.return}0<S.length&&(v=new E(v,h,null,n,m),g.push({event:v,listeners:S}))}}if(!(t&7)){e:{if(v=e==="mouseover"||e==="pointerover",E=e==="mouseout"||e==="pointerout",v&&n!==fl&&(h=n.relatedTarget||n.fromElement)&&(dr(h)||h[Cn]))break e;if((E||v)&&(v=m.window===m?m:(v=m.ownerDocument)?v.defaultView||v.parentWindow:window,E?(h=n.relatedTarget||n.toElement,E=u,h=h?dr(h):null,h!==null&&(T=Er(h),h!==T||h.tag!==5&&h.tag!==6)&&(h=null)):(E=null,h=u),E!==h)){if(S=Xc,R="onMouseLeave",b="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(S=Gc,R="onPointerLeave",b="onPointerEnter",y="pointer"),T=E==null?v:Or(E),w=h==null?v:Or(h),v=new S(R,y+"leave",E,n,m),v.target=T,v.relatedTarget=w,R=null,dr(m)===u&&(S=new S(b,y+"enter",h,n,m),S.target=w,S.relatedTarget=T,R=S),T=R,E&&h)t:{for(S=E,b=h,y=0,w=S;w;w=Ar(w))y++;for(w=0,R=b;R;R=Ar(R))w++;for(;0<y-w;)S=Ar(S),y--;for(;0<w-y;)b=Ar(b),w--;for(;y--;){if(S===b||b!==null&&S===b.alternate)break t;S=Ar(S),b=Ar(b)}S=null}else S=null;E!==null&&ad(g,v,E,S,!1),h!==null&&T!==null&&ad(g,T,h,S,!0)}}e:{if(v=u?Or(u):window,E=v.nodeName&&v.nodeName.toLowerCase(),E==="select"||E==="input"&&v.type==="file")var N=Qm;else if(Zc(v))if(Yp)N=ey;else{N=Zm;var L=Ym}else(E=v.nodeName)&&E.toLowerCase()==="input"&&(v.type==="checkbox"||v.type==="radio")&&(N=Jm);if(N&&(N=N(e,u))){Qp(g,N,n,m);break e}L&&L(e,v,u),e==="focusout"&&(L=v._wrapperState)&&L.controlled&&v.type==="number"&&ll(v,"number",v.value)}switch(L=u?Or(u):window,e){case"focusin":(Zc(L)||L.contentEditable==="true")&&(zr=L,bl=u,Fi=null);break;case"focusout":Fi=bl=zr=null;break;case"mousedown":wl=!0;break;case"contextmenu":case"mouseup":case"dragend":wl=!1,rd(g,n,m);break;case"selectionchange":if(ry)break;case"keydown":case"keyup":rd(g,n,m)}var A;if(gu)e:{switch(e){case"compositionstart":var F="onCompositionStart";break e;case"compositionend":F="onCompositionEnd";break e;case"compositionupdate":F="onCompositionUpdate";break e}F=void 0}else _r?Kp(e,n)&&(F="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(F="onCompositionStart");F&&(Xp&&n.locale!=="ko"&&(_r||F!=="onCompositionStart"?F==="onCompositionEnd"&&_r&&(A=qp()):($n=m,pu="value"in $n?$n.value:$n.textContent,_r=!0)),L=wa(u,F),0<L.length&&(F=new Kc(F,e,null,n,m),g.push({event:F,listeners:L}),A?F.data=A:(A=Gp(n),A!==null&&(F.data=A)))),(A=Hm?qm(e,n):Xm(e,n))&&(u=wa(u,"onBeforeInput"),0<u.length&&(m=new Kc("onBeforeInput","beforeinput",null,n,m),g.push({event:m,listeners:u}),m.data=A))}lf(g,t)})}function Zi(e,t,n){return{instance:e,listener:t,currentTarget:n}}function wa(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=Hi(e,n),a!=null&&r.unshift(Zi(e,a,i)),a=Hi(e,t),a!=null&&r.push(Zi(e,a,i))),e=e.return}return r}function Ar(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function ad(e,t,n,r,i){for(var a=t._reactName,l=[];n!==null&&n!==r;){var d=n,p=d.alternate,u=d.stateNode;if(p!==null&&p===r)break;d.tag===5&&u!==null&&(d=u,i?(p=Hi(n,a),p!=null&&l.unshift(Zi(n,p,d))):i||(p=Hi(n,a),p!=null&&l.push(Zi(n,p,d)))),n=n.return}l.length!==0&&e.push({event:t,listeners:l})}var sy=/\r\n?/g,ly=/\u0000|\uFFFD/g;function sd(e){return(typeof e=="string"?e:""+e).replace(sy,`
`).replace(ly,"")}function $o(e,t,n){if(t=sd(t),sd(e)!==t&&n)throw Error(X(425))}function Ea(){}var El=null,Sl=null;function kl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Tl=typeof setTimeout=="function"?setTimeout:void 0,uy=typeof clearTimeout=="function"?clearTimeout:void 0,ld=typeof Promise=="function"?Promise:void 0,cy=typeof queueMicrotask=="function"?queueMicrotask:typeof ld<"u"?function(e){return ld.resolve(null).then(e).catch(dy)}:Tl;function dy(e){setTimeout(function(){throw e})}function zs(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),Ki(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ki(t)}function Xn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ud(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var li=Math.random().toString(36).slice(2),fn="__reactFiber$"+li,Ji="__reactProps$"+li,Cn="__reactContainer$"+li,jl="__reactEvents$"+li,py="__reactListeners$"+li,fy="__reactHandles$"+li;function dr(e){var t=e[fn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Cn]||n[fn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ud(e);e!==null;){if(n=e[fn])return n;e=ud(e)}return t}e=n,n=e.parentNode}return null}function co(e){return e=e[fn]||e[Cn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Or(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(X(33))}function Ha(e){return e[Ji]||null}var Cl=[],Mr=-1;function tr(e){return{current:e}}function ze(e){0>Mr||(e.current=Cl[Mr],Cl[Mr]=null,Mr--)}function De(e,t){Mr++,Cl[Mr]=e.current,e.current=t}var Jn={},ht=tr(Jn),jt=tr(!1),mr=Jn;function ei(e,t){var n=e.type.contextTypes;if(!n)return Jn;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in n)i[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ct(e){return e=e.childContextTypes,e!=null}function Sa(){ze(jt),ze(ht)}function cd(e,t,n){if(ht.current!==Jn)throw Error(X(168));De(ht,t),De(jt,n)}function cf(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(X(108,Yg(e)||"Unknown",i));return Ve({},n,r)}function ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Jn,mr=ht.current,De(ht,e),De(jt,jt.current),!0}function dd(e,t,n){var r=e.stateNode;if(!r)throw Error(X(169));n?(e=cf(e,t,mr),r.__reactInternalMemoizedMergedChildContext=e,ze(jt),ze(ht),De(ht,e)):ze(jt),De(jt,n)}var wn=null,qa=!1,Fs=!1;function df(e){wn===null?wn=[e]:wn.push(e)}function hy(e){qa=!0,df(e)}function nr(){if(!Fs&&wn!==null){Fs=!0;var e=0,t=Ce;try{var n=wn;for(Ce=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}wn=null,qa=!1}catch(i){throw wn!==null&&(wn=wn.slice(e+1)),_p(lu,nr),i}finally{Ce=t,Fs=!1}}return null}var Br=[],Ur=0,Ta=null,ja=0,Mt=[],Bt=0,yr=null,En=1,Sn="";function ur(e,t){Br[Ur++]=ja,Br[Ur++]=Ta,Ta=e,ja=t}function pf(e,t,n){Mt[Bt++]=En,Mt[Bt++]=Sn,Mt[Bt++]=yr,yr=e;var r=En;e=Sn;var i=32-rn(r)-1;r&=~(1<<i),n+=1;var a=32-rn(t)+i;if(30<a){var l=i-i%5;a=(r&(1<<l)-1).toString(32),r>>=l,i-=l,En=1<<32-rn(t)+i|n<<i|r,Sn=a+e}else En=1<<a|n<<i|r,Sn=e}function yu(e){e.return!==null&&(ur(e,1),pf(e,1,0))}function xu(e){for(;e===Ta;)Ta=Br[--Ur],Br[Ur]=null,ja=Br[--Ur],Br[Ur]=null;for(;e===yr;)yr=Mt[--Bt],Mt[Bt]=null,Sn=Mt[--Bt],Mt[Bt]=null,En=Mt[--Bt],Mt[Bt]=null}var Dt=null,Lt=null,Me=!1,tn=null;function ff(e,t){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function pd(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dt=e,Lt=Xn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dt=e,Lt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=yr!==null?{id:En,overflow:Sn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dt=e,Lt=null,!0):!1;default:return!1}}function Nl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function Il(e){if(Me){var t=Lt;if(t){var n=t;if(!pd(e,t)){if(Nl(e))throw Error(X(418));t=Xn(n.nextSibling);var r=Dt;t&&pd(e,t)?ff(r,n):(e.flags=e.flags&-4097|2,Me=!1,Dt=e)}}else{if(Nl(e))throw Error(X(418));e.flags=e.flags&-4097|2,Me=!1,Dt=e}}}function fd(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dt=e}function Wo(e){if(e!==Dt)return!1;if(!Me)return fd(e),Me=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!kl(e.type,e.memoizedProps)),t&&(t=Lt)){if(Nl(e))throw hf(),Error(X(418));for(;t;)ff(e,t),t=Xn(t.nextSibling)}if(fd(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(X(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Lt=Xn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Lt=null}}else Lt=Dt?Xn(e.stateNode.nextSibling):null;return!0}function hf(){for(var e=Lt;e;)e=Xn(e.nextSibling)}function ti(){Lt=Dt=null,Me=!1}function vu(e){tn===null?tn=[e]:tn.push(e)}var gy=An.ReactCurrentBatchConfig;function Ti(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(X(309));var r=n.stateNode}if(!r)throw Error(X(147,e));var i=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(l){var d=i.refs;l===null?delete d[a]:d[a]=l},t._stringRef=a,t)}if(typeof e!="string")throw Error(X(284));if(!n._owner)throw Error(X(290,e))}return e}function Vo(e,t){throw e=Object.prototype.toString.call(t),Error(X(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function hd(e){var t=e._init;return t(e._payload)}function gf(e){function t(b,y){if(e){var w=b.deletions;w===null?(b.deletions=[y],b.flags|=16):w.push(y)}}function n(b,y){if(!e)return null;for(;y!==null;)t(b,y),y=y.sibling;return null}function r(b,y){for(b=new Map;y!==null;)y.key!==null?b.set(y.key,y):b.set(y.index,y),y=y.sibling;return b}function i(b,y){return b=Yn(b,y),b.index=0,b.sibling=null,b}function a(b,y,w){return b.index=w,e?(w=b.alternate,w!==null?(w=w.index,w<y?(b.flags|=2,y):w):(b.flags|=2,y)):(b.flags|=1048576,y)}function l(b){return e&&b.alternate===null&&(b.flags|=2),b}function d(b,y,w,R){return y===null||y.tag!==6?(y=Vs(w,b.mode,R),y.return=b,y):(y=i(y,w),y.return=b,y)}function p(b,y,w,R){var N=w.type;return N===Pr?m(b,y,w.props.children,R,w.key):y!==null&&(y.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===On&&hd(N)===y.type)?(R=i(y,w.props),R.ref=Ti(b,y,w),R.return=b,R):(R=ua(w.type,w.key,w.props,null,b.mode,R),R.ref=Ti(b,y,w),R.return=b,R)}function u(b,y,w,R){return y===null||y.tag!==4||y.stateNode.containerInfo!==w.containerInfo||y.stateNode.implementation!==w.implementation?(y=Hs(w,b.mode,R),y.return=b,y):(y=i(y,w.children||[]),y.return=b,y)}function m(b,y,w,R,N){return y===null||y.tag!==7?(y=gr(w,b.mode,R,N),y.return=b,y):(y=i(y,w),y.return=b,y)}function g(b,y,w){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Vs(""+y,b.mode,w),y.return=b,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Do:return w=ua(y.type,y.key,y.props,null,b.mode,w),w.ref=Ti(b,null,y),w.return=b,w;case Dr:return y=Hs(y,b.mode,w),y.return=b,y;case On:var R=y._init;return g(b,R(y._payload),w)}if(Ri(y)||bi(y))return y=gr(y,b.mode,w,null),y.return=b,y;Vo(b,y)}return null}function v(b,y,w,R){var N=y!==null?y.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return N!==null?null:d(b,y,""+w,R);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Do:return w.key===N?p(b,y,w,R):null;case Dr:return w.key===N?u(b,y,w,R):null;case On:return N=w._init,v(b,y,N(w._payload),R)}if(Ri(w)||bi(w))return N!==null?null:m(b,y,w,R,null);Vo(b,w)}return null}function E(b,y,w,R,N){if(typeof R=="string"&&R!==""||typeof R=="number")return b=b.get(w)||null,d(y,b,""+R,N);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case Do:return b=b.get(R.key===null?w:R.key)||null,p(y,b,R,N);case Dr:return b=b.get(R.key===null?w:R.key)||null,u(y,b,R,N);case On:var L=R._init;return E(b,y,w,L(R._payload),N)}if(Ri(R)||bi(R))return b=b.get(w)||null,m(y,b,R,N,null);Vo(y,R)}return null}function h(b,y,w,R){for(var N=null,L=null,A=y,F=y=0,B=null;A!==null&&F<w.length;F++){A.index>F?(B=A,A=null):B=A.sibling;var j=v(b,A,w[F],R);if(j===null){A===null&&(A=B);break}e&&A&&j.alternate===null&&t(b,A),y=a(j,y,F),L===null?N=j:L.sibling=j,L=j,A=B}if(F===w.length)return n(b,A),Me&&ur(b,F),N;if(A===null){for(;F<w.length;F++)A=g(b,w[F],R),A!==null&&(y=a(A,y,F),L===null?N=A:L.sibling=A,L=A);return Me&&ur(b,F),N}for(A=r(b,A);F<w.length;F++)B=E(A,b,F,w[F],R),B!==null&&(e&&B.alternate!==null&&A.delete(B.key===null?F:B.key),y=a(B,y,F),L===null?N=B:L.sibling=B,L=B);return e&&A.forEach(function(C){return t(b,C)}),Me&&ur(b,F),N}function S(b,y,w,R){var N=bi(w);if(typeof N!="function")throw Error(X(150));if(w=N.call(w),w==null)throw Error(X(151));for(var L=N=null,A=y,F=y=0,B=null,j=w.next();A!==null&&!j.done;F++,j=w.next()){A.index>F?(B=A,A=null):B=A.sibling;var C=v(b,A,j.value,R);if(C===null){A===null&&(A=B);break}e&&A&&C.alternate===null&&t(b,A),y=a(C,y,F),L===null?N=C:L.sibling=C,L=C,A=B}if(j.done)return n(b,A),Me&&ur(b,F),N;if(A===null){for(;!j.done;F++,j=w.next())j=g(b,j.value,R),j!==null&&(y=a(j,y,F),L===null?N=j:L.sibling=j,L=j);return Me&&ur(b,F),N}for(A=r(b,A);!j.done;F++,j=w.next())j=E(A,b,F,j.value,R),j!==null&&(e&&j.alternate!==null&&A.delete(j.key===null?F:j.key),y=a(j,y,F),L===null?N=j:L.sibling=j,L=j);return e&&A.forEach(function(z){return t(b,z)}),Me&&ur(b,F),N}function T(b,y,w,R){if(typeof w=="object"&&w!==null&&w.type===Pr&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Do:e:{for(var N=w.key,L=y;L!==null;){if(L.key===N){if(N=w.type,N===Pr){if(L.tag===7){n(b,L.sibling),y=i(L,w.props.children),y.return=b,b=y;break e}}else if(L.elementType===N||typeof N=="object"&&N!==null&&N.$$typeof===On&&hd(N)===L.type){n(b,L.sibling),y=i(L,w.props),y.ref=Ti(b,L,w),y.return=b,b=y;break e}n(b,L);break}else t(b,L);L=L.sibling}w.type===Pr?(y=gr(w.props.children,b.mode,R,w.key),y.return=b,b=y):(R=ua(w.type,w.key,w.props,null,b.mode,R),R.ref=Ti(b,y,w),R.return=b,b=R)}return l(b);case Dr:e:{for(L=w.key;y!==null;){if(y.key===L)if(y.tag===4&&y.stateNode.containerInfo===w.containerInfo&&y.stateNode.implementation===w.implementation){n(b,y.sibling),y=i(y,w.children||[]),y.return=b,b=y;break e}else{n(b,y);break}else t(b,y);y=y.sibling}y=Hs(w,b.mode,R),y.return=b,b=y}return l(b);case On:return L=w._init,T(b,y,L(w._payload),R)}if(Ri(w))return h(b,y,w,R);if(bi(w))return S(b,y,w,R);Vo(b,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,y!==null&&y.tag===6?(n(b,y.sibling),y=i(y,w),y.return=b,b=y):(n(b,y),y=Vs(w,b.mode,R),y.return=b,b=y),l(b)):n(b,y)}return T}var ni=gf(!0),mf=gf(!1),Ca=tr(null),Na=null,$r=null,bu=null;function wu(){bu=$r=Na=null}function Eu(e){var t=Ca.current;ze(Ca),e._currentValue=t}function Rl(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Gr(e,t){Na=e,bu=$r=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Tt=!0),e.firstContext=null)}function Wt(e){var t=e._currentValue;if(bu!==e)if(e={context:e,memoizedValue:t,next:null},$r===null){if(Na===null)throw Error(X(308));$r=e,Na.dependencies={lanes:0,firstContext:e}}else $r=$r.next=e;return t}var pr=null;function Su(e){pr===null?pr=[e]:pr.push(e)}function yf(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Su(t)):(n.next=i.next,i.next=n),t.interleaved=n,Nn(e,r)}function Nn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Mn=!1;function ku(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function xf(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function kn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Kn(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Ee&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Nn(e,n)}return i=r.interleaved,i===null?(t.next=t,Su(r)):(t.next=i.next,i.next=t),r.interleaved=t,Nn(e,n)}function ra(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uu(e,n)}}function gd(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var l={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?i=a=l:a=a.next=l,n=n.next}while(n!==null);a===null?i=a=t:a=a.next=t}else i=a=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Ia(e,t,n,r){var i=e.updateQueue;Mn=!1;var a=i.firstBaseUpdate,l=i.lastBaseUpdate,d=i.shared.pending;if(d!==null){i.shared.pending=null;var p=d,u=p.next;p.next=null,l===null?a=u:l.next=u,l=p;var m=e.alternate;m!==null&&(m=m.updateQueue,d=m.lastBaseUpdate,d!==l&&(d===null?m.firstBaseUpdate=u:d.next=u,m.lastBaseUpdate=p))}if(a!==null){var g=i.baseState;l=0,m=u=p=null,d=a;do{var v=d.lane,E=d.eventTime;if((r&v)===v){m!==null&&(m=m.next={eventTime:E,lane:0,tag:d.tag,payload:d.payload,callback:d.callback,next:null});e:{var h=e,S=d;switch(v=t,E=n,S.tag){case 1:if(h=S.payload,typeof h=="function"){g=h.call(E,g,v);break e}g=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=S.payload,v=typeof h=="function"?h.call(E,g,v):h,v==null)break e;g=Ve({},g,v);break e;case 2:Mn=!0}}d.callback!==null&&d.lane!==0&&(e.flags|=64,v=i.effects,v===null?i.effects=[d]:v.push(d))}else E={eventTime:E,lane:v,tag:d.tag,payload:d.payload,callback:d.callback,next:null},m===null?(u=m=E,p=g):m=m.next=E,l|=v;if(d=d.next,d===null){if(d=i.shared.pending,d===null)break;v=d,d=v.next,v.next=null,i.lastBaseUpdate=v,i.shared.pending=null}}while(!0);if(m===null&&(p=g),i.baseState=p,i.firstBaseUpdate=u,i.lastBaseUpdate=m,t=i.shared.interleaved,t!==null){i=t;do l|=i.lane,i=i.next;while(i!==t)}else a===null&&(i.shared.lanes=0);vr|=l,e.lanes=l,e.memoizedState=g}}function md(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(X(191,i));i.call(r)}}}var po={},gn=tr(po),eo=tr(po),to=tr(po);function fr(e){if(e===po)throw Error(X(174));return e}function Tu(e,t){switch(De(to,t),De(eo,e),De(gn,po),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:cl(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=cl(t,e)}ze(gn),De(gn,t)}function ri(){ze(gn),ze(eo),ze(to)}function vf(e){fr(to.current);var t=fr(gn.current),n=cl(t,e.type);t!==n&&(De(eo,e),De(gn,n))}function ju(e){eo.current===e&&(ze(gn),ze(eo))}var $e=tr(0);function Ra(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Os=[];function Cu(){for(var e=0;e<Os.length;e++)Os[e]._workInProgressVersionPrimary=null;Os.length=0}var ia=An.ReactCurrentDispatcher,Ms=An.ReactCurrentBatchConfig,xr=0,We=null,Ye=null,et=null,Aa=!1,Oi=!1,no=0,my=0;function ct(){throw Error(X(321))}function Nu(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!an(e[n],t[n]))return!1;return!0}function Iu(e,t,n,r,i,a){if(xr=a,We=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ia.current=e===null||e.memoizedState===null?by:wy,e=n(r,i),Oi){a=0;do{if(Oi=!1,no=0,25<=a)throw Error(X(301));a+=1,et=Ye=null,t.updateQueue=null,ia.current=Ey,e=n(r,i)}while(Oi)}if(ia.current=La,t=Ye!==null&&Ye.next!==null,xr=0,et=Ye=We=null,Aa=!1,t)throw Error(X(300));return e}function Ru(){var e=no!==0;return no=0,e}function pn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return et===null?We.memoizedState=et=e:et=et.next=e,et}function Vt(){if(Ye===null){var e=We.alternate;e=e!==null?e.memoizedState:null}else e=Ye.next;var t=et===null?We.memoizedState:et.next;if(t!==null)et=t,Ye=e;else{if(e===null)throw Error(X(310));Ye=e,e={memoizedState:Ye.memoizedState,baseState:Ye.baseState,baseQueue:Ye.baseQueue,queue:Ye.queue,next:null},et===null?We.memoizedState=et=e:et=et.next=e}return et}function ro(e,t){return typeof t=="function"?t(e):t}function Bs(e){var t=Vt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=Ye,i=r.baseQueue,a=n.pending;if(a!==null){if(i!==null){var l=i.next;i.next=a.next,a.next=l}r.baseQueue=i=a,n.pending=null}if(i!==null){a=i.next,r=r.baseState;var d=l=null,p=null,u=a;do{var m=u.lane;if((xr&m)===m)p!==null&&(p=p.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var g={lane:m,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};p===null?(d=p=g,l=r):p=p.next=g,We.lanes|=m,vr|=m}u=u.next}while(u!==null&&u!==a);p===null?l=r:p.next=d,an(r,t.memoizedState)||(Tt=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=p,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do a=i.lane,We.lanes|=a,vr|=a,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Us(e){var t=Vt(),n=t.queue;if(n===null)throw Error(X(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(i!==null){n.pending=null;var l=i=i.next;do a=e(a,l.action),l=l.next;while(l!==i);an(a,t.memoizedState)||(Tt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function bf(){}function wf(e,t){var n=We,r=Vt(),i=t(),a=!an(r.memoizedState,i);if(a&&(r.memoizedState=i,Tt=!0),r=r.queue,Au(kf.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||et!==null&&et.memoizedState.tag&1){if(n.flags|=2048,io(9,Sf.bind(null,n,r,i,t),void 0,null),tt===null)throw Error(X(349));xr&30||Ef(n,t,i)}return i}function Ef(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Sf(e,t,n,r){t.value=n,t.getSnapshot=r,Tf(t)&&jf(e)}function kf(e,t,n){return n(function(){Tf(t)&&jf(e)})}function Tf(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!an(e,n)}catch{return!0}}function jf(e){var t=Nn(e,1);t!==null&&on(t,e,1,-1)}function yd(e){var t=pn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ro,lastRenderedState:e},t.queue=e,e=e.dispatch=vy.bind(null,We,e),[t.memoizedState,e]}function io(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=We.updateQueue,t===null?(t={lastEffect:null,stores:null},We.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cf(){return Vt().memoizedState}function oa(e,t,n,r){var i=pn();We.flags|=e,i.memoizedState=io(1|t,n,void 0,r===void 0?null:r)}function Xa(e,t,n,r){var i=Vt();r=r===void 0?null:r;var a=void 0;if(Ye!==null){var l=Ye.memoizedState;if(a=l.destroy,r!==null&&Nu(r,l.deps)){i.memoizedState=io(t,n,a,r);return}}We.flags|=e,i.memoizedState=io(1|t,n,a,r)}function xd(e,t){return oa(8390656,8,e,t)}function Au(e,t){return Xa(2048,8,e,t)}function Nf(e,t){return Xa(4,2,e,t)}function If(e,t){return Xa(4,4,e,t)}function Rf(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Af(e,t,n){return n=n!=null?n.concat([e]):null,Xa(4,4,Rf.bind(null,t,e),n)}function Lu(){}function Lf(e,t){var n=Vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nu(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Df(e,t){var n=Vt();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&Nu(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Pf(e,t,n){return xr&21?(an(n,t)||(n=Op(),We.lanes|=n,vr|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Tt=!0),e.memoizedState=n)}function yy(e,t){var n=Ce;Ce=n!==0&&4>n?n:4,e(!0);var r=Ms.transition;Ms.transition={};try{e(!1),t()}finally{Ce=n,Ms.transition=r}}function _f(){return Vt().memoizedState}function xy(e,t,n){var r=Qn(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},zf(e))Ff(t,n);else if(n=yf(e,t,n,r),n!==null){var i=xt();on(n,e,r,i),Of(n,t,r)}}function vy(e,t,n){var r=Qn(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(zf(e))Ff(t,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var l=t.lastRenderedState,d=a(l,n);if(i.hasEagerState=!0,i.eagerState=d,an(d,l)){var p=t.interleaved;p===null?(i.next=i,Su(t)):(i.next=p.next,p.next=i),t.interleaved=i;return}}catch{}finally{}n=yf(e,t,i,r),n!==null&&(i=xt(),on(n,e,r,i),Of(n,t,r))}}function zf(e){var t=e.alternate;return e===We||t!==null&&t===We}function Ff(e,t){Oi=Aa=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Of(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,uu(e,n)}}var La={readContext:Wt,useCallback:ct,useContext:ct,useEffect:ct,useImperativeHandle:ct,useInsertionEffect:ct,useLayoutEffect:ct,useMemo:ct,useReducer:ct,useRef:ct,useState:ct,useDebugValue:ct,useDeferredValue:ct,useTransition:ct,useMutableSource:ct,useSyncExternalStore:ct,useId:ct,unstable_isNewReconciler:!1},by={readContext:Wt,useCallback:function(e,t){return pn().memoizedState=[e,t===void 0?null:t],e},useContext:Wt,useEffect:xd,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,oa(4194308,4,Rf.bind(null,t,e),n)},useLayoutEffect:function(e,t){return oa(4194308,4,e,t)},useInsertionEffect:function(e,t){return oa(4,2,e,t)},useMemo:function(e,t){var n=pn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=pn();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=xy.bind(null,We,e),[r.memoizedState,e]},useRef:function(e){var t=pn();return e={current:e},t.memoizedState=e},useState:yd,useDebugValue:Lu,useDeferredValue:function(e){return pn().memoizedState=e},useTransition:function(){var e=yd(!1),t=e[0];return e=yy.bind(null,e[1]),pn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=We,i=pn();if(Me){if(n===void 0)throw Error(X(407));n=n()}else{if(n=t(),tt===null)throw Error(X(349));xr&30||Ef(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,xd(kf.bind(null,r,a,e),[e]),r.flags|=2048,io(9,Sf.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=pn(),t=tt.identifierPrefix;if(Me){var n=Sn,r=En;n=(r&~(1<<32-rn(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=no++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=my++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},wy={readContext:Wt,useCallback:Lf,useContext:Wt,useEffect:Au,useImperativeHandle:Af,useInsertionEffect:Nf,useLayoutEffect:If,useMemo:Df,useReducer:Bs,useRef:Cf,useState:function(){return Bs(ro)},useDebugValue:Lu,useDeferredValue:function(e){var t=Vt();return Pf(t,Ye.memoizedState,e)},useTransition:function(){var e=Bs(ro)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:bf,useSyncExternalStore:wf,useId:_f,unstable_isNewReconciler:!1},Ey={readContext:Wt,useCallback:Lf,useContext:Wt,useEffect:Au,useImperativeHandle:Af,useInsertionEffect:Nf,useLayoutEffect:If,useMemo:Df,useReducer:Us,useRef:Cf,useState:function(){return Us(ro)},useDebugValue:Lu,useDeferredValue:function(e){var t=Vt();return Ye===null?t.memoizedState=e:Pf(t,Ye.memoizedState,e)},useTransition:function(){var e=Us(ro)[0],t=Vt().memoizedState;return[e,t]},useMutableSource:bf,useSyncExternalStore:wf,useId:_f,unstable_isNewReconciler:!1};function Jt(e,t){if(e&&e.defaultProps){t=Ve({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function Al(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Ve({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var Ka={isMounted:function(e){return(e=e._reactInternals)?Er(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=xt(),i=Qn(e),a=kn(r,i);a.payload=t,n!=null&&(a.callback=n),t=Kn(e,a,i),t!==null&&(on(t,e,i,r),ra(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=xt(),i=Qn(e),a=kn(r,i);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Kn(e,a,i),t!==null&&(on(t,e,i,r),ra(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=xt(),r=Qn(e),i=kn(n,r);i.tag=2,t!=null&&(i.callback=t),t=Kn(e,i,r),t!==null&&(on(t,e,r,n),ra(t,e,r))}};function vd(e,t,n,r,i,a,l){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,l):t.prototype&&t.prototype.isPureReactComponent?!Qi(n,r)||!Qi(i,a):!0}function Mf(e,t,n){var r=!1,i=Jn,a=t.contextType;return typeof a=="object"&&a!==null?a=Wt(a):(i=Ct(t)?mr:ht.current,r=t.contextTypes,a=(r=r!=null)?ei(e,i):Jn),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Ka,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),t}function bd(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&Ka.enqueueReplaceState(t,t.state,null)}function Ll(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},ku(e);var a=t.contextType;typeof a=="object"&&a!==null?i.context=Wt(a):(a=Ct(t)?mr:ht.current,i.context=ei(e,a)),i.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(Al(e,t,a,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&Ka.enqueueReplaceState(i,i.state,null),Ia(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function ii(e,t){try{var n="",r=t;do n+=Qg(r),r=r.return;while(r);var i=n}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:i,digest:null}}function $s(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function Dl(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Sy=typeof WeakMap=="function"?WeakMap:Map;function Bf(e,t,n){n=kn(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Pa||(Pa=!0,Wl=r),Dl(e,t)},n}function Uf(e,t,n){n=kn(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){Dl(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){Dl(e,t),typeof r!="function"&&(Gn===null?Gn=new Set([this]):Gn.add(this));var l=t.stack;this.componentDidCatch(t.value,{componentStack:l!==null?l:""})}),n}function wd(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Sy;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Fy.bind(null,e,t,n),t.then(e,e))}function Ed(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Sd(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=kn(-1,1),t.tag=2,Kn(n,t,1))),n.lanes|=1),e)}var ky=An.ReactCurrentOwner,Tt=!1;function yt(e,t,n,r){t.child=e===null?mf(t,null,n,r):ni(t,e.child,n,r)}function kd(e,t,n,r,i){n=n.render;var a=t.ref;return Gr(t,i),r=Iu(e,t,n,r,a,i),n=Ru(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,In(e,t,i)):(Me&&n&&yu(t),t.flags|=1,yt(e,t,r,i),t.child)}function Td(e,t,n,r,i){if(e===null){var a=n.type;return typeof a=="function"&&!Bu(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,$f(e,t,a,r,i)):(e=ua(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&i)){var l=a.memoizedProps;if(n=n.compare,n=n!==null?n:Qi,n(l,r)&&e.ref===t.ref)return In(e,t,i)}return t.flags|=1,e=Yn(a,r),e.ref=t.ref,e.return=t,t.child=e}function $f(e,t,n,r,i){if(e!==null){var a=e.memoizedProps;if(Qi(a,r)&&e.ref===t.ref)if(Tt=!1,t.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Tt=!0);else return t.lanes=e.lanes,In(e,t,i)}return Pl(e,t,n,r,i)}function Wf(e,t,n){var r=t.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},De(Vr,At),At|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,De(Vr,At),At|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,De(Vr,At),At|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,De(Vr,At),At|=r;return yt(e,t,i,n),t.child}function Vf(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Pl(e,t,n,r,i){var a=Ct(n)?mr:ht.current;return a=ei(t,a),Gr(t,i),n=Iu(e,t,n,r,a,i),r=Ru(),e!==null&&!Tt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,In(e,t,i)):(Me&&r&&yu(t),t.flags|=1,yt(e,t,n,i),t.child)}function jd(e,t,n,r,i){if(Ct(n)){var a=!0;ka(t)}else a=!1;if(Gr(t,i),t.stateNode===null)aa(e,t),Mf(t,n,r),Ll(t,n,r,i),r=!0;else if(e===null){var l=t.stateNode,d=t.memoizedProps;l.props=d;var p=l.context,u=n.contextType;typeof u=="object"&&u!==null?u=Wt(u):(u=Ct(n)?mr:ht.current,u=ei(t,u));var m=n.getDerivedStateFromProps,g=typeof m=="function"||typeof l.getSnapshotBeforeUpdate=="function";g||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==r||p!==u)&&bd(t,l,r,u),Mn=!1;var v=t.memoizedState;l.state=v,Ia(t,r,l,i),p=t.memoizedState,d!==r||v!==p||jt.current||Mn?(typeof m=="function"&&(Al(t,n,m,r),p=t.memoizedState),(d=Mn||vd(t,n,d,r,v,p,u))?(g||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount()),typeof l.componentDidMount=="function"&&(t.flags|=4194308)):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=p),l.props=r,l.state=p,l.context=u,r=d):(typeof l.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{l=t.stateNode,xf(e,t),d=t.memoizedProps,u=t.type===t.elementType?d:Jt(t.type,d),l.props=u,g=t.pendingProps,v=l.context,p=n.contextType,typeof p=="object"&&p!==null?p=Wt(p):(p=Ct(n)?mr:ht.current,p=ei(t,p));var E=n.getDerivedStateFromProps;(m=typeof E=="function"||typeof l.getSnapshotBeforeUpdate=="function")||typeof l.UNSAFE_componentWillReceiveProps!="function"&&typeof l.componentWillReceiveProps!="function"||(d!==g||v!==p)&&bd(t,l,r,p),Mn=!1,v=t.memoizedState,l.state=v,Ia(t,r,l,i);var h=t.memoizedState;d!==g||v!==h||jt.current||Mn?(typeof E=="function"&&(Al(t,n,E,r),h=t.memoizedState),(u=Mn||vd(t,n,u,r,v,h,p)||!1)?(m||typeof l.UNSAFE_componentWillUpdate!="function"&&typeof l.componentWillUpdate!="function"||(typeof l.componentWillUpdate=="function"&&l.componentWillUpdate(r,h,p),typeof l.UNSAFE_componentWillUpdate=="function"&&l.UNSAFE_componentWillUpdate(r,h,p)),typeof l.componentDidUpdate=="function"&&(t.flags|=4),typeof l.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=h),l.props=r,l.state=h,l.context=p,r=u):(typeof l.componentDidUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=4),typeof l.getSnapshotBeforeUpdate!="function"||d===e.memoizedProps&&v===e.memoizedState||(t.flags|=1024),r=!1)}return _l(e,t,n,r,a,i)}function _l(e,t,n,r,i,a){Vf(e,t);var l=(t.flags&128)!==0;if(!r&&!l)return i&&dd(t,n,!1),In(e,t,a);r=t.stateNode,ky.current=t;var d=l&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&l?(t.child=ni(t,e.child,null,a),t.child=ni(t,null,d,a)):yt(e,t,d,a),t.memoizedState=r.state,i&&dd(t,n,!0),t.child}function Hf(e){var t=e.stateNode;t.pendingContext?cd(e,t.pendingContext,t.pendingContext!==t.context):t.context&&cd(e,t.context,!1),Tu(e,t.containerInfo)}function Cd(e,t,n,r,i){return ti(),vu(i),t.flags|=256,yt(e,t,n,r),t.child}var zl={dehydrated:null,treeContext:null,retryLane:0};function Fl(e){return{baseLanes:e,cachePool:null,transitions:null}}function qf(e,t,n){var r=t.pendingProps,i=$e.current,a=!1,l=(t.flags&128)!==0,d;if((d=l)||(d=e!==null&&e.memoizedState===null?!1:(i&2)!==0),d?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),De($e,i&1),e===null)return Il(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(l=r.children,e=r.fallback,a?(r=t.mode,a=t.child,l={mode:"hidden",children:l},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=l):a=Ya(l,r,0,null),e=gr(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=Fl(n),t.memoizedState=zl,e):Du(t,l));if(i=e.memoizedState,i!==null&&(d=i.dehydrated,d!==null))return Ty(e,t,l,r,d,i,n);if(a){a=r.fallback,l=t.mode,i=e.child,d=i.sibling;var p={mode:"hidden",children:r.children};return!(l&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=p,t.deletions=null):(r=Yn(i,p),r.subtreeFlags=i.subtreeFlags&14680064),d!==null?a=Yn(d,a):(a=gr(a,l,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,l=e.child.memoizedState,l=l===null?Fl(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},a.memoizedState=l,a.childLanes=e.childLanes&~n,t.memoizedState=zl,r}return a=e.child,e=a.sibling,r=Yn(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function Du(e,t){return t=Ya({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Ho(e,t,n,r){return r!==null&&vu(r),ni(t,e.child,null,n),e=Du(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Ty(e,t,n,r,i,a,l){if(n)return t.flags&256?(t.flags&=-257,r=$s(Error(X(422))),Ho(e,t,l,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ya({mode:"visible",children:r.children},i,0,null),a=gr(a,i,l,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&ni(t,e.child,null,l),t.child.memoizedState=Fl(l),t.memoizedState=zl,a);if(!(t.mode&1))return Ho(e,t,l,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var d=r.dgst;return r=d,a=Error(X(419)),r=$s(a,r,void 0),Ho(e,t,l,r)}if(d=(l&e.childLanes)!==0,Tt||d){if(r=tt,r!==null){switch(l&-l){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|l)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Nn(e,i),on(r,e,i,-1))}return Mu(),r=$s(Error(X(421))),Ho(e,t,l,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=Oy.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,Lt=Xn(i.nextSibling),Dt=t,Me=!0,tn=null,e!==null&&(Mt[Bt++]=En,Mt[Bt++]=Sn,Mt[Bt++]=yr,En=e.id,Sn=e.overflow,yr=t),t=Du(t,r.children),t.flags|=4096,t)}function Nd(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),Rl(e.return,t,n)}function Ws(e,t,n,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=i)}function Xf(e,t,n){var r=t.pendingProps,i=r.revealOrder,a=r.tail;if(yt(e,t,r.children,n),r=$e.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Nd(e,n,t);else if(e.tag===19)Nd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(De($e,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&Ra(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Ws(t,!1,i,n,a);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&Ra(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Ws(t,!0,n,null,a);break;case"together":Ws(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function aa(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function In(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),vr|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(X(153));if(t.child!==null){for(e=t.child,n=Yn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Yn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function jy(e,t,n){switch(t.tag){case 3:Hf(t),ti();break;case 5:vf(t);break;case 1:Ct(t.type)&&ka(t);break;case 4:Tu(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;De(Ca,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(De($e,$e.current&1),t.flags|=128,null):n&t.child.childLanes?qf(e,t,n):(De($e,$e.current&1),e=In(e,t,n),e!==null?e.sibling:null);De($e,$e.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Xf(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),De($e,$e.current),r)break;return null;case 22:case 23:return t.lanes=0,Wf(e,t,n)}return In(e,t,n)}var Kf,Ol,Gf,Qf;Kf=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Ol=function(){};Gf=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,fr(gn.current);var a=null;switch(n){case"input":i=al(e,i),r=al(e,r),a=[];break;case"select":i=Ve({},i,{value:void 0}),r=Ve({},r,{value:void 0}),a=[];break;case"textarea":i=ul(e,i),r=ul(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Ea)}dl(n,r);var l;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var d=i[u];for(l in d)d.hasOwnProperty(l)&&(n||(n={}),n[l]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Wi.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var p=r[u];if(d=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&p!==d&&(p!=null||d!=null))if(u==="style")if(d){for(l in d)!d.hasOwnProperty(l)||p&&p.hasOwnProperty(l)||(n||(n={}),n[l]="");for(l in p)p.hasOwnProperty(l)&&d[l]!==p[l]&&(n||(n={}),n[l]=p[l])}else n||(a||(a=[]),a.push(u,n)),n=p;else u==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,d=d?d.__html:void 0,p!=null&&d!==p&&(a=a||[]).push(u,p)):u==="children"?typeof p!="string"&&typeof p!="number"||(a=a||[]).push(u,""+p):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Wi.hasOwnProperty(u)?(p!=null&&u==="onScroll"&&_e("scroll",e),a||d===p||(a=[])):(a=a||[]).push(u,p))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}};Qf=function(e,t,n,r){n!==r&&(t.flags|=4)};function ji(e,t){if(!Me)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function dt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Cy(e,t,n){var r=t.pendingProps;switch(xu(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return dt(t),null;case 1:return Ct(t.type)&&Sa(),dt(t),null;case 3:return r=t.stateNode,ri(),ze(jt),ze(ht),Cu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Wo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,tn!==null&&(ql(tn),tn=null))),Ol(e,t),dt(t),null;case 5:ju(t);var i=fr(to.current);if(n=t.type,e!==null&&t.stateNode!=null)Gf(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(X(166));return dt(t),null}if(e=fr(gn.current),Wo(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[fn]=t,r[Ji]=a,e=(t.mode&1)!==0,n){case"dialog":_e("cancel",r),_e("close",r);break;case"iframe":case"object":case"embed":_e("load",r);break;case"video":case"audio":for(i=0;i<Li.length;i++)_e(Li[i],r);break;case"source":_e("error",r);break;case"img":case"image":case"link":_e("error",r),_e("load",r);break;case"details":_e("toggle",r);break;case"input":Fc(r,a),_e("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},_e("invalid",r);break;case"textarea":Mc(r,a),_e("invalid",r)}dl(n,a),i=null;for(var l in a)if(a.hasOwnProperty(l)){var d=a[l];l==="children"?typeof d=="string"?r.textContent!==d&&(a.suppressHydrationWarning!==!0&&$o(r.textContent,d,e),i=["children",d]):typeof d=="number"&&r.textContent!==""+d&&(a.suppressHydrationWarning!==!0&&$o(r.textContent,d,e),i=["children",""+d]):Wi.hasOwnProperty(l)&&d!=null&&l==="onScroll"&&_e("scroll",r)}switch(n){case"input":Po(r),Oc(r,a,!0);break;case"textarea":Po(r),Bc(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Ea)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{l=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sp(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=l.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),n==="select"&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[fn]=t,e[Ji]=r,Kf(e,t,!1,!1),t.stateNode=e;e:{switch(l=pl(n,r),n){case"dialog":_e("cancel",e),_e("close",e),i=r;break;case"iframe":case"object":case"embed":_e("load",e),i=r;break;case"video":case"audio":for(i=0;i<Li.length;i++)_e(Li[i],e);i=r;break;case"source":_e("error",e),i=r;break;case"img":case"image":case"link":_e("error",e),_e("load",e),i=r;break;case"details":_e("toggle",e),i=r;break;case"input":Fc(e,r),i=al(e,r),_e("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Ve({},r,{value:void 0}),_e("invalid",e);break;case"textarea":Mc(e,r),i=ul(e,r),_e("invalid",e);break;default:i=r}dl(n,i),d=i;for(a in d)if(d.hasOwnProperty(a)){var p=d[a];a==="style"?jp(e,p):a==="dangerouslySetInnerHTML"?(p=p?p.__html:void 0,p!=null&&kp(e,p)):a==="children"?typeof p=="string"?(n!=="textarea"||p!=="")&&Vi(e,p):typeof p=="number"&&Vi(e,""+p):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Wi.hasOwnProperty(a)?p!=null&&a==="onScroll"&&_e("scroll",e):p!=null&&ru(e,a,p,l))}switch(n){case"input":Po(e),Oc(e,r,!1);break;case"textarea":Po(e),Bc(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Zn(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Hr(e,!!r.multiple,a,!1):r.defaultValue!=null&&Hr(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Ea)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return dt(t),null;case 6:if(e&&t.stateNode!=null)Qf(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(X(166));if(n=fr(to.current),fr(gn.current),Wo(t)){if(r=t.stateNode,n=t.memoizedProps,r[fn]=t,(a=r.nodeValue!==n)&&(e=Dt,e!==null))switch(e.tag){case 3:$o(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&$o(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[fn]=t,t.stateNode=r}return dt(t),null;case 13:if(ze($e),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Me&&Lt!==null&&t.mode&1&&!(t.flags&128))hf(),ti(),t.flags|=98560,a=!1;else if(a=Wo(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(X(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(X(317));a[fn]=t}else ti(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;dt(t),a=!1}else tn!==null&&(ql(tn),tn=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$e.current&1?Ze===0&&(Ze=3):Mu())),t.updateQueue!==null&&(t.flags|=4),dt(t),null);case 4:return ri(),Ol(e,t),e===null&&Yi(t.stateNode.containerInfo),dt(t),null;case 10:return Eu(t.type._context),dt(t),null;case 17:return Ct(t.type)&&Sa(),dt(t),null;case 19:if(ze($e),a=t.memoizedState,a===null)return dt(t),null;if(r=(t.flags&128)!==0,l=a.rendering,l===null)if(r)ji(a,!1);else{if(Ze!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(l=Ra(e),l!==null){for(t.flags|=128,ji(a,!1),r=l.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,l=a.alternate,l===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return De($e,$e.current&1|2),t.child}e=e.sibling}a.tail!==null&&Ge()>oi&&(t.flags|=128,r=!0,ji(a,!1),t.lanes=4194304)}else{if(!r)if(e=Ra(l),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),ji(a,!0),a.tail===null&&a.tailMode==="hidden"&&!l.alternate&&!Me)return dt(t),null}else 2*Ge()-a.renderingStartTime>oi&&n!==1073741824&&(t.flags|=128,r=!0,ji(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(n=a.last,n!==null?n.sibling=l:t.child=l,a.last=l)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=Ge(),t.sibling=null,n=$e.current,De($e,r?n&1|2:n&1),t):(dt(t),null);case 22:case 23:return Ou(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?At&1073741824&&(dt(t),t.subtreeFlags&6&&(t.flags|=8192)):dt(t),null;case 24:return null;case 25:return null}throw Error(X(156,t.tag))}function Ny(e,t){switch(xu(t),t.tag){case 1:return Ct(t.type)&&Sa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ri(),ze(jt),ze(ht),Cu(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return ju(t),null;case 13:if(ze($e),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(X(340));ti()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze($e),null;case 4:return ri(),null;case 10:return Eu(t.type._context),null;case 22:case 23:return Ou(),null;case 24:return null;default:return null}}var qo=!1,ft=!1,Iy=typeof WeakSet=="function"?WeakSet:Set,ee=null;function Wr(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){qe(e,t,r)}else n.current=null}function Ml(e,t,n){try{n()}catch(r){qe(e,t,r)}}var Id=!1;function Ry(e,t){if(El=va,e=ef(),mu(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var l=0,d=-1,p=-1,u=0,m=0,g=e,v=null;t:for(;;){for(var E;g!==n||i!==0&&g.nodeType!==3||(d=l+i),g!==a||r!==0&&g.nodeType!==3||(p=l+r),g.nodeType===3&&(l+=g.nodeValue.length),(E=g.firstChild)!==null;)v=g,g=E;for(;;){if(g===e)break t;if(v===n&&++u===i&&(d=l),v===a&&++m===r&&(p=l),(E=g.nextSibling)!==null)break;g=v,v=g.parentNode}g=E}n=d===-1||p===-1?null:{start:d,end:p}}else n=null}n=n||{start:0,end:0}}else n=null;for(Sl={focusedElem:e,selectionRange:n},va=!1,ee=t;ee!==null;)if(t=ee,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ee=e;else for(;ee!==null;){t=ee;try{var h=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(h!==null){var S=h.memoizedProps,T=h.memoizedState,b=t.stateNode,y=b.getSnapshotBeforeUpdate(t.elementType===t.type?S:Jt(t.type,S),T);b.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var w=t.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(X(163))}}catch(R){qe(t,t.return,R)}if(e=t.sibling,e!==null){e.return=t.return,ee=e;break}ee=t.return}return h=Id,Id=!1,h}function Mi(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&Ml(t,n,a)}i=i.next}while(i!==r)}}function Ga(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function Bl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Yf(e){var t=e.alternate;t!==null&&(e.alternate=null,Yf(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[fn],delete t[Ji],delete t[jl],delete t[py],delete t[fy])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Zf(e){return e.tag===5||e.tag===3||e.tag===4}function Rd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Zf(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Ul(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=Ea));else if(r!==4&&(e=e.child,e!==null))for(Ul(e,t,n),e=e.sibling;e!==null;)Ul(e,t,n),e=e.sibling}function $l(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for($l(e,t,n),e=e.sibling;e!==null;)$l(e,t,n),e=e.sibling}var rt=null,en=!1;function Fn(e,t,n){for(n=n.child;n!==null;)Jf(e,t,n),n=n.sibling}function Jf(e,t,n){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Ua,n)}catch{}switch(n.tag){case 5:ft||Wr(n,t);case 6:var r=rt,i=en;rt=null,Fn(e,t,n),rt=r,en=i,rt!==null&&(en?(e=rt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):rt.removeChild(n.stateNode));break;case 18:rt!==null&&(en?(e=rt,n=n.stateNode,e.nodeType===8?zs(e.parentNode,n):e.nodeType===1&&zs(e,n),Ki(e)):zs(rt,n.stateNode));break;case 4:r=rt,i=en,rt=n.stateNode.containerInfo,en=!0,Fn(e,t,n),rt=r,en=i;break;case 0:case 11:case 14:case 15:if(!ft&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,l=a.destroy;a=a.tag,l!==void 0&&(a&2||a&4)&&Ml(n,t,l),i=i.next}while(i!==r)}Fn(e,t,n);break;case 1:if(!ft&&(Wr(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(d){qe(n,t,d)}Fn(e,t,n);break;case 21:Fn(e,t,n);break;case 22:n.mode&1?(ft=(r=ft)||n.memoizedState!==null,Fn(e,t,n),ft=r):Fn(e,t,n);break;default:Fn(e,t,n)}}function Ad(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Iy),t.forEach(function(r){var i=My.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Yt(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,l=t,d=l;e:for(;d!==null;){switch(d.tag){case 5:rt=d.stateNode,en=!1;break e;case 3:rt=d.stateNode.containerInfo,en=!0;break e;case 4:rt=d.stateNode.containerInfo,en=!0;break e}d=d.return}if(rt===null)throw Error(X(160));Jf(a,l,i),rt=null,en=!1;var p=i.alternate;p!==null&&(p.return=null),i.return=null}catch(u){qe(i,t,u)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)eh(t,e),t=t.sibling}function eh(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Yt(t,e),dn(e),r&4){try{Mi(3,e,e.return),Ga(3,e)}catch(S){qe(e,e.return,S)}try{Mi(5,e,e.return)}catch(S){qe(e,e.return,S)}}break;case 1:Yt(t,e),dn(e),r&512&&n!==null&&Wr(n,n.return);break;case 5:if(Yt(t,e),dn(e),r&512&&n!==null&&Wr(n,n.return),e.flags&32){var i=e.stateNode;try{Vi(i,"")}catch(S){qe(e,e.return,S)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,l=n!==null?n.memoizedProps:a,d=e.type,p=e.updateQueue;if(e.updateQueue=null,p!==null)try{d==="input"&&a.type==="radio"&&a.name!=null&&wp(i,a),pl(d,l);var u=pl(d,a);for(l=0;l<p.length;l+=2){var m=p[l],g=p[l+1];m==="style"?jp(i,g):m==="dangerouslySetInnerHTML"?kp(i,g):m==="children"?Vi(i,g):ru(i,m,g,u)}switch(d){case"input":sl(i,a);break;case"textarea":Ep(i,a);break;case"select":var v=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var E=a.value;E!=null?Hr(i,!!a.multiple,E,!1):v!==!!a.multiple&&(a.defaultValue!=null?Hr(i,!!a.multiple,a.defaultValue,!0):Hr(i,!!a.multiple,a.multiple?[]:"",!1))}i[Ji]=a}catch(S){qe(e,e.return,S)}}break;case 6:if(Yt(t,e),dn(e),r&4){if(e.stateNode===null)throw Error(X(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(S){qe(e,e.return,S)}}break;case 3:if(Yt(t,e),dn(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ki(t.containerInfo)}catch(S){qe(e,e.return,S)}break;case 4:Yt(t,e),dn(e);break;case 13:Yt(t,e),dn(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(zu=Ge())),r&4&&Ad(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(ft=(u=ft)||m,Yt(t,e),ft=u):Yt(t,e),dn(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!m&&e.mode&1)for(ee=e,m=e.child;m!==null;){for(g=ee=m;ee!==null;){switch(v=ee,E=v.child,v.tag){case 0:case 11:case 14:case 15:Mi(4,v,v.return);break;case 1:Wr(v,v.return);var h=v.stateNode;if(typeof h.componentWillUnmount=="function"){r=v,n=v.return;try{t=r,h.props=t.memoizedProps,h.state=t.memoizedState,h.componentWillUnmount()}catch(S){qe(r,n,S)}}break;case 5:Wr(v,v.return);break;case 22:if(v.memoizedState!==null){Dd(g);continue}}E!==null?(E.return=v,ee=E):Dd(g)}m=m.sibling}e:for(m=null,g=e;;){if(g.tag===5){if(m===null){m=g;try{i=g.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(d=g.stateNode,p=g.memoizedProps.style,l=p!=null&&p.hasOwnProperty("display")?p.display:null,d.style.display=Tp("display",l))}catch(S){qe(e,e.return,S)}}}else if(g.tag===6){if(m===null)try{g.stateNode.nodeValue=u?"":g.memoizedProps}catch(S){qe(e,e.return,S)}}else if((g.tag!==22&&g.tag!==23||g.memoizedState===null||g===e)&&g.child!==null){g.child.return=g,g=g.child;continue}if(g===e)break e;for(;g.sibling===null;){if(g.return===null||g.return===e)break e;m===g&&(m=null),g=g.return}m===g&&(m=null),g.sibling.return=g.return,g=g.sibling}}break;case 19:Yt(t,e),dn(e),r&4&&Ad(e);break;case 21:break;default:Yt(t,e),dn(e)}}function dn(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Zf(n)){var r=n;break e}n=n.return}throw Error(X(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Vi(i,""),r.flags&=-33);var a=Rd(e);$l(e,a,i);break;case 3:case 4:var l=r.stateNode.containerInfo,d=Rd(e);Ul(e,d,l);break;default:throw Error(X(161))}}catch(p){qe(e,e.return,p)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function Ay(e,t,n){ee=e,th(e)}function th(e,t,n){for(var r=(e.mode&1)!==0;ee!==null;){var i=ee,a=i.child;if(i.tag===22&&r){var l=i.memoizedState!==null||qo;if(!l){var d=i.alternate,p=d!==null&&d.memoizedState!==null||ft;d=qo;var u=ft;if(qo=l,(ft=p)&&!u)for(ee=i;ee!==null;)l=ee,p=l.child,l.tag===22&&l.memoizedState!==null?Pd(i):p!==null?(p.return=l,ee=p):Pd(i);for(;a!==null;)ee=a,th(a),a=a.sibling;ee=i,qo=d,ft=u}Ld(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ee=a):Ld(e)}}function Ld(e){for(;ee!==null;){var t=ee;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ft||Ga(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ft)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:Jt(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&md(t,a,r);break;case 3:var l=t.updateQueue;if(l!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}md(t,l,n)}break;case 5:var d=t.stateNode;if(n===null&&t.flags&4){n=d;var p=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":p.autoFocus&&n.focus();break;case"img":p.src&&(n.src=p.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var u=t.alternate;if(u!==null){var m=u.memoizedState;if(m!==null){var g=m.dehydrated;g!==null&&Ki(g)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(X(163))}ft||t.flags&512&&Bl(t)}catch(v){qe(t,t.return,v)}}if(t===e){ee=null;break}if(n=t.sibling,n!==null){n.return=t.return,ee=n;break}ee=t.return}}function Dd(e){for(;ee!==null;){var t=ee;if(t===e){ee=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ee=n;break}ee=t.return}}function Pd(e){for(;ee!==null;){var t=ee;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ga(4,t)}catch(p){qe(t,n,p)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(p){qe(t,i,p)}}var a=t.return;try{Bl(t)}catch(p){qe(t,a,p)}break;case 5:var l=t.return;try{Bl(t)}catch(p){qe(t,l,p)}}}catch(p){qe(t,t.return,p)}if(t===e){ee=null;break}var d=t.sibling;if(d!==null){d.return=t.return,ee=d;break}ee=t.return}}var Ly=Math.ceil,Da=An.ReactCurrentDispatcher,Pu=An.ReactCurrentOwner,$t=An.ReactCurrentBatchConfig,Ee=0,tt=null,Qe=null,it=0,At=0,Vr=tr(0),Ze=0,oo=null,vr=0,Qa=0,_u=0,Bi=null,kt=null,zu=0,oi=1/0,bn=null,Pa=!1,Wl=null,Gn=null,Xo=!1,Wn=null,_a=0,Ui=0,Vl=null,sa=-1,la=0;function xt(){return Ee&6?Ge():sa!==-1?sa:sa=Ge()}function Qn(e){return e.mode&1?Ee&2&&it!==0?it&-it:gy.transition!==null?(la===0&&(la=Op()),la):(e=Ce,e!==0||(e=window.event,e=e===void 0?16:Hp(e.type)),e):1}function on(e,t,n,r){if(50<Ui)throw Ui=0,Vl=null,Error(X(185));lo(e,n,r),(!(Ee&2)||e!==tt)&&(e===tt&&(!(Ee&2)&&(Qa|=n),Ze===4&&Un(e,it)),Nt(e,r),n===1&&Ee===0&&!(t.mode&1)&&(oi=Ge()+500,qa&&nr()))}function Nt(e,t){var n=e.callbackNode;gm(e,t);var r=xa(e,e===tt?it:0);if(r===0)n!==null&&Wc(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&Wc(n),t===1)e.tag===0?hy(_d.bind(null,e)):df(_d.bind(null,e)),cy(function(){!(Ee&6)&&nr()}),n=null;else{switch(Mp(r)){case 1:n=lu;break;case 4:n=zp;break;case 16:n=ya;break;case 536870912:n=Fp;break;default:n=ya}n=uh(n,nh.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function nh(e,t){if(sa=-1,la=0,Ee&6)throw Error(X(327));var n=e.callbackNode;if(Qr()&&e.callbackNode!==n)return null;var r=xa(e,e===tt?it:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=za(e,r);else{t=r;var i=Ee;Ee|=2;var a=ih();(tt!==e||it!==t)&&(bn=null,oi=Ge()+500,hr(e,t));do try{_y();break}catch(d){rh(e,d)}while(!0);wu(),Da.current=a,Ee=i,Qe!==null?t=0:(tt=null,it=0,t=Ze)}if(t!==0){if(t===2&&(i=yl(e),i!==0&&(r=i,t=Hl(e,i))),t===1)throw n=oo,hr(e,0),Un(e,r),Nt(e,Ge()),n;if(t===6)Un(e,r);else{if(i=e.current.alternate,!(r&30)&&!Dy(i)&&(t=za(e,r),t===2&&(a=yl(e),a!==0&&(r=a,t=Hl(e,a))),t===1))throw n=oo,hr(e,0),Un(e,r),Nt(e,Ge()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(X(345));case 2:cr(e,kt,bn);break;case 3:if(Un(e,r),(r&130023424)===r&&(t=zu+500-Ge(),10<t)){if(xa(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){xt(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=Tl(cr.bind(null,e,kt,bn),t);break}cr(e,kt,bn);break;case 4:if(Un(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var l=31-rn(r);a=1<<l,l=t[l],l>i&&(i=l),r&=~a}if(r=i,r=Ge()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Ly(r/1960))-r,10<r){e.timeoutHandle=Tl(cr.bind(null,e,kt,bn),r);break}cr(e,kt,bn);break;case 5:cr(e,kt,bn);break;default:throw Error(X(329))}}}return Nt(e,Ge()),e.callbackNode===n?nh.bind(null,e):null}function Hl(e,t){var n=Bi;return e.current.memoizedState.isDehydrated&&(hr(e,t).flags|=256),e=za(e,t),e!==2&&(t=kt,kt=n,t!==null&&ql(t)),e}function ql(e){kt===null?kt=e:kt.push.apply(kt,e)}function Dy(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],a=i.getSnapshot;i=i.value;try{if(!an(a(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Un(e,t){for(t&=~_u,t&=~Qa,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-rn(t),r=1<<n;e[n]=-1,t&=~r}}function _d(e){if(Ee&6)throw Error(X(327));Qr();var t=xa(e,0);if(!(t&1))return Nt(e,Ge()),null;var n=za(e,t);if(e.tag!==0&&n===2){var r=yl(e);r!==0&&(t=r,n=Hl(e,r))}if(n===1)throw n=oo,hr(e,0),Un(e,t),Nt(e,Ge()),n;if(n===6)throw Error(X(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,cr(e,kt,bn),Nt(e,Ge()),null}function Fu(e,t){var n=Ee;Ee|=1;try{return e(t)}finally{Ee=n,Ee===0&&(oi=Ge()+500,qa&&nr())}}function br(e){Wn!==null&&Wn.tag===0&&!(Ee&6)&&Qr();var t=Ee;Ee|=1;var n=$t.transition,r=Ce;try{if($t.transition=null,Ce=1,e)return e()}finally{Ce=r,$t.transition=n,Ee=t,!(Ee&6)&&nr()}}function Ou(){At=Vr.current,ze(Vr)}function hr(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,uy(n)),Qe!==null)for(n=Qe.return;n!==null;){var r=n;switch(xu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Sa();break;case 3:ri(),ze(jt),ze(ht),Cu();break;case 5:ju(r);break;case 4:ri();break;case 13:ze($e);break;case 19:ze($e);break;case 10:Eu(r.type._context);break;case 22:case 23:Ou()}n=n.return}if(tt=e,Qe=e=Yn(e.current,null),it=At=t,Ze=0,oo=null,_u=Qa=vr=0,kt=Bi=null,pr!==null){for(t=0;t<pr.length;t++)if(n=pr[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,a=n.pending;if(a!==null){var l=a.next;a.next=i,r.next=l}n.pending=r}pr=null}return e}function rh(e,t){do{var n=Qe;try{if(wu(),ia.current=La,Aa){for(var r=We.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Aa=!1}if(xr=0,et=Ye=We=null,Oi=!1,no=0,Pu.current=null,n===null||n.return===null){Ze=1,oo=t,Qe=null;break}e:{var a=e,l=n.return,d=n,p=t;if(t=it,d.flags|=32768,p!==null&&typeof p=="object"&&typeof p.then=="function"){var u=p,m=d,g=m.tag;if(!(m.mode&1)&&(g===0||g===11||g===15)){var v=m.alternate;v?(m.updateQueue=v.updateQueue,m.memoizedState=v.memoizedState,m.lanes=v.lanes):(m.updateQueue=null,m.memoizedState=null)}var E=Ed(l);if(E!==null){E.flags&=-257,Sd(E,l,d,a,t),E.mode&1&&wd(a,u,t),t=E,p=u;var h=t.updateQueue;if(h===null){var S=new Set;S.add(p),t.updateQueue=S}else h.add(p);break e}else{if(!(t&1)){wd(a,u,t),Mu();break e}p=Error(X(426))}}else if(Me&&d.mode&1){var T=Ed(l);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Sd(T,l,d,a,t),vu(ii(p,d));break e}}a=p=ii(p,d),Ze!==4&&(Ze=2),Bi===null?Bi=[a]:Bi.push(a),a=l;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var b=Bf(a,p,t);gd(a,b);break e;case 1:d=p;var y=a.type,w=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Gn===null||!Gn.has(w)))){a.flags|=65536,t&=-t,a.lanes|=t;var R=Uf(a,d,t);gd(a,R);break e}}a=a.return}while(a!==null)}ah(n)}catch(N){t=N,Qe===n&&n!==null&&(Qe=n=n.return);continue}break}while(!0)}function ih(){var e=Da.current;return Da.current=La,e===null?La:e}function Mu(){(Ze===0||Ze===3||Ze===2)&&(Ze=4),tt===null||!(vr&268435455)&&!(Qa&268435455)||Un(tt,it)}function za(e,t){var n=Ee;Ee|=2;var r=ih();(tt!==e||it!==t)&&(bn=null,hr(e,t));do try{Py();break}catch(i){rh(e,i)}while(!0);if(wu(),Ee=n,Da.current=r,Qe!==null)throw Error(X(261));return tt=null,it=0,Ze}function Py(){for(;Qe!==null;)oh(Qe)}function _y(){for(;Qe!==null&&!am();)oh(Qe)}function oh(e){var t=lh(e.alternate,e,At);e.memoizedProps=e.pendingProps,t===null?ah(e):Qe=t,Pu.current=null}function ah(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Ny(n,t),n!==null){n.flags&=32767,Qe=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ze=6,Qe=null;return}}else if(n=Cy(n,t,At),n!==null){Qe=n;return}if(t=t.sibling,t!==null){Qe=t;return}Qe=t=e}while(t!==null);Ze===0&&(Ze=5)}function cr(e,t,n){var r=Ce,i=$t.transition;try{$t.transition=null,Ce=1,zy(e,t,n,r)}finally{$t.transition=i,Ce=r}return null}function zy(e,t,n,r){do Qr();while(Wn!==null);if(Ee&6)throw Error(X(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(X(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(mm(e,a),e===tt&&(Qe=tt=null,it=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Xo||(Xo=!0,uh(ya,function(){return Qr(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=$t.transition,$t.transition=null;var l=Ce;Ce=1;var d=Ee;Ee|=4,Pu.current=null,Ry(e,n),eh(n,e),ny(Sl),va=!!El,Sl=El=null,e.current=n,Ay(n),sm(),Ee=d,Ce=l,$t.transition=a}else e.current=n;if(Xo&&(Xo=!1,Wn=e,_a=i),a=e.pendingLanes,a===0&&(Gn=null),cm(n.stateNode),Nt(e,Ge()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Pa)throw Pa=!1,e=Wl,Wl=null,e;return _a&1&&e.tag!==0&&Qr(),a=e.pendingLanes,a&1?e===Vl?Ui++:(Ui=0,Vl=e):Ui=0,nr(),null}function Qr(){if(Wn!==null){var e=Mp(_a),t=$t.transition,n=Ce;try{if($t.transition=null,Ce=16>e?16:e,Wn===null)var r=!1;else{if(e=Wn,Wn=null,_a=0,Ee&6)throw Error(X(331));var i=Ee;for(Ee|=4,ee=e.current;ee!==null;){var a=ee,l=a.child;if(ee.flags&16){var d=a.deletions;if(d!==null){for(var p=0;p<d.length;p++){var u=d[p];for(ee=u;ee!==null;){var m=ee;switch(m.tag){case 0:case 11:case 15:Mi(8,m,a)}var g=m.child;if(g!==null)g.return=m,ee=g;else for(;ee!==null;){m=ee;var v=m.sibling,E=m.return;if(Yf(m),m===u){ee=null;break}if(v!==null){v.return=E,ee=v;break}ee=E}}}var h=a.alternate;if(h!==null){var S=h.child;if(S!==null){h.child=null;do{var T=S.sibling;S.sibling=null,S=T}while(S!==null)}}ee=a}}if(a.subtreeFlags&2064&&l!==null)l.return=a,ee=l;else e:for(;ee!==null;){if(a=ee,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Mi(9,a,a.return)}var b=a.sibling;if(b!==null){b.return=a.return,ee=b;break e}ee=a.return}}var y=e.current;for(ee=y;ee!==null;){l=ee;var w=l.child;if(l.subtreeFlags&2064&&w!==null)w.return=l,ee=w;else e:for(l=y;ee!==null;){if(d=ee,d.flags&2048)try{switch(d.tag){case 0:case 11:case 15:Ga(9,d)}}catch(N){qe(d,d.return,N)}if(d===l){ee=null;break e}var R=d.sibling;if(R!==null){R.return=d.return,ee=R;break e}ee=d.return}}if(Ee=i,nr(),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Ua,e)}catch{}r=!0}return r}finally{Ce=n,$t.transition=t}}return!1}function zd(e,t,n){t=ii(n,t),t=Bf(e,t,1),e=Kn(e,t,1),t=xt(),e!==null&&(lo(e,1,t),Nt(e,t))}function qe(e,t,n){if(e.tag===3)zd(e,e,n);else for(;t!==null;){if(t.tag===3){zd(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Gn===null||!Gn.has(r))){e=ii(n,e),e=Uf(t,e,1),t=Kn(t,e,1),e=xt(),t!==null&&(lo(t,1,e),Nt(t,e));break}}t=t.return}}function Fy(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=xt(),e.pingedLanes|=e.suspendedLanes&n,tt===e&&(it&n)===n&&(Ze===4||Ze===3&&(it&130023424)===it&&500>Ge()-zu?hr(e,0):_u|=n),Nt(e,t)}function sh(e,t){t===0&&(e.mode&1?(t=Fo,Fo<<=1,!(Fo&130023424)&&(Fo=4194304)):t=1);var n=xt();e=Nn(e,t),e!==null&&(lo(e,t,n),Nt(e,n))}function Oy(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),sh(e,n)}function My(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(X(314))}r!==null&&r.delete(t),sh(e,n)}var lh;lh=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||jt.current)Tt=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Tt=!1,jy(e,t,n);Tt=!!(e.flags&131072)}else Tt=!1,Me&&t.flags&1048576&&pf(t,ja,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;aa(e,t),e=t.pendingProps;var i=ei(t,ht.current);Gr(t,n),i=Iu(null,t,r,e,i,n);var a=Ru();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ct(r)?(a=!0,ka(t)):a=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,ku(t),i.updater=Ka,t.stateNode=i,i._reactInternals=t,Ll(t,r,e,n),t=_l(null,t,r,!0,a,n)):(t.tag=0,Me&&a&&yu(t),yt(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(aa(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=Uy(r),e=Jt(r,e),i){case 0:t=Pl(null,t,r,e,n);break e;case 1:t=jd(null,t,r,e,n);break e;case 11:t=kd(null,t,r,e,n);break e;case 14:t=Td(null,t,r,Jt(r.type,e),n);break e}throw Error(X(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),Pl(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),jd(e,t,r,i,n);case 3:e:{if(Hf(t),e===null)throw Error(X(387));r=t.pendingProps,a=t.memoizedState,i=a.element,xf(e,t),Ia(t,r,null,n);var l=t.memoizedState;if(r=l.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){i=ii(Error(X(423)),t),t=Cd(e,t,r,n,i);break e}else if(r!==i){i=ii(Error(X(424)),t),t=Cd(e,t,r,n,i);break e}else for(Lt=Xn(t.stateNode.containerInfo.firstChild),Dt=t,Me=!0,tn=null,n=mf(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ti(),r===i){t=In(e,t,n);break e}yt(e,t,r,n)}t=t.child}return t;case 5:return vf(t),e===null&&Il(t),r=t.type,i=t.pendingProps,a=e!==null?e.memoizedProps:null,l=i.children,kl(r,i)?l=null:a!==null&&kl(r,a)&&(t.flags|=32),Vf(e,t),yt(e,t,l,n),t.child;case 6:return e===null&&Il(t),null;case 13:return qf(e,t,n);case 4:return Tu(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=ni(t,null,r,n):yt(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),kd(e,t,r,i,n);case 7:return yt(e,t,t.pendingProps,n),t.child;case 8:return yt(e,t,t.pendingProps.children,n),t.child;case 12:return yt(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,l=i.value,De(Ca,r._currentValue),r._currentValue=l,a!==null)if(an(a.value,l)){if(a.children===i.children&&!jt.current){t=In(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var d=a.dependencies;if(d!==null){l=a.child;for(var p=d.firstContext;p!==null;){if(p.context===r){if(a.tag===1){p=kn(-1,n&-n),p.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var m=u.pending;m===null?p.next=p:(p.next=m.next,m.next=p),u.pending=p}}a.lanes|=n,p=a.alternate,p!==null&&(p.lanes|=n),Rl(a.return,n,t),d.lanes|=n;break}p=p.next}}else if(a.tag===10)l=a.type===t.type?null:a.child;else if(a.tag===18){if(l=a.return,l===null)throw Error(X(341));l.lanes|=n,d=l.alternate,d!==null&&(d.lanes|=n),Rl(l,n,t),l=a.sibling}else l=a.child;if(l!==null)l.return=a;else for(l=a;l!==null;){if(l===t){l=null;break}if(a=l.sibling,a!==null){a.return=l.return,l=a;break}l=l.return}a=l}yt(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Gr(t,n),i=Wt(i),r=r(i),t.flags|=1,yt(e,t,r,n),t.child;case 14:return r=t.type,i=Jt(r,t.pendingProps),i=Jt(r.type,i),Td(e,t,r,i,n);case 15:return $f(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:Jt(r,i),aa(e,t),t.tag=1,Ct(r)?(e=!0,ka(t)):e=!1,Gr(t,n),Mf(t,r,i),Ll(t,r,i,n),_l(null,t,r,!0,e,n);case 19:return Xf(e,t,n);case 22:return Wf(e,t,n)}throw Error(X(156,t.tag))};function uh(e,t){return _p(e,t)}function By(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(e,t,n,r){return new By(e,t,n,r)}function Bu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Uy(e){if(typeof e=="function")return Bu(e)?1:0;if(e!=null){if(e=e.$$typeof,e===ou)return 11;if(e===au)return 14}return 2}function Yn(e,t){var n=e.alternate;return n===null?(n=Ut(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function ua(e,t,n,r,i,a){var l=2;if(r=e,typeof e=="function")Bu(e)&&(l=1);else if(typeof e=="string")l=5;else e:switch(e){case Pr:return gr(n.children,i,a,t);case iu:l=8,i|=8;break;case nl:return e=Ut(12,n,t,i|2),e.elementType=nl,e.lanes=a,e;case rl:return e=Ut(13,n,t,i),e.elementType=rl,e.lanes=a,e;case il:return e=Ut(19,n,t,i),e.elementType=il,e.lanes=a,e;case xp:return Ya(n,i,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case mp:l=10;break e;case yp:l=9;break e;case ou:l=11;break e;case au:l=14;break e;case On:l=16,r=null;break e}throw Error(X(130,e==null?e:typeof e,""))}return t=Ut(l,n,t,i),t.elementType=e,t.type=r,t.lanes=a,t}function gr(e,t,n,r){return e=Ut(7,e,r,t),e.lanes=n,e}function Ya(e,t,n,r){return e=Ut(22,e,r,t),e.elementType=xp,e.lanes=n,e.stateNode={isHidden:!1},e}function Vs(e,t,n){return e=Ut(6,e,null,t),e.lanes=n,e}function Hs(e,t,n){return t=Ut(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function $y(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ts(0),this.expirationTimes=Ts(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ts(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Uu(e,t,n,r,i,a,l,d,p){return e=new $y(e,t,n,d,p),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Ut(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ku(a),e}function Wy(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Dr,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function ch(e){if(!e)return Jn;e=e._reactInternals;e:{if(Er(e)!==e||e.tag!==1)throw Error(X(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ct(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(X(171))}if(e.tag===1){var n=e.type;if(Ct(n))return cf(e,n,t)}return t}function dh(e,t,n,r,i,a,l,d,p){return e=Uu(n,r,!0,e,i,a,l,d,p),e.context=ch(null),n=e.current,r=xt(),i=Qn(n),a=kn(r,i),a.callback=t??null,Kn(n,a,i),e.current.lanes=i,lo(e,i,r),Nt(e,r),e}function Za(e,t,n,r){var i=t.current,a=xt(),l=Qn(i);return n=ch(n),t.context===null?t.context=n:t.pendingContext=n,t=kn(a,l),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Kn(i,t,l),e!==null&&(on(e,i,l,a),ra(e,i,l)),l}function Fa(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Fd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function $u(e,t){Fd(e,t),(e=e.alternate)&&Fd(e,t)}function Vy(){return null}var ph=typeof reportError=="function"?reportError:function(e){console.error(e)};function Wu(e){this._internalRoot=e}Ja.prototype.render=Wu.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(X(409));Za(e,t,null,null)};Ja.prototype.unmount=Wu.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;br(function(){Za(null,e,null,null)}),t[Cn]=null}};function Ja(e){this._internalRoot=e}Ja.prototype.unstable_scheduleHydration=function(e){if(e){var t=$p();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Bn.length&&t!==0&&t<Bn[n].priority;n++);Bn.splice(n,0,e),n===0&&Vp(e)}};function Vu(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function es(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Od(){}function Hy(e,t,n,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Fa(l);a.call(u)}}var l=dh(t,r,e,0,null,!1,!1,"",Od);return e._reactRootContainer=l,e[Cn]=l.current,Yi(e.nodeType===8?e.parentNode:e),br(),l}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var d=r;r=function(){var u=Fa(p);d.call(u)}}var p=Uu(e,0,!1,null,null,!1,!1,"",Od);return e._reactRootContainer=p,e[Cn]=p.current,Yi(e.nodeType===8?e.parentNode:e),br(function(){Za(t,p,n,r)}),p}function ts(e,t,n,r,i){var a=n._reactRootContainer;if(a){var l=a;if(typeof i=="function"){var d=i;i=function(){var p=Fa(l);d.call(p)}}Za(t,l,e,i)}else l=Hy(n,t,e,i,r);return Fa(l)}Bp=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ai(t.pendingLanes);n!==0&&(uu(t,n|1),Nt(t,Ge()),!(Ee&6)&&(oi=Ge()+500,nr()))}break;case 13:br(function(){var r=Nn(e,1);if(r!==null){var i=xt();on(r,e,1,i)}}),$u(e,1)}};cu=function(e){if(e.tag===13){var t=Nn(e,134217728);if(t!==null){var n=xt();on(t,e,134217728,n)}$u(e,134217728)}};Up=function(e){if(e.tag===13){var t=Qn(e),n=Nn(e,t);if(n!==null){var r=xt();on(n,e,t,r)}$u(e,t)}};$p=function(){return Ce};Wp=function(e,t){var n=Ce;try{return Ce=e,t()}finally{Ce=n}};hl=function(e,t,n){switch(t){case"input":if(sl(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=Ha(r);if(!i)throw Error(X(90));bp(r),sl(r,i)}}}break;case"textarea":Ep(e,n);break;case"select":t=n.value,t!=null&&Hr(e,!!n.multiple,t,!1)}};Ip=Fu;Rp=br;var qy={usingClientEntryPoint:!1,Events:[co,Or,Ha,Cp,Np,Fu]},Ci={findFiberByHostInstance:dr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Xy={bundleType:Ci.bundleType,version:Ci.version,rendererPackageName:Ci.rendererPackageName,rendererConfig:Ci.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:An.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Dp(e),e===null?null:e.stateNode},findFiberByHostInstance:Ci.findFiberByHostInstance||Vy,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ko=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ko.isDisabled&&Ko.supportsFiber)try{Ua=Ko.inject(Xy),hn=Ko}catch{}}_t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qy;_t.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vu(t))throw Error(X(200));return Wy(e,t,null,n)};_t.createRoot=function(e,t){if(!Vu(e))throw Error(X(299));var n=!1,r="",i=ph;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=Uu(e,1,!1,null,null,n,!1,r,i),e[Cn]=t.current,Yi(e.nodeType===8?e.parentNode:e),new Wu(t)};_t.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(X(188)):(e=Object.keys(e).join(","),Error(X(268,e)));return e=Dp(t),e=e===null?null:e.stateNode,e};_t.flushSync=function(e){return br(e)};_t.hydrate=function(e,t,n){if(!es(t))throw Error(X(200));return ts(null,e,t,!0,n)};_t.hydrateRoot=function(e,t,n){if(!Vu(e))throw Error(X(405));var r=n!=null&&n.hydratedSources||null,i=!1,a="",l=ph;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(l=n.onRecoverableError)),t=dh(t,null,e,1,n??null,i,!1,a,l),e[Cn]=t.current,Yi(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Ja(t)};_t.render=function(e,t,n){if(!es(t))throw Error(X(200));return ts(null,e,t,!1,n)};_t.unmountComponentAtNode=function(e){if(!es(e))throw Error(X(40));return e._reactRootContainer?(br(function(){ts(null,null,e,!1,function(){e._reactRootContainer=null,e[Cn]=null})}),!0):!1};_t.unstable_batchedUpdates=Fu;_t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!es(n))throw Error(X(200));if(e==null||e._reactInternals===void 0)throw Error(X(38));return ts(e,t,n,!1,r)};_t.version="18.3.1-next-f1338f8080-20240426";function fh(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(fh)}catch(e){console.error(e)}}fh(),pp.exports=_t;var Ky=pp.exports,Md=Ky;el.createRoot=Md.createRoot,el.hydrateRoot=Md.hydrateRoot;/**
 * react-router v7.9.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Bd="popstate";function Gy(e={}){function t(i,a){let{pathname:l="/",search:d="",hash:p=""}=Sr(i.location.hash.substring(1));return!l.startsWith("/")&&!l.startsWith(".")&&(l="/"+l),Xl("",{pathname:l,search:d,hash:p},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(i,a){let l=i.document.querySelector("base"),d="";if(l&&l.getAttribute("href")){let p=i.location.href,u=p.indexOf("#");d=u===-1?p:p.slice(0,u)}return d+"#"+(typeof a=="string"?a:ao(a))}function r(i,a){Ht(i.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(a)})`)}return Yy(t,n,r,e)}function Be(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Ht(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Qy(){return Math.random().toString(36).substring(2,10)}function Ud(e,t){return{usr:e.state,key:e.key,idx:t}}function Xl(e,t,n=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof t=="string"?Sr(t):t,state:n,key:t&&t.key||r||Qy()}}function ao({pathname:e="/",search:t="",hash:n=""}){return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Sr(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substring(n),e=e.substring(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substring(r),e=e.substring(0,r)),e&&(t.pathname=e)}return t}function Yy(e,t,n,r={}){let{window:i=document.defaultView,v5Compat:a=!1}=r,l=i.history,d="POP",p=null,u=m();u==null&&(u=0,l.replaceState({...l.state,idx:u},""));function m(){return(l.state||{idx:null}).idx}function g(){d="POP";let T=m(),b=T==null?null:T-u;u=T,p&&p({action:d,location:S.location,delta:b})}function v(T,b){d="PUSH";let y=Xl(S.location,T,b);n&&n(y,T),u=m()+1;let w=Ud(y,u),R=S.createHref(y);try{l.pushState(w,"",R)}catch(N){if(N instanceof DOMException&&N.name==="DataCloneError")throw N;i.location.assign(R)}a&&p&&p({action:d,location:S.location,delta:1})}function E(T,b){d="REPLACE";let y=Xl(S.location,T,b);n&&n(y,T),u=m();let w=Ud(y,u),R=S.createHref(y);l.replaceState(w,"",R),a&&p&&p({action:d,location:S.location,delta:0})}function h(T){return Zy(T)}let S={get action(){return d},get location(){return e(i,l)},listen(T){if(p)throw new Error("A history only accepts one active listener");return i.addEventListener(Bd,g),p=T,()=>{i.removeEventListener(Bd,g),p=null}},createHref(T){return t(i,T)},createURL:h,encodeLocation(T){let b=h(T);return{pathname:b.pathname,search:b.search,hash:b.hash}},push:v,replace:E,go(T){return l.go(T)}};return S}function Zy(e,t=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),Be(n,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:ao(e);return r=r.replace(/ $/,"%20"),!t&&r.startsWith("//")&&(r=n+r),new URL(r,n)}function hh(e,t,n="/"){return Jy(e,t,n,!1)}function Jy(e,t,n,r){let i=typeof t=="string"?Sr(t):t,a=Rn(i.pathname||"/",n);if(a==null)return null;let l=gh(e);ex(l);let d=null;for(let p=0;d==null&&p<l.length;++p){let u=dx(a);d=ux(l[p],u,r)}return d}function gh(e,t=[],n=[],r="",i=!1){let a=(l,d,p=i,u)=>{let m={relativePath:u===void 0?l.path||"":u,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(r)&&p)return;Be(m.relativePath.startsWith(r),`Absolute route path "${m.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(r.length)}let g=Tn([r,m.relativePath]),v=n.concat(m);l.children&&l.children.length>0&&(Be(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${g}".`),gh(l.children,t,v,g,p)),!(l.path==null&&!l.index)&&t.push({path:g,score:sx(g,l.index),routesMeta:v})};return e.forEach((l,d)=>{var p;if(l.path===""||!((p=l.path)!=null&&p.includes("?")))a(l,d);else for(let u of mh(l.path))a(l,d,!0,u)}),t}function mh(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return i?[a,""]:[a];let l=mh(r.join("/")),d=[];return d.push(...l.map(p=>p===""?a:[a,p].join("/"))),i&&d.push(...l),d.map(p=>e.startsWith("/")&&p===""?"/":p)}function ex(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:lx(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}var tx=/^:[\w-]+$/,nx=3,rx=2,ix=1,ox=10,ax=-2,$d=e=>e==="*";function sx(e,t){let n=e.split("/"),r=n.length;return n.some($d)&&(r+=ax),t&&(r+=rx),n.filter(i=>!$d(i)).reduce((i,a)=>i+(tx.test(a)?nx:a===""?ix:ox),r)}function lx(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function ux(e,t,n=!1){let{routesMeta:r}=e,i={},a="/",l=[];for(let d=0;d<r.length;++d){let p=r[d],u=d===r.length-1,m=a==="/"?t:t.slice(a.length)||"/",g=Oa({path:p.relativePath,caseSensitive:p.caseSensitive,end:u},m),v=p.route;if(!g&&u&&n&&!r[r.length-1].route.index&&(g=Oa({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},m)),!g)return null;Object.assign(i,g.params),l.push({params:i,pathname:Tn([a,g.pathname]),pathnameBase:gx(Tn([a,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(a=Tn([a,g.pathnameBase]))}return l}function Oa(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=cx(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let a=i[0],l=a.replace(/(.)\/+$/,"$1"),d=i.slice(1);return{params:r.reduce((u,{paramName:m,isOptional:g},v)=>{if(m==="*"){let h=d[v]||"";l=a.slice(0,a.length-h.length).replace(/(.)\/+$/,"$1")}const E=d[v];return g&&!E?u[m]=void 0:u[m]=(E||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:l,pattern:e}}function cx(e,t=!1,n=!0){Ht(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,p)=>(r.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function dx(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Ht(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),e}}function Rn(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function px(e,t="/"){let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Sr(e):e;return{pathname:n?n.startsWith("/")?n:fx(n,t):t,search:mx(r),hash:yx(i)}}function fx(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function qs(e,t,n,r){return`Cannot include a '${e}' character in a manually specified \`to.${t}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function hx(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Hu(e){let t=hx(e);return t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase)}function qu(e,t,n,r=!1){let i;typeof e=="string"?i=Sr(e):(i={...e},Be(!i.pathname||!i.pathname.includes("?"),qs("?","pathname","search",i)),Be(!i.pathname||!i.pathname.includes("#"),qs("#","pathname","hash",i)),Be(!i.search||!i.search.includes("#"),qs("#","search","hash",i)));let a=e===""||i.pathname==="",l=a?"/":i.pathname,d;if(l==null)d=n;else{let g=t.length-1;if(!r&&l.startsWith("..")){let v=l.split("/");for(;v[0]==="..";)v.shift(),g-=1;i.pathname=v.join("/")}d=g>=0?t[g]:"/"}let p=px(i,d),u=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(u||m)&&(p.pathname+="/"),p}var Tn=e=>e.join("/").replace(/\/\/+/g,"/"),gx=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),mx=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,yx=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function xx(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var yh=["POST","PUT","PATCH","DELETE"];new Set(yh);var vx=["GET",...yh];new Set(vx);var ui=k.createContext(null);ui.displayName="DataRouter";var ns=k.createContext(null);ns.displayName="DataRouterState";k.createContext(!1);var xh=k.createContext({isTransitioning:!1});xh.displayName="ViewTransition";var bx=k.createContext(new Map);bx.displayName="Fetchers";var wx=k.createContext(null);wx.displayName="Await";var sn=k.createContext(null);sn.displayName="Navigation";var fo=k.createContext(null);fo.displayName="Location";var mn=k.createContext({outlet:null,matches:[],isDataRoute:!1});mn.displayName="Route";var Xu=k.createContext(null);Xu.displayName="RouteError";function Ex(e,{relative:t}={}){Be(ci(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:r}=k.useContext(sn),{hash:i,pathname:a,search:l}=ho(e,{relative:t}),d=a;return n!=="/"&&(d=a==="/"?n:Tn([n,a])),r.createHref({pathname:d,search:l,hash:i})}function ci(){return k.useContext(fo)!=null}function yn(){return Be(ci(),"useLocation() may be used only in the context of a <Router> component."),k.useContext(fo).location}var vh="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function bh(e){k.useContext(sn).static||k.useLayoutEffect(e)}function rs(){let{isDataRoute:e}=k.useContext(mn);return e?_x():Sx()}function Sx(){Be(ci(),"useNavigate() may be used only in the context of a <Router> component.");let e=k.useContext(ui),{basename:t,navigator:n}=k.useContext(sn),{matches:r}=k.useContext(mn),{pathname:i}=yn(),a=JSON.stringify(Hu(r)),l=k.useRef(!1);return bh(()=>{l.current=!0}),k.useCallback((p,u={})=>{if(Ht(l.current,vh),!l.current)return;if(typeof p=="number"){n.go(p);return}let m=qu(p,JSON.parse(a),i,u.relative==="path");e==null&&t!=="/"&&(m.pathname=m.pathname==="/"?t:Tn([t,m.pathname])),(u.replace?n.replace:n.push)(m,u.state,u)},[t,n,a,i,e])}k.createContext(null);function ho(e,{relative:t}={}){let{matches:n}=k.useContext(mn),{pathname:r}=yn(),i=JSON.stringify(Hu(n));return k.useMemo(()=>qu(e,JSON.parse(i),r,t==="path"),[e,i,r,t])}function kx(e,t){return wh(e,t)}function wh(e,t,n,r,i){var y;Be(ci(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=k.useContext(sn),{matches:l}=k.useContext(mn),d=l[l.length-1],p=d?d.params:{},u=d?d.pathname:"/",m=d?d.pathnameBase:"/",g=d&&d.route;{let w=g&&g.path||"";Eh(u,!g||w.endsWith("*")||w.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${u}" (under <Route path="${w}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${w}"> to <Route path="${w==="/"?"*":`${w}/*`}">.`)}let v=yn(),E;if(t){let w=typeof t=="string"?Sr(t):t;Be(m==="/"||((y=w.pathname)==null?void 0:y.startsWith(m)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${w.pathname}" was given in the \`location\` prop.`),E=w}else E=v;let h=E.pathname||"/",S=h;if(m!=="/"){let w=m.replace(/^\//,"").split("/");S="/"+h.replace(/^\//,"").split("/").slice(w.length).join("/")}let T=hh(e,{pathname:S});Ht(g||T!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),Ht(T==null||T[T.length-1].route.element!==void 0||T[T.length-1].route.Component!==void 0||T[T.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let b=Ix(T&&T.map(w=>Object.assign({},w,{params:Object.assign({},p,w.params),pathname:Tn([m,a.encodeLocation?a.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?m:Tn([m,a.encodeLocation?a.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),l,n,r,i);return t&&b?k.createElement(fo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},b):b}function Tx(){let e=Px(),t=xx(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",i={padding:"0.5rem",backgroundColor:r},a={padding:"2px 4px",backgroundColor:r},l=null;return console.error("Error handled by React Router default ErrorBoundary:",e),l=k.createElement(k.Fragment,null,k.createElement("p",null,"💿 Hey developer 👋"),k.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",k.createElement("code",{style:a},"ErrorBoundary")," or"," ",k.createElement("code",{style:a},"errorElement")," prop on your route.")),k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:i},n):null,l)}var jx=k.createElement(Tx,null),Cx=class extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){this.props.unstable_onError?this.props.unstable_onError(e,t):console.error("React Router caught the following error during render",e)}render(){return this.state.error!==void 0?k.createElement(mn.Provider,{value:this.props.routeContext},k.createElement(Xu.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function Nx({routeContext:e,match:t,children:n}){let r=k.useContext(ui);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),k.createElement(mn.Provider,{value:e},n)}function Ix(e,t=[],n=null,r=null,i=null){if(e==null){if(!n)return null;if(n.errors)e=n.matches;else if(t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let a=e,l=n==null?void 0:n.errors;if(l!=null){let u=a.findIndex(m=>m.route.id&&(l==null?void 0:l[m.route.id])!==void 0);Be(u>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,u+1))}let d=!1,p=-1;if(n)for(let u=0;u<a.length;u++){let m=a[u];if((m.route.HydrateFallback||m.route.hydrateFallbackElement)&&(p=u),m.route.id){let{loaderData:g,errors:v}=n,E=m.route.loader&&!g.hasOwnProperty(m.route.id)&&(!v||v[m.route.id]===void 0);if(m.route.lazy||E){d=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}return a.reduceRight((u,m,g)=>{let v,E=!1,h=null,S=null;n&&(v=l&&m.route.id?l[m.route.id]:void 0,h=m.route.errorElement||jx,d&&(p<0&&g===0?(Eh("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),E=!0,S=null):p===g&&(E=!0,S=m.route.hydrateFallbackElement||null)));let T=t.concat(a.slice(0,g+1)),b=()=>{let y;return v?y=h:E?y=S:m.route.Component?y=k.createElement(m.route.Component,null):m.route.element?y=m.route.element:y=u,k.createElement(Nx,{match:m,routeContext:{outlet:u,matches:T,isDataRoute:n!=null},children:y})};return n&&(m.route.ErrorBoundary||m.route.errorElement||g===0)?k.createElement(Cx,{location:n.location,revalidation:n.revalidation,component:h,error:v,children:b(),routeContext:{outlet:null,matches:T,isDataRoute:!0},unstable_onError:r}):b()},null)}function Ku(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Rx(e){let t=k.useContext(ui);return Be(t,Ku(e)),t}function Ax(e){let t=k.useContext(ns);return Be(t,Ku(e)),t}function Lx(e){let t=k.useContext(mn);return Be(t,Ku(e)),t}function Gu(e){let t=Lx(e),n=t.matches[t.matches.length-1];return Be(n.route.id,`${e} can only be used on routes that contain a unique "id"`),n.route.id}function Dx(){return Gu("useRouteId")}function Px(){var r;let e=k.useContext(Xu),t=Ax("useRouteError"),n=Gu("useRouteError");return e!==void 0?e:(r=t.errors)==null?void 0:r[n]}function _x(){let{router:e}=Rx("useNavigate"),t=Gu("useNavigate"),n=k.useRef(!1);return bh(()=>{n.current=!0}),k.useCallback(async(i,a={})=>{Ht(n.current,vh),n.current&&(typeof i=="number"?e.navigate(i):await e.navigate(i,{fromRouteId:t,...a}))},[e,t])}var Wd={};function Eh(e,t,n){!t&&!Wd[e]&&(Wd[e]=!0,Ht(!1,n))}k.memo(zx);function zx({routes:e,future:t,state:n,unstable_onError:r}){return wh(e,void 0,n,r,t)}function Fx({to:e,replace:t,state:n,relative:r}){Be(ci(),"<Navigate> may be used only in the context of a <Router> component.");let{static:i}=k.useContext(sn);Ht(!i,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=k.useContext(mn),{pathname:l}=yn(),d=rs(),p=qu(e,Hu(a),l,r==="path"),u=JSON.stringify(p);return k.useEffect(()=>{d(JSON.parse(u),{replace:t,state:n,relative:r})},[d,u,r,t,n]),null}function Zt(e){Be(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Ox({basename:e="/",children:t=null,location:n,navigationType:r="POP",navigator:i,static:a=!1}){Be(!ci(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let l=e.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:l,navigator:i,static:a,future:{}}),[l,i,a]);typeof n=="string"&&(n=Sr(n));let{pathname:p="/",search:u="",hash:m="",state:g=null,key:v="default"}=n,E=k.useMemo(()=>{let h=Rn(p,l);return h==null?null:{location:{pathname:h,search:u,hash:m,state:g,key:v},navigationType:r}},[l,p,u,m,g,v,r]);return Ht(E!=null,`<Router basename="${l}"> is not able to match the URL "${p}${u}${m}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:k.createElement(sn.Provider,{value:d},k.createElement(fo.Provider,{children:t,value:E}))}function Mx({children:e,location:t}){return kx(Kl(e),t)}function Kl(e,t=[]){let n=[];return k.Children.forEach(e,(r,i)=>{if(!k.isValidElement(r))return;let a=[...t,i];if(r.type===k.Fragment){n.push.apply(n,Kl(r.props.children,a));return}Be(r.type===Zt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Be(!r.props.index||!r.props.children,"An index route cannot have child routes.");let l={id:r.props.id||a.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(l.children=Kl(r.props.children,a)),n.push(l)}),n}var ca="get",da="application/x-www-form-urlencoded";function is(e){return e!=null&&typeof e.tagName=="string"}function Bx(e){return is(e)&&e.tagName.toLowerCase()==="button"}function Ux(e){return is(e)&&e.tagName.toLowerCase()==="form"}function $x(e){return is(e)&&e.tagName.toLowerCase()==="input"}function Wx(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function Vx(e,t){return e.button===0&&(!t||t==="_self")&&!Wx(e)}var Go=null;function Hx(){if(Go===null)try{new FormData(document.createElement("form"),0),Go=!1}catch{Go=!0}return Go}var qx=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Xs(e){return e!=null&&!qx.has(e)?(Ht(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${da}"`),null):e}function Xx(e,t){let n,r,i,a,l;if(Ux(e)){let d=e.getAttribute("action");r=d?Rn(d,t):null,n=e.getAttribute("method")||ca,i=Xs(e.getAttribute("enctype"))||da,a=new FormData(e)}else if(Bx(e)||$x(e)&&(e.type==="submit"||e.type==="image")){let d=e.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||d.getAttribute("action");if(r=p?Rn(p,t):null,n=e.getAttribute("formmethod")||d.getAttribute("method")||ca,i=Xs(e.getAttribute("formenctype"))||Xs(d.getAttribute("enctype"))||da,a=new FormData(d,e),!Hx()){let{name:u,type:m,value:g}=e;if(m==="image"){let v=u?`${u}.`:"";a.append(`${v}x`,"0"),a.append(`${v}y`,"0")}else u&&a.append(u,g)}}else{if(is(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=ca,r=null,i=da,l=e}return a&&i==="text/plain"&&(l=a,a=void 0),{action:r,method:n.toLowerCase(),encType:i,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Qu(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Kx(e,t,n){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${n}`:t&&Rn(r.pathname,t)==="/"?r.pathname=`${t.replace(/\/$/,"")}/_root.${n}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${n}`,r}async function Gx(e,t){if(e.id in t)return t[e.id];try{let n=await import(e.module);return t[e.id]=n,n}catch(n){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Qx(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function Yx(e,t,n){let r=await Promise.all(e.map(async i=>{let a=t.routes[i.route.id];if(a){let l=await Gx(a,n);return l.links?l.links():[]}return[]}));return t0(r.flat(1).filter(Qx).filter(i=>i.rel==="stylesheet"||i.rel==="preload").map(i=>i.rel==="stylesheet"?{...i,rel:"prefetch",as:"style"}:{...i,rel:"prefetch"}))}function Vd(e,t,n,r,i,a){let l=(p,u)=>n[u]?p.route.id!==n[u].route.id:!0,d=(p,u)=>{var m;return n[u].pathname!==p.pathname||((m=n[u].route.path)==null?void 0:m.endsWith("*"))&&n[u].params["*"]!==p.params["*"]};return a==="assets"?t.filter((p,u)=>l(p,u)||d(p,u)):a==="data"?t.filter((p,u)=>{var g;let m=r.routes[p.route.id];if(!m||!m.hasLoader)return!1;if(l(p,u)||d(p,u))return!0;if(p.route.shouldRevalidate){let v=p.route.shouldRevalidate({currentUrl:new URL(i.pathname+i.search+i.hash,window.origin),currentParams:((g=n[0])==null?void 0:g.params)||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function Zx(e,t,{includeHydrateFallback:n}={}){return Jx(e.map(r=>{let i=t.routes[r.route.id];if(!i)return[];let a=[i.module];return i.clientActionModule&&(a=a.concat(i.clientActionModule)),i.clientLoaderModule&&(a=a.concat(i.clientLoaderModule)),n&&i.hydrateFallbackModule&&(a=a.concat(i.hydrateFallbackModule)),i.imports&&(a=a.concat(i.imports)),a}).flat(1))}function Jx(e){return[...new Set(e)]}function e0(e){let t={},n=Object.keys(e).sort();for(let r of n)t[r]=e[r];return t}function t0(e,t){let n=new Set;return new Set(t),e.reduce((r,i)=>{let a=JSON.stringify(e0(i));return n.has(a)||(n.add(a),r.push({key:a,link:i})),r},[])}function Sh(){let e=k.useContext(ui);return Qu(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function n0(){let e=k.useContext(ns);return Qu(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var Yu=k.createContext(void 0);Yu.displayName="FrameworkContext";function kh(){let e=k.useContext(Yu);return Qu(e,"You must render this element inside a <HydratedRouter> element"),e}function r0(e,t){let n=k.useContext(Yu),[r,i]=k.useState(!1),[a,l]=k.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:u,onMouseLeave:m,onTouchStart:g}=t,v=k.useRef(null);k.useEffect(()=>{if(e==="render"&&l(!0),e==="viewport"){let S=b=>{b.forEach(y=>{l(y.isIntersecting)})},T=new IntersectionObserver(S,{threshold:.5});return v.current&&T.observe(v.current),()=>{T.disconnect()}}},[e]),k.useEffect(()=>{if(r){let S=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(S)}}},[r]);let E=()=>{i(!0)},h=()=>{i(!1),l(!1)};return n?e!=="intent"?[a,v,{}]:[a,v,{onFocus:Ni(d,E),onBlur:Ni(p,h),onMouseEnter:Ni(u,E),onMouseLeave:Ni(m,h),onTouchStart:Ni(g,E)}]:[!1,v,{}]}function Ni(e,t){return n=>{e&&e(n),n.defaultPrevented||t(n)}}function i0({page:e,...t}){let{router:n}=Sh(),r=k.useMemo(()=>hh(n.routes,e,n.basename),[n.routes,e,n.basename]);return r?k.createElement(a0,{page:e,matches:r,...t}):null}function o0(e){let{manifest:t,routeModules:n}=kh(),[r,i]=k.useState([]);return k.useEffect(()=>{let a=!1;return Yx(e,t,n).then(l=>{a||i(l)}),()=>{a=!0}},[e,t,n]),r}function a0({page:e,matches:t,...n}){let r=yn(),{manifest:i,routeModules:a}=kh(),{basename:l}=Sh(),{loaderData:d,matches:p}=n0(),u=k.useMemo(()=>Vd(e,t,p,i,r,"data"),[e,t,p,i,r]),m=k.useMemo(()=>Vd(e,t,p,i,r,"assets"),[e,t,p,i,r]),g=k.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let h=new Set,S=!1;if(t.forEach(b=>{var w;let y=i.routes[b.route.id];!y||!y.hasLoader||(!u.some(R=>R.route.id===b.route.id)&&b.route.id in d&&((w=a[b.route.id])!=null&&w.shouldRevalidate)||y.hasClientLoader?S=!0:h.add(b.route.id))}),h.size===0)return[];let T=Kx(e,l,"data");return S&&h.size>0&&T.searchParams.set("_routes",t.filter(b=>h.has(b.route.id)).map(b=>b.route.id).join(",")),[T.pathname+T.search]},[l,d,r,i,u,t,e,a]),v=k.useMemo(()=>Zx(m,i),[m,i]),E=o0(m);return k.createElement(k.Fragment,null,g.map(h=>k.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...n})),v.map(h=>k.createElement("link",{key:h,rel:"modulepreload",href:h,...n})),E.map(({key:h,link:S})=>k.createElement("link",{key:h,nonce:n.nonce,...S})))}function s0(...e){return t=>{e.forEach(n=>{typeof n=="function"?n(t):n!=null&&(n.current=t)})}}var Th=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Th&&(window.__reactRouterVersion="7.9.1")}catch{}function l0({basename:e,children:t,window:n}){let r=k.useRef();r.current==null&&(r.current=Gy({window:n,v5Compat:!0}));let i=r.current,[a,l]=k.useState({action:i.action,location:i.location}),d=k.useCallback(p=>{k.startTransition(()=>l(p))},[l]);return k.useLayoutEffect(()=>i.listen(d),[i,d]),k.createElement(Ox,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:i})}var jh=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ch=k.forwardRef(function({onClick:t,discover:n="render",prefetch:r="none",relative:i,reloadDocument:a,replace:l,state:d,target:p,to:u,preventScrollReset:m,viewTransition:g,...v},E){let{basename:h}=k.useContext(sn),S=typeof u=="string"&&jh.test(u),T,b=!1;if(typeof u=="string"&&S&&(T=u,Th))try{let B=new URL(window.location.href),j=u.startsWith("//")?new URL(B.protocol+u):new URL(u),C=Rn(j.pathname,h);j.origin===B.origin&&C!=null?u=C+j.search+j.hash:b=!0}catch{Ht(!1,`<Link to="${u}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=Ex(u,{relative:i}),[w,R,N]=r0(r,v),L=d0(u,{replace:l,state:d,target:p,preventScrollReset:m,relative:i,viewTransition:g});function A(B){t&&t(B),B.defaultPrevented||L(B)}let F=k.createElement("a",{...v,...N,href:T||y,onClick:b||a?t:A,ref:s0(E,R),target:p,"data-discover":!S&&n==="render"?"true":void 0});return w&&!S?k.createElement(k.Fragment,null,F,k.createElement(i0,{page:y})):F});Ch.displayName="Link";var Zu=k.forwardRef(function({"aria-current":t="page",caseSensitive:n=!1,className:r="",end:i=!1,style:a,to:l,viewTransition:d,children:p,...u},m){let g=ho(l,{relative:u.relative}),v=yn(),E=k.useContext(ns),{navigator:h,basename:S}=k.useContext(sn),T=E!=null&&m0(g)&&d===!0,b=h.encodeLocation?h.encodeLocation(g).pathname:g.pathname,y=v.pathname,w=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;n||(y=y.toLowerCase(),w=w?w.toLowerCase():null,b=b.toLowerCase()),w&&S&&(w=Rn(w,S)||w);const R=b!=="/"&&b.endsWith("/")?b.length-1:b.length;let N=y===b||!i&&y.startsWith(b)&&y.charAt(R)==="/",L=w!=null&&(w===b||!i&&w.startsWith(b)&&w.charAt(b.length)==="/"),A={isActive:N,isPending:L,isTransitioning:T},F=N?t:void 0,B;typeof r=="function"?B=r(A):B=[r,N?"active":null,L?"pending":null,T?"transitioning":null].filter(Boolean).join(" ");let j=typeof a=="function"?a(A):a;return k.createElement(Ch,{...u,"aria-current":F,className:B,ref:m,style:j,to:l,viewTransition:d},typeof p=="function"?p(A):p)});Zu.displayName="NavLink";var u0=k.forwardRef(({discover:e="render",fetcherKey:t,navigate:n,reloadDocument:r,replace:i,state:a,method:l=ca,action:d,onSubmit:p,relative:u,preventScrollReset:m,viewTransition:g,...v},E)=>{let h=h0(),S=g0(d,{relative:u}),T=l.toLowerCase()==="get"?"get":"post",b=typeof d=="string"&&jh.test(d),y=w=>{if(p&&p(w),w.defaultPrevented)return;w.preventDefault();let R=w.nativeEvent.submitter,N=(R==null?void 0:R.getAttribute("formmethod"))||l;h(R||w.currentTarget,{fetcherKey:t,method:N,navigate:n,replace:i,state:a,relative:u,preventScrollReset:m,viewTransition:g})};return k.createElement("form",{ref:E,method:T,action:S,onSubmit:r?p:y,...v,"data-discover":!b&&e==="render"?"true":void 0})});u0.displayName="Form";function c0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Nh(e){let t=k.useContext(ui);return Be(t,c0(e)),t}function d0(e,{target:t,replace:n,state:r,preventScrollReset:i,relative:a,viewTransition:l}={}){let d=rs(),p=yn(),u=ho(e,{relative:a});return k.useCallback(m=>{if(Vx(m,t)){m.preventDefault();let g=n!==void 0?n:ao(p)===ao(u);d(e,{replace:g,state:r,preventScrollReset:i,relative:a,viewTransition:l})}},[p,d,u,n,r,t,e,i,a,l])}var p0=0,f0=()=>`__${String(++p0)}__`;function h0(){let{router:e}=Nh("useSubmit"),{basename:t}=k.useContext(sn),n=Dx();return k.useCallback(async(r,i={})=>{let{action:a,method:l,encType:d,formData:p,body:u}=Xx(r,t);if(i.navigate===!1){let m=i.fetcherKey||f0();await e.fetch(m,n,i.action||a,{preventScrollReset:i.preventScrollReset,formData:p,body:u,formMethod:i.method||l,formEncType:i.encType||d,flushSync:i.flushSync})}else await e.navigate(i.action||a,{preventScrollReset:i.preventScrollReset,formData:p,body:u,formMethod:i.method||l,formEncType:i.encType||d,replace:i.replace,state:i.state,fromRouteId:n,flushSync:i.flushSync,viewTransition:i.viewTransition})},[e,t,n])}function g0(e,{relative:t}={}){let{basename:n}=k.useContext(sn),r=k.useContext(mn);Be(r,"useFormAction must be used inside a RouteContext");let[i]=r.matches.slice(-1),a={...ho(e||".",{relative:t})},l=yn();if(e==null){a.search=l.search;let d=new URLSearchParams(a.search),p=d.getAll("index");if(p.some(m=>m==="")){d.delete("index"),p.filter(g=>g).forEach(g=>d.append("index",g));let m=d.toString();a.search=m?`?${m}`:""}}return(!e||e===".")&&i.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:Tn([n,a.pathname])),ao(a)}function m0(e,{relative:t}={}){let n=k.useContext(xh);Be(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Nh("useViewTransitionState"),i=ho(e,{relative:t});if(!n.isTransitioning)return!1;let a=Rn(n.currentLocation.pathname,r)||n.currentLocation.pathname,l=Rn(n.nextLocation.pathname,r)||n.nextLocation.pathname;return Oa(i.pathname,l)!=null||Oa(i.pathname,a)!=null}var Ih={exports:{}};const y0={},x0=Object.freeze(Object.defineProperty({__proto__:null,default:y0},Symbol.toStringTag,{value:"Module"})),Hd=Eg(x0);(function(e,t){var n=void 0,r=function(i){return n||(n=new Promise(function(a,l){var d=typeof i<"u"?i:{},p=d.onAbort;d.onAbort=function(s){l(new Error(s)),p&&p(s)},d.postRun=d.postRun||[],d.postRun.push(function(){a(d)}),e=void 0;var u;u||(u=typeof d<"u"?d:{});var m=typeof window=="object",g=typeof WorkerGlobalScope<"u",v=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";u.onRuntimeInitialized=function(){function s(P,H){switch(typeof H){case"boolean":xg(P,H?1:0);break;case"number":gg(P,H);break;case"string":mg(P,H,-1,-1);break;case"object":if(H===null)Cc(P);else if(H.length!=null){var ie=Io(H,No);yg(P,ie,H.length,-1),Ro(ie)}else Ao(P,"Wrong API use : tried to return a value of an unknown type ("+H+").",-1);break;default:Cc(P)}}function c(P,H){for(var ie=[],ue=0;ue<P;ue+=1){var pe=Xt(H+4*ue,"i32"),je=cg(pe);if(je===1||je===2)pe=hg(pe);else if(je===3)pe=pg(pe);else if(je===4){je=pe,pe=dg(je),je=fg(je);for(var Kt=new Uint8Array(pe),Ot=0;Ot<pe;Ot+=1)Kt[Ot]=j[je+Ot];pe=Kt}else pe=null;ie.push(pe)}return ie}function f(P,H){this.Qa=P,this.db=H,this.Oa=1,this.lb=[]}function x(P,H){if(this.db=H,H=we(P)+1,this.eb=ys(H),this.eb===null)throw Error("Unable to allocate memory for the SQL string");Re(P,C,this.eb,H),this.kb=this.eb,this.Za=this.pb=null}function I(P){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),P!=null){var H=this.filename,ie="/",ue=H;if(ie&&(ie=typeof ie=="string"?ie:hi(ie),ue=H?pi(ie+"/"+H):ie),H=wt(!0,!0),ue=Bh(ue,H),P){if(typeof P=="string"){ie=Array(P.length);for(var pe=0,je=P.length;pe<je;++pe)ie[pe]=P.charCodeAt(pe);P=ie}ko(ue,H|146),ie=Rr(ue,577),yc(ie,P,0,P.length,0),ds(ie),ko(ue,H)}}this.handleError(se(this.filename,_)),this.db=Xt(_,"i32"),Ic(this.db),this.fb={},this.Sa={}}var _=zn(4),U=u.cwrap,se=U("sqlite3_open","number",["string","number"]),ye=U("sqlite3_close_v2","number",["number"]),ge=U("sqlite3_exec","number",["number","string","number","number","number"]),He=U("sqlite3_changes","number",["number"]),St=U("sqlite3_prepare_v2","number",["number","string","number","number","number"]),Ec=U("sqlite3_sql","string",["number"]),Xh=U("sqlite3_normalized_sql","string",["number"]),Sc=U("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Kh=U("sqlite3_bind_text","number",["number","number","number","number","number"]),kc=U("sqlite3_bind_blob","number",["number","number","number","number","number"]),Gh=U("sqlite3_bind_double","number",["number","number","number"]),Qh=U("sqlite3_bind_int","number",["number","number","number"]),Yh=U("sqlite3_bind_parameter_index","number",["number","string"]),Zh=U("sqlite3_step","number",["number"]),Jh=U("sqlite3_errmsg","string",["number"]),eg=U("sqlite3_column_count","number",["number"]),tg=U("sqlite3_data_count","number",["number"]),ng=U("sqlite3_column_double","number",["number","number"]),Tc=U("sqlite3_column_text","string",["number","number"]),rg=U("sqlite3_column_blob","number",["number","number"]),ig=U("sqlite3_column_bytes","number",["number","number"]),og=U("sqlite3_column_type","number",["number","number"]),ag=U("sqlite3_column_name","string",["number","number"]),sg=U("sqlite3_reset","number",["number"]),lg=U("sqlite3_clear_bindings","number",["number"]),ug=U("sqlite3_finalize","number",["number"]),jc=U("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),cg=U("sqlite3_value_type","number",["number"]),dg=U("sqlite3_value_bytes","number",["number"]),pg=U("sqlite3_value_text","string",["number"]),fg=U("sqlite3_value_blob","number",["number"]),hg=U("sqlite3_value_double","number",["number"]),gg=U("sqlite3_result_double","",["number","number"]),Cc=U("sqlite3_result_null","",["number"]),mg=U("sqlite3_result_text","",["number","string","number","number"]),yg=U("sqlite3_result_blob","",["number","number","number","number"]),xg=U("sqlite3_result_int","",["number","number"]),Ao=U("sqlite3_result_error","",["number","string","number"]),Nc=U("sqlite3_aggregate_context","number",["number","number"]),Ic=U("RegisterExtensionFunctions","number",["number"]),Rc=U("sqlite3_update_hook","number",["number","number","number"]);f.prototype.bind=function(P){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(P)?this.Cb(P):P!=null&&typeof P=="object"?this.Db(P):!0},f.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var P=Zh(this.Qa);switch(P){case 100:return!0;case 101:return!1;default:throw this.db.handleError(P)}},f.prototype.wb=function(P){return P==null&&(P=this.Oa,this.Oa+=1),ng(this.Qa,P)},f.prototype.Gb=function(P){if(P==null&&(P=this.Oa,this.Oa+=1),P=Tc(this.Qa,P),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(P)},f.prototype.Hb=function(P){return P==null&&(P=this.Oa,this.Oa+=1),Tc(this.Qa,P)},f.prototype.getBlob=function(P){P==null&&(P=this.Oa,this.Oa+=1);var H=ig(this.Qa,P);P=rg(this.Qa,P);for(var ie=new Uint8Array(H),ue=0;ue<H;ue+=1)ie[ue]=j[P+ue];return ie},f.prototype.get=function(P,H){H=H||{},P!=null&&this.bind(P)&&this.step(),P=[];for(var ie=tg(this.Qa),ue=0;ue<ie;ue+=1)switch(og(this.Qa,ue)){case 1:var pe=H.useBigInt?this.Gb(ue):this.wb(ue);P.push(pe);break;case 2:P.push(this.wb(ue));break;case 3:P.push(this.Hb(ue));break;case 4:P.push(this.getBlob(ue));break;default:P.push(null)}return P},f.prototype.getColumnNames=function(){for(var P=[],H=eg(this.Qa),ie=0;ie<H;ie+=1)P.push(ag(this.Qa,ie));return P},f.prototype.getAsObject=function(P,H){P=this.get(P,H),H=this.getColumnNames();for(var ie={},ue=0;ue<H.length;ue+=1)ie[H[ue]]=P[ue];return ie},f.prototype.getSQL=function(){return Ec(this.Qa)},f.prototype.getNormalizedSQL=function(){return Xh(this.Qa)},f.prototype.run=function(P){return P!=null&&this.bind(P),this.step(),this.reset()},f.prototype.sb=function(P,H){H==null&&(H=this.Oa,this.Oa+=1),P=ke(P);var ie=Io(P,No);this.lb.push(ie),this.db.handleError(Kh(this.Qa,H,ie,P.length-1,0))},f.prototype.Bb=function(P,H){H==null&&(H=this.Oa,this.Oa+=1);var ie=Io(P,No);this.lb.push(ie),this.db.handleError(kc(this.Qa,H,ie,P.length,0))},f.prototype.rb=function(P,H){H==null&&(H=this.Oa,this.Oa+=1),this.db.handleError((P===(P|0)?Qh:Gh)(this.Qa,H,P))},f.prototype.Eb=function(P){P==null&&(P=this.Oa,this.Oa+=1),kc(this.Qa,P,0,0,0)},f.prototype.tb=function(P,H){switch(H==null&&(H=this.Oa,this.Oa+=1),typeof P){case"string":this.sb(P,H);return;case"number":this.rb(P,H);return;case"bigint":this.sb(P.toString(),H);return;case"boolean":this.rb(P+0,H);return;case"object":if(P===null){this.Eb(H);return}if(P.length!=null){this.Bb(P,H);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+P+")."},f.prototype.Db=function(P){var H=this;return Object.keys(P).forEach(function(ie){var ue=Yh(H.Qa,ie);ue!==0&&H.tb(P[ie],ue)}),!0},f.prototype.Cb=function(P){for(var H=0;H<P.length;H+=1)this.tb(P[H],H+1);return!0},f.prototype.reset=function(){return this.freemem(),lg(this.Qa)===0&&sg(this.Qa)===0},f.prototype.freemem=function(){for(var P;(P=this.lb.pop())!==void 0;)Ro(P)},f.prototype.free=function(){this.freemem();var P=ug(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,P},x.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var P=vi(),H=zn(4);rr(_),rr(H);try{this.db.handleError(Sc(this.db.db,this.kb,-1,_,H)),this.kb=Xt(H,"i32");var ie=Xt(_,"i32");return ie===0?(this.mb(),{done:!0}):(this.Za=new f(ie,this.db),this.db.fb[ie]=this.Za,{value:this.Za,done:!1})}catch(ue){throw this.pb=Dn(this.kb),this.mb(),ue}finally{xi(P)}},x.prototype.mb=function(){Ro(this.eb),this.eb=null},x.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:Dn(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(x.prototype[Symbol.iterator]=function(){return this}),I.prototype.run=function(P,H){if(!this.db)throw"Database closed";if(H){P=this.prepare(P,H);try{P.step()}finally{P.free()}}else this.handleError(ge(this.db,P,0,0,_));return this},I.prototype.exec=function(P,H,ie){if(!this.db)throw"Database closed";var ue=vi(),pe=null;try{var je=gs(P),Kt=zn(4);for(P=[];Xt(je,"i8")!==0;){rr(_),rr(Kt),this.handleError(Sc(this.db,je,-1,_,Kt));var Ot=Xt(_,"i32");if(je=Xt(Kt,"i32"),Ot!==0){var Rt=null;for(pe=new f(Ot,this),H!=null&&pe.bind(H);pe.step();)Rt===null&&(Rt={columns:pe.getColumnNames(),values:[]},P.push(Rt)),Rt.values.push(pe.get(null,ie));pe.free()}}return P}catch(Gt){throw pe&&pe.free(),Gt}finally{xi(ue)}},I.prototype.each=function(P,H,ie,ue,pe){typeof H=="function"&&(ue=ie,ie=H,H=void 0),P=this.prepare(P,H);try{for(;P.step();)ie(P.getAsObject(null,pe))}finally{P.free()}if(typeof ue=="function")return ue()},I.prototype.prepare=function(P,H){if(rr(_),this.handleError(St(this.db,P,-1,_,0)),P=Xt(_,"i32"),P===0)throw"Nothing to prepare";var ie=new f(P,this);return H!=null&&ie.bind(H),this.fb[P]=ie},I.prototype.iterateStatements=function(P){return new x(P,this)},I.prototype.export=function(){Object.values(this.fb).forEach(function(H){H.free()}),Object.values(this.Sa).forEach(_n),this.Sa={},this.handleError(ye(this.db));var P=Uh(this.filename);return this.handleError(se(this.filename,_)),this.db=Xt(_,"i32"),Ic(this.db),P},I.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(P){P.free()}),Object.values(this.Sa).forEach(_n),this.Sa={},this.Ya&&(_n(this.Ya),this.Ya=void 0),this.handleError(ye(this.db)),pc("/"+this.filename),this.db=null)},I.prototype.handleError=function(P){if(P===0)return null;throw P=Jh(this.db),Error(P)},I.prototype.getRowsModified=function(){return He(this.db)},I.prototype.create_function=function(P,H){Object.prototype.hasOwnProperty.call(this.Sa,P)&&(_n(this.Sa[P]),delete this.Sa[P]);var ie=yi(function(ue,pe,je){pe=c(pe,je);try{var Kt=H.apply(null,pe)}catch(Ot){Ao(ue,Ot,-1);return}s(ue,Kt)},"viii");return this.Sa[P]=ie,this.handleError(jc(this.db,P,H.length,1,0,ie,0,0,0)),this},I.prototype.create_aggregate=function(P,H){var ie=H.init||function(){return null},ue=H.finalize||function(Rt){return Rt},pe=H.step;if(!pe)throw"An aggregate function must have a step function in "+P;var je={};Object.hasOwnProperty.call(this.Sa,P)&&(_n(this.Sa[P]),delete this.Sa[P]),H=P+"__finalize",Object.hasOwnProperty.call(this.Sa,H)&&(_n(this.Sa[H]),delete this.Sa[H]);var Kt=yi(function(Rt,Gt,vs){var lr=Nc(Rt,1);Object.hasOwnProperty.call(je,lr)||(je[lr]=ie()),Gt=c(Gt,vs),Gt=[je[lr]].concat(Gt);try{je[lr]=pe.apply(null,Gt)}catch(vg){delete je[lr],Ao(Rt,vg,-1)}},"viii"),Ot=yi(function(Rt){var Gt=Nc(Rt,1);try{var vs=ue(je[Gt])}catch(lr){delete je[Gt],Ao(Rt,lr,-1);return}s(Rt,vs),delete je[Gt]},"vi");return this.Sa[P]=Kt,this.Sa[H]=Ot,this.handleError(jc(this.db,P,pe.length-1,1,0,0,Kt,Ot,0)),this},I.prototype.updateHook=function(P){this.Ya&&(Rc(this.db,0,0),_n(this.Ya),this.Ya=void 0),P&&(this.Ya=yi(function(H,ie,ue,pe,je){switch(ie){case 18:H="insert";break;case 23:H="update";break;case 9:H="delete";break;default:throw"unknown operationCode in updateHook callback: "+ie}if(ue=ue?Fe(C,ue):"",pe=pe?Fe(C,pe):"",je>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";P(H,ue,pe,Number(je))},"viiiij"),Rc(this.db,this.Ya,0))},u.Database=I};var E={...u},h="./this.program",S=(s,c)=>{throw c},T="",b,y;if(v){var w=Hd;T=__dirname+"/",y=s=>(s=G(s)?new URL(s):s,w.readFileSync(s)),b=async s=>(s=G(s)?new URL(s):s,w.readFileSync(s,void 0)),!u.thisProgram&&1<process.argv.length&&(h=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),e.exports=u,S=(s,c)=>{throw process.exitCode=s,c}}else(m||g)&&(g?T=self.location.href:typeof document<"u"&&document.currentScript&&(T=document.currentScript.src),T=T.startsWith("blob:")?"":T.slice(0,T.replace(/[?#].*/,"").lastIndexOf("/")+1),g&&(y=s=>{var c=new XMLHttpRequest;return c.open("GET",s,!1),c.responseType="arraybuffer",c.send(null),new Uint8Array(c.response)}),b=async s=>{if(G(s))return new Promise((f,x)=>{var I=new XMLHttpRequest;I.open("GET",s,!0),I.responseType="arraybuffer",I.onload=()=>{I.status==200||I.status==0&&I.response?f(I.response):x(I.status)},I.onerror=x,I.send(null)});var c=await fetch(s,{credentials:"same-origin"});if(c.ok)return c.arrayBuffer();throw Error(c.status+" : "+c.url)});var R=u.print||console.log.bind(console),N=u.printErr||console.error.bind(console);Object.assign(u,E),E=null,u.thisProgram&&(h=u.thisProgram);var L=u.wasmBinary,A,F=!1,B,j,C,z,M,Y,he,me,ve,G=s=>s.startsWith("file://");function O(){var s=A.buffer;u.HEAP8=j=new Int8Array(s),u.HEAP16=z=new Int16Array(s),u.HEAPU8=C=new Uint8Array(s),u.HEAPU16=new Uint16Array(s),u.HEAP32=M=new Int32Array(s),u.HEAPU32=Y=new Uint32Array(s),u.HEAPF32=he=new Float32Array(s),u.HEAPF64=ve=new Float64Array(s),u.HEAP64=me=new BigInt64Array(s),u.HEAPU64=new BigUint64Array(s)}var W=0,V=null;function te(s){var c;throw(c=u.onAbort)==null||c.call(u,s),s="Aborted("+s+")",N(s),F=!0,new WebAssembly.RuntimeError(s+". Build with -sASSERTIONS for more info.")}var Se;async function Z(s){if(!L)try{var c=await b(s);return new Uint8Array(c)}catch{}if(s==Se&&L)s=new Uint8Array(L);else if(y)s=y(s);else throw"both async and sync fetching of the wasm failed";return s}async function $(s,c){try{var f=await Z(s);return await WebAssembly.instantiate(f,c)}catch(x){N(`failed to asynchronously prepare wasm: ${x}`),te(x)}}async function Q(s){var c=Se;if(!L&&typeof WebAssembly.instantiateStreaming=="function"&&!G(c)&&!v)try{var f=fetch(c,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(f,s)}catch(x){N(`wasm streaming compile failed: ${x}`),N("falling back to ArrayBuffer instantiation")}return $(c,s)}class fe{constructor(c){Qt(this,"name","ExitStatus");this.message=`Program terminated with exit(${c})`,this.status=c}}var Te=s=>{for(;0<s.length;)s.shift()(u)},at=[],Ft=[],st=()=>{var s=u.preRun.shift();Ft.unshift(s)};function Xt(s,c="i8"){switch(c.endsWith("*")&&(c="*"),c){case"i1":return j[s];case"i8":return j[s];case"i16":return z[s>>1];case"i32":return M[s>>2];case"i64":return me[s>>3];case"float":return he[s>>2];case"double":return ve[s>>3];case"*":return Y[s>>2];default:te(`invalid type for getValue: ${c}`)}}var di=u.noExitRuntime||!0;function rr(s){var c="i32";switch(c.endsWith("*")&&(c="*"),c){case"i1":j[s]=0;break;case"i8":j[s]=0;break;case"i16":z[s>>1]=0;break;case"i32":M[s>>2]=0;break;case"i64":me[s>>3]=BigInt(0);break;case"float":he[s>>2]=0;break;case"double":ve[s>>3]=0;break;case"*":Y[s>>2]=0;break;default:te(`invalid type for setValue: ${c}`)}}var ir=typeof TextDecoder<"u"?new TextDecoder:void 0,Fe=(s,c=0,f=NaN)=>{var x=c+f;for(f=c;s[f]&&!(f>=x);)++f;if(16<f-c&&s.buffer&&ir)return ir.decode(s.subarray(c,f));for(x="";c<f;){var I=s[c++];if(I&128){var _=s[c++]&63;if((I&224)==192)x+=String.fromCharCode((I&31)<<6|_);else{var U=s[c++]&63;I=(I&240)==224?(I&15)<<12|_<<6|U:(I&7)<<18|_<<12|U<<6|s[c++]&63,65536>I?x+=String.fromCharCode(I):(I-=65536,x+=String.fromCharCode(55296|I>>10,56320|I&1023))}}else x+=String.fromCharCode(I)}return x},Dn=(s,c)=>s?Fe(C,s,c):"",yo=(s,c)=>{for(var f=0,x=s.length-1;0<=x;x--){var I=s[x];I==="."?s.splice(x,1):I===".."?(s.splice(x,1),f++):f&&(s.splice(x,1),f--)}if(c)for(;f;f--)s.unshift("..");return s},pi=s=>{var c=s.charAt(0)==="/",f=s.slice(-1)==="/";return(s=yo(s.split("/").filter(x=>!!x),!c).join("/"))||c||(s="."),s&&f&&(s+="/"),(c?"/":"")+s},xo=s=>{var c=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(s).slice(1);return s=c[0],c=c[1],!s&&!c?".":(c&&(c=c.slice(0,-1)),s+c)},Cr=s=>s&&s.match(/([^\/]+|\/)\/*$/)[1],as=()=>{if(v){var s=Hd;return c=>s.randomFillSync(c)}return c=>crypto.getRandomValues(c)},D=s=>{(D=as())(s)},q=(...s)=>{for(var c="",f=!1,x=s.length-1;-1<=x&&!f;x--){if(f=0<=x?s[x]:"/",typeof f!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!f)return"";c=f+"/"+c,f=f.charAt(0)==="/"}return c=yo(c.split("/").filter(I=>!!I),!f).join("/"),(f?"/":"")+c||"."},re=[],we=s=>{for(var c=0,f=0;f<s.length;++f){var x=s.charCodeAt(f);127>=x?c++:2047>=x?c+=2:55296<=x&&57343>=x?(c+=4,++f):c+=3}return c},Re=(s,c,f,x)=>{if(!(0<x))return 0;var I=f;x=f+x-1;for(var _=0;_<s.length;++_){var U=s.charCodeAt(_);if(55296<=U&&57343>=U){var se=s.charCodeAt(++_);U=65536+((U&1023)<<10)|se&1023}if(127>=U){if(f>=x)break;c[f++]=U}else{if(2047>=U){if(f+1>=x)break;c[f++]=192|U>>6}else{if(65535>=U){if(f+2>=x)break;c[f++]=224|U>>12}else{if(f+3>=x)break;c[f++]=240|U>>18,c[f++]=128|U>>12&63}c[f++]=128|U>>6&63}c[f++]=128|U&63}}return c[f]=0,f-I},ke=(s,c)=>{var f=Array(we(s)+1);return s=Re(s,f,0,f.length),c&&(f.length=s),f},Ae=[];function ne(s,c){Ae[s]={input:[],output:[],cb:c},us(s,de)}var de={open(s){var c=Ae[s.node.rdev];if(!c)throw new K(43);s.tty=c,s.seekable=!1},close(s){s.tty.cb.fsync(s.tty)},fsync(s){s.tty.cb.fsync(s.tty)},read(s,c,f,x){if(!s.tty||!s.tty.cb.xb)throw new K(60);for(var I=0,_=0;_<x;_++){try{var U=s.tty.cb.xb(s.tty)}catch{throw new K(29)}if(U===void 0&&I===0)throw new K(6);if(U==null)break;I++,c[f+_]=U}return I&&(s.node.atime=Date.now()),I},write(s,c,f,x){if(!s.tty||!s.tty.cb.qb)throw new K(60);try{for(var I=0;I<x;I++)s.tty.cb.qb(s.tty,c[f+I])}catch{throw new K(29)}return x&&(s.node.mtime=s.node.ctime=Date.now()),I}},Xe={xb(){e:{if(!re.length){var s=null;if(v){var c=Buffer.alloc(256),f=0,x=process.stdin.fd;try{f=w.readSync(x,c,0,256)}catch(I){if(I.toString().includes("EOF"))f=0;else throw I}0<f&&(s=c.slice(0,f).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(s=window.prompt("Input: "),s!==null&&(s+=`
`));if(!s){s=null;break e}re=ke(s,!0)}s=re.shift()}return s},qb(s,c){c===null||c===10?(R(Fe(s.output)),s.output=[]):c!=0&&s.output.push(c)},fsync(s){var c;0<((c=s.output)==null?void 0:c.length)&&(R(Fe(s.output)),s.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},gt={qb(s,c){c===null||c===10?(N(Fe(s.output)),s.output=[]):c!=0&&s.output.push(c)},fsync(s){var c;0<((c=s.output)==null?void 0:c.length)&&(N(Fe(s.output)),s.output=[])}},J={Wa:null,Xa(){return J.createNode(null,"/",16895,0)},createNode(s,c,f,x){if((f&61440)===24576||(f&61440)===4096)throw new K(63);return J.Wa||(J.Wa={dir:{node:{Ta:J.La.Ta,Ua:J.La.Ua,lookup:J.La.lookup,hb:J.La.hb,rename:J.La.rename,unlink:J.La.unlink,rmdir:J.La.rmdir,readdir:J.La.readdir,symlink:J.La.symlink},stream:{Va:J.Ma.Va}},file:{node:{Ta:J.La.Ta,Ua:J.La.Ua},stream:{Va:J.Ma.Va,read:J.Ma.read,write:J.Ma.write,ib:J.Ma.ib,jb:J.Ma.jb}},link:{node:{Ta:J.La.Ta,Ua:J.La.Ua,readlink:J.La.readlink},stream:{}},ub:{node:{Ta:J.La.Ta,Ua:J.La.Ua},stream:Mh}}),f=oc(s,c,f,x),Et(f.mode)?(f.La=J.Wa.dir.node,f.Ma=J.Wa.dir.stream,f.Na={}):(f.mode&61440)===32768?(f.La=J.Wa.file.node,f.Ma=J.Wa.file.stream,f.Ra=0,f.Na=null):(f.mode&61440)===40960?(f.La=J.Wa.link.node,f.Ma=J.Wa.link.stream):(f.mode&61440)===8192&&(f.La=J.Wa.ub.node,f.Ma=J.Wa.ub.stream),f.atime=f.mtime=f.ctime=Date.now(),s&&(s.Na[c]=f,s.atime=s.mtime=s.ctime=f.atime),f},Sb(s){return s.Na?s.Na.subarray?s.Na.subarray(0,s.Ra):new Uint8Array(s.Na):new Uint8Array(0)},La:{Ta(s){var c={};return c.dev=(s.mode&61440)===8192?s.id:1,c.ino=s.id,c.mode=s.mode,c.nlink=1,c.uid=0,c.gid=0,c.rdev=s.rdev,Et(s.mode)?c.size=4096:(s.mode&61440)===32768?c.size=s.Ra:(s.mode&61440)===40960?c.size=s.link.length:c.size=0,c.atime=new Date(s.atime),c.mtime=new Date(s.mtime),c.ctime=new Date(s.ctime),c.blksize=4096,c.blocks=Math.ceil(c.size/c.blksize),c},Ua(s,c){for(var f of["mode","atime","mtime","ctime"])c[f]!=null&&(s[f]=c[f]);c.size!==void 0&&(c=c.size,s.Ra!=c&&(c==0?(s.Na=null,s.Ra=0):(f=s.Na,s.Na=new Uint8Array(c),f&&s.Na.set(f.subarray(0,Math.min(c,s.Ra))),s.Ra=c)))},lookup(){throw J.vb},hb(s,c,f,x){return J.createNode(s,c,f,x)},rename(s,c,f){try{var x=or(c,f)}catch{}if(x){if(Et(s.mode))for(var I in x.Na)throw new K(55);ss(x)}delete s.parent.Na[s.name],c.Na[f]=s,s.name=f,c.ctime=c.mtime=s.parent.ctime=s.parent.mtime=Date.now()},unlink(s,c){delete s.Na[c],s.ctime=s.mtime=Date.now()},rmdir(s,c){var f=or(s,c),x;for(x in f.Na)throw new K(55);delete s.Na[c],s.ctime=s.mtime=Date.now()},readdir(s){return[".","..",...Object.keys(s.Na)]},symlink(s,c,f){return s=J.createNode(s,c,41471,0),s.link=f,s},readlink(s){if((s.mode&61440)!==40960)throw new K(28);return s.link}},Ma:{read(s,c,f,x,I){var _=s.node.Na;if(I>=s.node.Ra)return 0;if(s=Math.min(s.node.Ra-I,x),8<s&&_.subarray)c.set(_.subarray(I,I+s),f);else for(x=0;x<s;x++)c[f+x]=_[I+x];return s},write(s,c,f,x,I,_){if(c.buffer===j.buffer&&(_=!1),!x)return 0;if(s=s.node,s.mtime=s.ctime=Date.now(),c.subarray&&(!s.Na||s.Na.subarray)){if(_)return s.Na=c.subarray(f,f+x),s.Ra=x;if(s.Ra===0&&I===0)return s.Na=c.slice(f,f+x),s.Ra=x;if(I+x<=s.Ra)return s.Na.set(c.subarray(f,f+x),I),x}_=I+x;var U=s.Na?s.Na.length:0;if(U>=_||(_=Math.max(_,U*(1048576>U?2:1.125)>>>0),U!=0&&(_=Math.max(_,256)),U=s.Na,s.Na=new Uint8Array(_),0<s.Ra&&s.Na.set(U.subarray(0,s.Ra),0)),s.Na.subarray&&c.subarray)s.Na.set(c.subarray(f,f+x),I);else for(_=0;_<x;_++)s.Na[I+_]=c[f+_];return s.Ra=Math.max(s.Ra,I+x),x},Va(s,c,f){if(f===1?c+=s.position:f===2&&(s.node.mode&61440)===32768&&(c+=s.node.Ra),0>c)throw new K(28);return c},ib(s,c,f,x,I){if((s.node.mode&61440)!==32768)throw new K(43);if(s=s.node.Na,I&2||!s||s.buffer!==j.buffer){I=!0,x=65536*Math.ceil(c/65536);var _=bc(65536,x);if(_&&C.fill(0,_,_+x),x=_,!x)throw new K(48);s&&((0<f||f+c<s.length)&&(s.subarray?s=s.subarray(f,f+c):s=Array.prototype.slice.call(s,f,f+c)),j.set(s,x))}else I=!1,x=s.byteOffset;return{Kb:x,Ab:I}},jb(s,c,f,x){return J.Ma.write(s,c,0,x,f,!1),0}}},wt=(s,c)=>{var f=0;return s&&(f|=365),c&&(f|=146),f},Je=null,Le={},Oe=[],xn=1,lt=null,Ue=!1,vo=!0,It={},K=class{constructor(s){Qt(this,"name","ErrnoError");this.Pa=s}},bo=class{constructor(){Qt(this,"gb",{});Qt(this,"node",null)}get flags(){return this.gb.flags}set flags(s){this.gb.flags=s}get position(){return this.gb.position}set position(s){this.gb.position=s}},fi=class{constructor(s,c,f,x){Qt(this,"La",{});Qt(this,"Ma",{});Qt(this,"ab",null);s||(s=this),this.parent=s,this.Xa=s.Xa,this.id=xn++,this.name=c,this.mode=f,this.rdev=x,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(s){s?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(s){s?this.mode|=146:this.mode&=-147}};function ut(s,c={}){if(!s)throw new K(44);c.nb??(c.nb=!0),s.charAt(0)==="/"||(s="//"+s);var f=0;e:for(;40>f;f++){s=s.split("/").filter(se=>!!se);for(var x=Je,I="/",_=0;_<s.length;_++){var U=_===s.length-1;if(U&&c.parent)break;if(s[_]!==".")if(s[_]==="..")I=xo(I),x=x.parent;else{I=pi(I+"/"+s[_]);try{x=or(x,s[_])}catch(se){if((se==null?void 0:se.Pa)===44&&U&&c.Jb)return{path:I};throw se}if(!x.ab||U&&!c.nb||(x=x.ab.root),(x.mode&61440)===40960&&(!U||c.$a)){if(!x.La.readlink)throw new K(52);x=x.La.readlink(x),x.charAt(0)==="/"||(x=xo(I)+"/"+x),s=x+"/"+s.slice(_+1).join("/");continue e}}}return{path:I,node:x}}throw new K(32)}function hi(s){for(var c;;){if(s===s.parent)return s=s.Xa.zb,c?s[s.length-1]!=="/"?`${s}/${c}`:s+c:s;c=c?`${s.name}/${c}`:s.name,s=s.parent}}function Nr(s,c){for(var f=0,x=0;x<c.length;x++)f=(f<<5)-f+c.charCodeAt(x)|0;return(s+f>>>0)%lt.length}function ss(s){var c=Nr(s.parent.id,s.name);if(lt[c]===s)lt[c]=s.bb;else for(c=lt[c];c;){if(c.bb===s){c.bb=s.bb;break}c=c.bb}}function or(s,c){var f=Et(s.mode)?(f=Ir(s,"x"))?f:s.La.lookup?0:2:54;if(f)throw new K(f);for(f=lt[Nr(s.id,c)];f;f=f.bb){var x=f.name;if(f.parent.id===s.id&&x===c)return f}return s.La.lookup(s,c)}function oc(s,c,f,x){return s=new fi(s,c,f,x),c=Nr(s.parent.id,s.name),s.bb=lt[c],lt[c]=s}function Et(s){return(s&61440)===16384}function ac(s){var c=["r","w","rw"][s&3];return s&512&&(c+="w"),c}function Ir(s,c){if(vo)return 0;if(!c.includes("r")||s.mode&292){if(c.includes("w")&&!(s.mode&146)||c.includes("x")&&!(s.mode&73))return 2}else return 2;return 0}function sc(s,c){if(!Et(s.mode))return 54;try{return or(s,c),20}catch{}return Ir(s,"wx")}function lc(s,c,f){try{var x=or(s,c)}catch(I){return I.Pa}if(s=Ir(s,"wx"))return s;if(f){if(!Et(x.mode))return 54;if(x===x.parent||hi(x)==="/")return 10}else if(Et(x.mode))return 31;return 0}function wo(s){if(!s)throw new K(63);return s}function mt(s){if(s=Oe[s],!s)throw new K(8);return s}function uc(s,c=-1){if(s=Object.assign(new bo,s),c==-1)e:{for(c=0;4096>=c;c++)if(!Oe[c])break e;throw new K(33)}return s.fd=c,Oe[c]=s}function Oh(s,c=-1){var f,x;return s=uc(s,c),(x=(f=s.Ma)==null?void 0:f.Rb)==null||x.call(f,s),s}function ls(s,c,f){var x=s==null?void 0:s.Ma.Ua;s=x?s:c,x??(x=c.La.Ua),wo(x),x(s,f)}var Mh={open(s){var c,f;s.Ma=Le[s.node.rdev].Ma,(f=(c=s.Ma).open)==null||f.call(c,s)},Va(){throw new K(70)}};function us(s,c){Le[s]={Ma:c}}function cc(s,c){var f=c==="/";if(f&&Je)throw new K(10);if(!f&&c){var x=ut(c,{nb:!1});if(c=x.path,x=x.node,x.ab)throw new K(10);if(!Et(x.mode))throw new K(54)}c={type:s,Wb:{},zb:c,Ib:[]},s=s.Xa(c),s.Xa=c,c.root=s,f?Je=s:x&&(x.ab=c,x.Xa&&x.Xa.Ib.push(c))}function Eo(s,c,f){var x=ut(s,{parent:!0}).node;if(s=Cr(s),!s)throw new K(28);if(s==="."||s==="..")throw new K(20);var I=sc(x,s);if(I)throw new K(I);if(!x.La.hb)throw new K(63);return x.La.hb(x,s,c,f)}function Bh(s,c=438){return Eo(s,c&4095|32768,0)}function cn(s,c=511){return Eo(s,c&1023|16384,0)}function So(s,c,f){typeof f>"u"&&(f=c,c=438),Eo(s,c|8192,f)}function cs(s,c){if(!q(s))throw new K(44);var f=ut(c,{parent:!0}).node;if(!f)throw new K(44);c=Cr(c);var x=sc(f,c);if(x)throw new K(x);if(!f.La.symlink)throw new K(63);f.La.symlink(f,c,s)}function dc(s){var c=ut(s,{parent:!0}).node;s=Cr(s);var f=or(c,s),x=lc(c,s,!0);if(x)throw new K(x);if(!c.La.rmdir)throw new K(63);if(f.ab)throw new K(10);c.La.rmdir(c,s),ss(f)}function pc(s){var c=ut(s,{parent:!0}).node;if(!c)throw new K(44);s=Cr(s);var f=or(c,s),x=lc(c,s,!1);if(x)throw new K(x);if(!c.La.unlink)throw new K(63);if(f.ab)throw new K(10);c.La.unlink(c,s),ss(f)}function gi(s,c){return s=ut(s,{$a:!c}).node,wo(s.La.Ta)(s)}function fc(s,c,f,x){ls(s,c,{mode:f&4095|c.mode&-4096,ctime:Date.now(),Fb:x})}function ko(s,c){s=typeof s=="string"?ut(s,{$a:!0}).node:s,fc(null,s,c)}function hc(s,c,f){if(Et(c.mode))throw new K(31);if((c.mode&61440)!==32768)throw new K(28);var x=Ir(c,"w");if(x)throw new K(x);ls(s,c,{size:f,timestamp:Date.now()})}function Rr(s,c,f=438){if(s==="")throw new K(44);if(typeof c=="string"){var x={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[c];if(typeof x>"u")throw Error(`Unknown file open mode: ${c}`);c=x}if(f=c&64?f&4095|32768:0,typeof s=="object")x=s;else{var I=s.endsWith("/");s=ut(s,{$a:!(c&131072),Jb:!0}),x=s.node,s=s.path}var _=!1;if(c&64)if(x){if(c&128)throw new K(20)}else{if(I)throw new K(31);x=Eo(s,f|511,0),_=!0}if(!x)throw new K(44);if((x.mode&61440)===8192&&(c&=-513),c&65536&&!Et(x.mode))throw new K(54);if(!_&&(I=x?(x.mode&61440)===40960?32:Et(x.mode)&&(ac(c)!=="r"||c&576)?31:Ir(x,ac(c)):44))throw new K(I);return c&512&&!_&&(I=x,I=typeof I=="string"?ut(I,{$a:!0}).node:I,hc(null,I,0)),c&=-131713,I=uc({node:x,path:hi(x),flags:c,seekable:!0,position:0,Ma:x.Ma,Lb:[],error:!1}),I.Ma.open&&I.Ma.open(I),_&&ko(x,f&511),!u.logReadFiles||c&1||s in It||(It[s]=1),I}function ds(s){if(s.fd===null)throw new K(8);s.ob&&(s.ob=null);try{s.Ma.close&&s.Ma.close(s)}catch(c){throw c}finally{Oe[s.fd]=null}s.fd=null}function gc(s,c,f){if(s.fd===null)throw new K(8);if(!s.seekable||!s.Ma.Va)throw new K(70);if(f!=0&&f!=1&&f!=2)throw new K(28);s.position=s.Ma.Va(s,c,f),s.Lb=[]}function mc(s,c,f,x,I){if(0>x||0>I)throw new K(28);if(s.fd===null)throw new K(8);if((s.flags&2097155)===1)throw new K(8);if(Et(s.node.mode))throw new K(31);if(!s.Ma.read)throw new K(28);var _=typeof I<"u";if(!_)I=s.position;else if(!s.seekable)throw new K(70);return c=s.Ma.read(s,c,f,x,I),_||(s.position+=c),c}function yc(s,c,f,x,I){if(0>x||0>I)throw new K(28);if(s.fd===null)throw new K(8);if(!(s.flags&2097155))throw new K(8);if(Et(s.node.mode))throw new K(31);if(!s.Ma.write)throw new K(28);s.seekable&&s.flags&1024&&gc(s,0,2);var _=typeof I<"u";if(!_)I=s.position;else if(!s.seekable)throw new K(70);return c=s.Ma.write(s,c,f,x,I,void 0),_||(s.position+=c),c}function Uh(s){var c,f=Rr(s,f||0);s=gi(s).size;var x=new Uint8Array(s);return mc(f,x,0,s,0),c=x,ds(f),c}function Pn(s,c,f){s=pi("/dev/"+s);var x=wt(!!c,!!f);Pn.yb??(Pn.yb=64);var I=Pn.yb++<<8|0;us(I,{open(_){_.seekable=!1},close(){var _;(_=f==null?void 0:f.buffer)!=null&&_.length&&f(10)},read(_,U,se,ye){for(var ge=0,He=0;He<ye;He++){try{var St=c()}catch{throw new K(29)}if(St===void 0&&ge===0)throw new K(6);if(St==null)break;ge++,U[se+He]=St}return ge&&(_.node.atime=Date.now()),ge},write(_,U,se,ye){for(var ge=0;ge<ye;ge++)try{f(U[se+ge])}catch{throw new K(29)}return ye&&(_.node.mtime=_.node.ctime=Date.now()),ge}}),So(s,x,I)}var Pe={};function ar(s,c,f){if(c.charAt(0)==="/")return c;if(s=s===-100?"/":mt(s).path,c.length==0){if(!f)throw new K(44);return s}return s+"/"+c}function To(s,c){M[s>>2]=c.dev,M[s+4>>2]=c.mode,Y[s+8>>2]=c.nlink,M[s+12>>2]=c.uid,M[s+16>>2]=c.gid,M[s+20>>2]=c.rdev,me[s+24>>3]=BigInt(c.size),M[s+32>>2]=4096,M[s+36>>2]=c.blocks;var f=c.atime.getTime(),x=c.mtime.getTime(),I=c.ctime.getTime();return me[s+40>>3]=BigInt(Math.floor(f/1e3)),Y[s+48>>2]=f%1e3*1e6,me[s+56>>3]=BigInt(Math.floor(x/1e3)),Y[s+64>>2]=x%1e3*1e6,me[s+72>>3]=BigInt(Math.floor(I/1e3)),Y[s+80>>2]=I%1e3*1e6,me[s+88>>3]=BigInt(c.ino),0}var jo=void 0,Co=()=>{var s=M[+jo>>2];return jo+=4,s},ps=0,$h=[0,31,60,91,121,152,182,213,244,274,305,335],Wh=[0,31,59,90,120,151,181,212,243,273,304,334],mi={},xc=s=>{var c;B=s,di||0<ps||((c=u.onExit)==null||c.call(u,s),F=!0),S(s,new fe(s))},Vh=s=>{if(!F)try{if(s(),!(di||0<ps))try{B=s=B,xc(s)}catch(c){c instanceof fe||c=="unwind"||S(1,c)}}catch(c){c instanceof fe||c=="unwind"||S(1,c)}},fs={},vc=()=>{if(!hs){var s={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:h||"./this.program"},c;for(c in fs)fs[c]===void 0?delete s[c]:s[c]=fs[c];var f=[];for(c in s)f.push(`${c}=${s[c]}`);hs=f}return hs},hs,gs=s=>{var c=we(s)+1,f=zn(c);return Re(s,C,f,c),f},Hh=(s,c,f,x)=>{var I={string:ge=>{var He=0;return ge!=null&&ge!==0&&(He=gs(ge)),He},array:ge=>{var He=zn(ge.length);return j.set(ge,He),He}};s=u["_"+s];var _=[],U=0;if(x)for(var se=0;se<x.length;se++){var ye=I[f[se]];ye?(U===0&&(U=vi()),_[se]=ye(x[se])):_[se]=x[se]}return f=s(..._),f=function(ge){return U!==0&&xi(U),c==="string"?ge?Fe(C,ge):"":c==="boolean"?!!ge:ge}(f)},No=0,Io=(s,c)=>(c=c==1?zn(s.length):ys(s.length),s.subarray||s.slice||(s=new Uint8Array(s)),C.set(s,c),c),sr,ms=[],vn,_n=s=>{sr.delete(vn.get(s)),vn.set(s,null),ms.push(s)},yi=(s,c)=>{if(!sr){sr=new WeakMap;var f=vn.length;if(sr)for(var x=0;x<0+f;x++){var I=vn.get(x);I&&sr.set(I,x)}}if(f=sr.get(s)||0)return f;if(ms.length)f=ms.pop();else{try{vn.grow(1)}catch(ye){throw ye instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":ye}f=vn.length-1}try{vn.set(f,s)}catch(ye){if(!(ye instanceof TypeError))throw ye;if(typeof WebAssembly.Function=="function"){var _=WebAssembly.Function;x={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},I={parameters:[],results:c[0]=="v"?[]:[x[c[0]]]};for(var U=1;U<c.length;++U)I.parameters.push(x[c[U]]);c=new _(I,s)}else{x=[1],I=c.slice(0,1),c=c.slice(1),U={i:127,p:127,j:126,f:125,d:124,e:111},x.push(96);var se=c.length;128>se?x.push(se):x.push(se%128|128,se>>7);for(_ of c)x.push(U[_]);I=="v"?x.push(0):x.push(1,U[I]),c=[0,97,115,109,1,0,0,0,1],_=x.length,128>_?c.push(_):c.push(_%128|128,_>>7),c.push(...x),c.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),c=new WebAssembly.Module(new Uint8Array(c)),c=new WebAssembly.Instance(c,{e:{f:s}}).exports.f}vn.set(f,c)}return sr.set(s,f),f};lt=Array(4096),cc(J,"/"),cn("/tmp"),cn("/home"),cn("/home/web_user"),function(){cn("/dev"),us(259,{read:()=>0,write:(x,I,_,U)=>U,Va:()=>0}),So("/dev/null",259),ne(1280,Xe),ne(1536,gt),So("/dev/tty",1280),So("/dev/tty1",1536);var s=new Uint8Array(1024),c=0,f=()=>(c===0&&(D(s),c=s.byteLength),s[--c]);Pn("random",f),Pn("urandom",f),cn("/dev/shm"),cn("/dev/shm/tmp")}(),function(){cn("/proc");var s=cn("/proc/self");cn("/proc/self/fd"),cc({Xa(){var c=oc(s,"fd",16895,73);return c.Ma={Va:J.Ma.Va},c.La={lookup(f,x){f=+x;var I=mt(f);return f={parent:null,Xa:{zb:"fake"},La:{readlink:()=>I.path},id:f+1},f.parent=f},readdir(){return Array.from(Oe.entries()).filter(([,f])=>f).map(([f])=>f.toString())}},c}},"/proc/self/fd")}(),J.vb=new K(44),J.vb.stack="<generic error, no stack>";var qh={a:(s,c,f,x)=>te(`Assertion failed: ${s?Fe(C,s):""}, at: `+[c?c?Fe(C,c):"":"unknown filename",f,x?x?Fe(C,x):"":"unknown function"]),i:function(s,c){try{return s=s?Fe(C,s):"",ko(s,c),0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Pa}},L:function(s,c,f){try{if(c=c?Fe(C,c):"",c=ar(s,c),f&-8)return-28;var x=ut(c,{$a:!0}).node;return x?(s="",f&4&&(s+="r"),f&2&&(s+="w"),f&1&&(s+="x"),s&&Ir(x,s)?-2:0):-44}catch(I){if(typeof Pe>"u"||I.name!=="ErrnoError")throw I;return-I.Pa}},j:function(s,c){try{var f=mt(s);return fc(f,f.node,c,!1),0}catch(x){if(typeof Pe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},h:function(s){try{var c=mt(s);return ls(c,c.node,{timestamp:Date.now(),Fb:!1}),0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Pa}},b:function(s,c,f){jo=f;try{var x=mt(s);switch(c){case 0:var I=Co();if(0>I)break;for(;Oe[I];)I++;return Oh(x,I).fd;case 1:case 2:return 0;case 3:return x.flags;case 4:return I=Co(),x.flags|=I,0;case 12:return I=Co(),z[I+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(_){if(typeof Pe>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},g:function(s,c){try{var f=mt(s),x=f.node,I=f.Ma.Ta;s=I?f:x,I??(I=x.La.Ta),wo(I);var _=I(s);return To(c,_)}catch(U){if(typeof Pe>"u"||U.name!=="ErrnoError")throw U;return-U.Pa}},H:function(s,c){c=-9007199254740992>c||9007199254740992<c?NaN:Number(c);try{if(isNaN(c))return 61;var f=mt(s);if(0>c||!(f.flags&2097155))throw new K(28);return hc(f,f.node,c),0}catch(x){if(typeof Pe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},G:function(s,c){try{if(c===0)return-28;var f=we("/")+1;return c<f?-68:(Re("/",C,s,c),f)}catch(x){if(typeof Pe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},K:function(s,c){try{return s=s?Fe(C,s):"",To(c,gi(s,!0))}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Pa}},C:function(s,c,f){try{return c=c?Fe(C,c):"",c=ar(s,c),cn(c,f),0}catch(x){if(typeof Pe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},J:function(s,c,f,x){try{c=c?Fe(C,c):"";var I=x&256;return c=ar(s,c,x&4096),To(f,I?gi(c,!0):gi(c))}catch(_){if(typeof Pe>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},x:function(s,c,f,x){jo=x;try{c=c?Fe(C,c):"",c=ar(s,c);var I=x?Co():0;return Rr(c,f,I).fd}catch(_){if(typeof Pe>"u"||_.name!=="ErrnoError")throw _;return-_.Pa}},v:function(s,c,f,x){try{if(c=c?Fe(C,c):"",c=ar(s,c),0>=x)return-28;var I=ut(c).node;if(!I)throw new K(44);if(!I.La.readlink)throw new K(28);var _=I.La.readlink(I),U=Math.min(x,we(_)),se=j[f+U];return Re(_,C,f,x+1),j[f+U]=se,U}catch(ye){if(typeof Pe>"u"||ye.name!=="ErrnoError")throw ye;return-ye.Pa}},u:function(s){try{return s=s?Fe(C,s):"",dc(s),0}catch(c){if(typeof Pe>"u"||c.name!=="ErrnoError")throw c;return-c.Pa}},f:function(s,c){try{return s=s?Fe(C,s):"",To(c,gi(s))}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return-f.Pa}},r:function(s,c,f){try{return c=c?Fe(C,c):"",c=ar(s,c),f===0?pc(c):f===512?dc(c):te("Invalid flags passed to unlinkat"),0}catch(x){if(typeof Pe>"u"||x.name!=="ErrnoError")throw x;return-x.Pa}},q:function(s,c,f){try{c=c?Fe(C,c):"",c=ar(s,c,!0);var x=Date.now(),I,_;if(f){var U=Y[f>>2]+4294967296*M[f+4>>2],se=M[f+8>>2];se==1073741823?I=x:se==1073741822?I=null:I=1e3*U+se/1e6,f+=16,U=Y[f>>2]+4294967296*M[f+4>>2],se=M[f+8>>2],se==1073741823?_=x:se==1073741822?_=null:_=1e3*U+se/1e6}else _=I=x;if((_??I)!==null){s=I;var ye=ut(c,{$a:!0}).node;wo(ye.La.Ua)(ye,{atime:s,mtime:_})}return 0}catch(ge){if(typeof Pe>"u"||ge.name!=="ErrnoError")throw ge;return-ge.Pa}},m:()=>te(""),l:()=>{di=!1,ps=0},A:function(s,c){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s),s=new Date(1e3*s),M[c>>2]=s.getSeconds(),M[c+4>>2]=s.getMinutes(),M[c+8>>2]=s.getHours(),M[c+12>>2]=s.getDate(),M[c+16>>2]=s.getMonth(),M[c+20>>2]=s.getFullYear()-1900,M[c+24>>2]=s.getDay();var f=s.getFullYear();M[c+28>>2]=(f%4!==0||f%100===0&&f%400!==0?Wh:$h)[s.getMonth()]+s.getDate()-1|0,M[c+36>>2]=-(60*s.getTimezoneOffset()),f=new Date(s.getFullYear(),6,1).getTimezoneOffset();var x=new Date(s.getFullYear(),0,1).getTimezoneOffset();M[c+32>>2]=(f!=x&&s.getTimezoneOffset()==Math.min(x,f))|0},y:function(s,c,f,x,I,_,U){I=-9007199254740992>I||9007199254740992<I?NaN:Number(I);try{if(isNaN(I))return 61;var se=mt(x);if(c&2&&!(f&2)&&(se.flags&2097155)!==2)throw new K(2);if((se.flags&2097155)===1)throw new K(2);if(!se.Ma.ib)throw new K(43);if(!s)throw new K(28);var ye=se.Ma.ib(se,s,I,c,f),ge=ye.Kb;return M[_>>2]=ye.Ab,Y[U>>2]=ge,0}catch(He){if(typeof Pe>"u"||He.name!=="ErrnoError")throw He;return-He.Pa}},z:function(s,c,f,x,I,_){_=-9007199254740992>_||9007199254740992<_?NaN:Number(_);try{var U=mt(I);if(f&2){if(f=_,(U.node.mode&61440)!==32768)throw new K(43);if(!(x&2)){var se=C.slice(s,s+c);U.Ma.jb&&U.Ma.jb(U,se,f,c,x)}}}catch(ye){if(typeof Pe>"u"||ye.name!=="ErrnoError")throw ye;return-ye.Pa}},n:(s,c)=>{if(mi[s]&&(clearTimeout(mi[s].id),delete mi[s]),!c)return 0;var f=setTimeout(()=>{delete mi[s],Vh(()=>wc(s,performance.now()))},c);return mi[s]={id:f,Xb:c},0},B:(s,c,f,x)=>{var I=new Date().getFullYear(),_=new Date(I,0,1).getTimezoneOffset();I=new Date(I,6,1).getTimezoneOffset(),Y[s>>2]=60*Math.max(_,I),M[c>>2]=+(_!=I),c=U=>{var se=Math.abs(U);return`UTC${0<=U?"-":"+"}${String(Math.floor(se/60)).padStart(2,"0")}${String(se%60).padStart(2,"0")}`},s=c(_),c=c(I),I<_?(Re(s,C,f,17),Re(c,C,x,17)):(Re(s,C,x,17),Re(c,C,f,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:s=>{var c=C.length;if(s>>>=0,2147483648<s)return!1;for(var f=1;4>=f;f*=2){var x=c*(1+.2/f);x=Math.min(x,s+100663296);e:{x=(Math.min(2147483648,65536*Math.ceil(Math.max(s,x)/65536))-A.buffer.byteLength+65535)/65536|0;try{A.grow(x),O();var I=1;break e}catch{}I=void 0}if(I)return!0}return!1},E:(s,c)=>{var f=0;return vc().forEach((x,I)=>{var _=c+f;for(I=Y[s+4*I>>2]=_,_=0;_<x.length;++_)j[I++]=x.charCodeAt(_);j[I]=0,f+=x.length+1}),0},F:(s,c)=>{var f=vc();Y[s>>2]=f.length;var x=0;return f.forEach(I=>x+=I.length+1),Y[c>>2]=x,0},e:function(s){try{var c=mt(s);return ds(c),0}catch(f){if(typeof Pe>"u"||f.name!=="ErrnoError")throw f;return f.Pa}},p:function(s,c){try{var f=mt(s);return j[c]=f.tty?2:Et(f.mode)?3:(f.mode&61440)===40960?7:4,z[c+2>>1]=0,me[c+8>>3]=BigInt(0),me[c+16>>3]=BigInt(0),0}catch(x){if(typeof Pe>"u"||x.name!=="ErrnoError")throw x;return x.Pa}},w:function(s,c,f,x){try{e:{var I=mt(s);s=c;for(var _,U=c=0;U<f;U++){var se=Y[s>>2],ye=Y[s+4>>2];s+=8;var ge=mc(I,j,se,ye,_);if(0>ge){var He=-1;break e}if(c+=ge,ge<ye)break;typeof _<"u"&&(_+=ge)}He=c}return Y[x>>2]=He,0}catch(St){if(typeof Pe>"u"||St.name!=="ErrnoError")throw St;return St.Pa}},D:function(s,c,f,x){c=-9007199254740992>c||9007199254740992<c?NaN:Number(c);try{if(isNaN(c))return 61;var I=mt(s);return gc(I,c,f),me[x>>3]=BigInt(I.position),I.ob&&c===0&&f===0&&(I.ob=null),0}catch(_){if(typeof Pe>"u"||_.name!=="ErrnoError")throw _;return _.Pa}},I:function(s){var f;try{var c=mt(s);return(f=c.Ma)!=null&&f.fsync?c.Ma.fsync(c):0}catch(x){if(typeof Pe>"u"||x.name!=="ErrnoError")throw x;return x.Pa}},t:function(s,c,f,x){try{e:{var I=mt(s);s=c;for(var _,U=c=0;U<f;U++){var se=Y[s>>2],ye=Y[s+4>>2];s+=8;var ge=yc(I,j,se,ye,_);if(0>ge){var He=-1;break e}if(c+=ge,ge<ye)break;typeof _<"u"&&(_+=ge)}He=c}return Y[x>>2]=He,0}catch(St){if(typeof Pe>"u"||St.name!=="ErrnoError")throw St;return St.Pa}},k:xc},le;(async function(){var f;function s(x){var I;return le=x.exports,A=le.M,O(),vn=le.O,W--,(I=u.monitorRunDependencies)==null||I.call(u,W),W==0&&V&&(x=V,V=null,x()),le}W++,(f=u.monitorRunDependencies)==null||f.call(u,W);var c={a:qh};return u.instantiateWasm?new Promise(x=>{u.instantiateWasm(c,(I,_)=>{s(I),x(I.exports)})}):(Se??(Se=u.locateFile?u.locateFile("sql-wasm.wasm",T):T+"sql-wasm.wasm"),s((await Q(c)).instance))})(),u._sqlite3_free=s=>(u._sqlite3_free=le.P)(s),u._sqlite3_value_text=s=>(u._sqlite3_value_text=le.Q)(s),u._sqlite3_prepare_v2=(s,c,f,x,I)=>(u._sqlite3_prepare_v2=le.R)(s,c,f,x,I),u._sqlite3_step=s=>(u._sqlite3_step=le.S)(s),u._sqlite3_reset=s=>(u._sqlite3_reset=le.T)(s),u._sqlite3_exec=(s,c,f,x,I)=>(u._sqlite3_exec=le.U)(s,c,f,x,I),u._sqlite3_finalize=s=>(u._sqlite3_finalize=le.V)(s),u._sqlite3_column_name=(s,c)=>(u._sqlite3_column_name=le.W)(s,c),u._sqlite3_column_text=(s,c)=>(u._sqlite3_column_text=le.X)(s,c),u._sqlite3_column_type=(s,c)=>(u._sqlite3_column_type=le.Y)(s,c),u._sqlite3_errmsg=s=>(u._sqlite3_errmsg=le.Z)(s),u._sqlite3_clear_bindings=s=>(u._sqlite3_clear_bindings=le._)(s),u._sqlite3_value_blob=s=>(u._sqlite3_value_blob=le.$)(s),u._sqlite3_value_bytes=s=>(u._sqlite3_value_bytes=le.aa)(s),u._sqlite3_value_double=s=>(u._sqlite3_value_double=le.ba)(s),u._sqlite3_value_int=s=>(u._sqlite3_value_int=le.ca)(s),u._sqlite3_value_type=s=>(u._sqlite3_value_type=le.da)(s),u._sqlite3_result_blob=(s,c,f,x)=>(u._sqlite3_result_blob=le.ea)(s,c,f,x),u._sqlite3_result_double=(s,c)=>(u._sqlite3_result_double=le.fa)(s,c),u._sqlite3_result_error=(s,c,f)=>(u._sqlite3_result_error=le.ga)(s,c,f),u._sqlite3_result_int=(s,c)=>(u._sqlite3_result_int=le.ha)(s,c),u._sqlite3_result_int64=(s,c)=>(u._sqlite3_result_int64=le.ia)(s,c),u._sqlite3_result_null=s=>(u._sqlite3_result_null=le.ja)(s),u._sqlite3_result_text=(s,c,f,x)=>(u._sqlite3_result_text=le.ka)(s,c,f,x),u._sqlite3_aggregate_context=(s,c)=>(u._sqlite3_aggregate_context=le.la)(s,c),u._sqlite3_column_count=s=>(u._sqlite3_column_count=le.ma)(s),u._sqlite3_data_count=s=>(u._sqlite3_data_count=le.na)(s),u._sqlite3_column_blob=(s,c)=>(u._sqlite3_column_blob=le.oa)(s,c),u._sqlite3_column_bytes=(s,c)=>(u._sqlite3_column_bytes=le.pa)(s,c),u._sqlite3_column_double=(s,c)=>(u._sqlite3_column_double=le.qa)(s,c),u._sqlite3_bind_blob=(s,c,f,x,I)=>(u._sqlite3_bind_blob=le.ra)(s,c,f,x,I),u._sqlite3_bind_double=(s,c,f)=>(u._sqlite3_bind_double=le.sa)(s,c,f),u._sqlite3_bind_int=(s,c,f)=>(u._sqlite3_bind_int=le.ta)(s,c,f),u._sqlite3_bind_text=(s,c,f,x,I)=>(u._sqlite3_bind_text=le.ua)(s,c,f,x,I),u._sqlite3_bind_parameter_index=(s,c)=>(u._sqlite3_bind_parameter_index=le.va)(s,c),u._sqlite3_sql=s=>(u._sqlite3_sql=le.wa)(s),u._sqlite3_normalized_sql=s=>(u._sqlite3_normalized_sql=le.xa)(s),u._sqlite3_changes=s=>(u._sqlite3_changes=le.ya)(s),u._sqlite3_close_v2=s=>(u._sqlite3_close_v2=le.za)(s),u._sqlite3_create_function_v2=(s,c,f,x,I,_,U,se,ye)=>(u._sqlite3_create_function_v2=le.Aa)(s,c,f,x,I,_,U,se,ye),u._sqlite3_update_hook=(s,c,f)=>(u._sqlite3_update_hook=le.Ba)(s,c,f),u._sqlite3_open=(s,c)=>(u._sqlite3_open=le.Ca)(s,c);var ys=u._malloc=s=>(ys=u._malloc=le.Da)(s),Ro=u._free=s=>(Ro=u._free=le.Ea)(s);u._RegisterExtensionFunctions=s=>(u._RegisterExtensionFunctions=le.Fa)(s);var bc=(s,c)=>(bc=le.Ga)(s,c),wc=(s,c)=>(wc=le.Ha)(s,c),xi=s=>(xi=le.Ia)(s),zn=s=>(zn=le.Ja)(s),vi=()=>(vi=le.Ka)();u.stackSave=()=>vi(),u.stackRestore=s=>xi(s),u.stackAlloc=s=>zn(s),u.cwrap=(s,c,f,x)=>{var I=!f||f.every(_=>_==="number"||_==="boolean");return c!=="string"&&I&&!x?u["_"+s]:(..._)=>Hh(s,c,f,_)},u.addFunction=yi,u.removeFunction=_n,u.UTF8ToString=Dn,u.ALLOC_NORMAL=No,u.allocate=Io,u.allocateUTF8OnStack=gs;function xs(){function s(){var I;if(u.calledRun=!0,!F){if(!u.noFSInit&&!Ue){var c,f;Ue=!0,x??(x=u.stdin),c??(c=u.stdout),f??(f=u.stderr),x?Pn("stdin",x):cs("/dev/tty","/dev/stdin"),c?Pn("stdout",null,c):cs("/dev/tty","/dev/stdout"),f?Pn("stderr",null,f):cs("/dev/tty1","/dev/stderr"),Rr("/dev/stdin",0),Rr("/dev/stdout",1),Rr("/dev/stderr",1)}if(le.N(),vo=!1,(I=u.onRuntimeInitialized)==null||I.call(u),u.postRun)for(typeof u.postRun=="function"&&(u.postRun=[u.postRun]);u.postRun.length;){var x=u.postRun.shift();at.unshift(x)}Te(at)}}if(0<W)V=xs;else{if(u.preRun)for(typeof u.preRun=="function"&&(u.preRun=[u.preRun]);u.preRun.length;)st();Te(Ft),0<W?V=xs:u.setStatus?(u.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>u.setStatus(""),1),s()},1)):s()}}if(u.preInit)for(typeof u.preInit=="function"&&(u.preInit=[u.preInit]);0<u.preInit.length;)u.preInit.pop()();return xs(),d}),n)};e.exports=r,e.exports.default=r})(Ih);var v0=Ih.exports;const b0=ep(v0),Rh="rawalite.db";let Qo=null,Ie=null,Ks;function w0(e){const t=atob(e),n=t.length,r=new Uint8Array(n);for(let i=0;i<n;i++)r[i]=t.charCodeAt(i);return r}function E0(e){let t="";for(let n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return btoa(t)}function S0(){Ks&&window.clearTimeout(Ks),Ks=window.setTimeout(()=>{if(!Ie)return;const e=Ie.export();localStorage.setItem(Rh,E0(e))},250)}function k0(){if(Ie){Ie.exec(`
    PRAGMA journal_mode = WAL;

    CREATE TABLE IF NOT EXISTS settings (
      id INTEGER PRIMARY KEY CHECK (id = 1),
      companyName TEXT, street TEXT, zip TEXT, city TEXT, 
      phone TEXT, email TEXT, website TEXT,
      taxId TEXT, vatId TEXT,
      kleinunternehmer INTEGER DEFAULT 1,
      bankName TEXT, bankAccount TEXT, bankBic TEXT,
      logo TEXT,
      designSettings TEXT,
      nextCustomerNumber INTEGER DEFAULT 1,
      nextOfferNumber INTEGER DEFAULT 1,
      nextInvoiceNumber INTEGER DEFAULT 1,
      nextTimesheetNumber INTEGER DEFAULT 1,
      createdAt TEXT, updatedAt TEXT
    );

    INSERT INTO settings (id, createdAt, updatedAt)
    SELECT 1, datetime('now'), datetime('now')
    WHERE NOT EXISTS (SELECT 1 FROM settings WHERE id = 1);
  `);try{const e=Ie.exec("PRAGMA table_info(settings)");let t=!1,n=!1;if(e.length>0&&e[0].values&&(t=e[0].values.some(r=>r[1]==="nextTimesheetNumber"),n=e[0].values.some(r=>r[1]==="designSettings")),t||(Ie.exec("ALTER TABLE settings ADD COLUMN nextTimesheetNumber INTEGER DEFAULT 1;"),console.log("✅ Added nextTimesheetNumber column to settings table")),!n){Ie.exec("ALTER TABLE settings ADD COLUMN designSettings TEXT;"),console.log("✅ Added designSettings column to settings table");const r=JSON.stringify({theme:"salbeigrün",navigationMode:"sidebar"});try{oe("UPDATE settings SET designSettings = ? WHERE id = 1 AND (designSettings IS NULL OR designSettings = '')",[r]),console.log("✅ Initialized default design settings in database")}catch(i){console.warn("⚠️ Could not initialize default design settings:",i)}}}catch(e){console.warn("⚠️ Settings table migration error:",e)}Ie.exec(`
    CREATE TABLE IF NOT EXISTS customers (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      number TEXT NOT NULL UNIQUE,
      name TEXT NOT NULL,
      email TEXT, phone TEXT,
      street TEXT, zip TEXT, city TEXT,
      notes TEXT,
      createdAt TEXT NOT NULL,
      updatedAt TEXT NOT NULL
    );

    CREATE INDEX IF NOT EXISTS idx_customers_name ON customers(name);
  `);try{const e=Ie.exec("PRAGMA table_info(packages)");let t=!1,n=!1;e.length>0&&e[0].values&&(n=!0,t=e[0].values.some(r=>r[1]==="language")),n?t&&Ie.exec(`
        CREATE TABLE packages_new (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          internalTitle TEXT NOT NULL,
          parentPackageId INTEGER REFERENCES packages(id) ON DELETE CASCADE,
          total REAL NOT NULL,
          addVat INTEGER DEFAULT 0,
          createdAt TEXT NOT NULL,
          updatedAt TEXT NOT NULL
        );
        
        INSERT INTO packages_new (id, internalTitle, parentPackageId, total, addVat, createdAt, updatedAt)
        SELECT id, internalTitle, parentPackageId, total, addVat, createdAt, updatedAt FROM packages;
        
        DROP TABLE packages;
        ALTER TABLE packages_new RENAME TO packages;
      `):Ie.exec(`
        CREATE TABLE packages (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          internalTitle TEXT NOT NULL,
          parentPackageId INTEGER REFERENCES packages(id) ON DELETE CASCADE,
          total REAL NOT NULL,
          addVat INTEGER DEFAULT 0,
          createdAt TEXT NOT NULL,
          updatedAt TEXT NOT NULL
        );
      `)}catch(e){console.warn("Package table migration error (creating fresh table):",e);try{Ie.exec("DROP TABLE IF EXISTS packages;"),Ie.exec(`
        CREATE TABLE packages (
          id INTEGER PRIMARY KEY AUTOINCREMENT,
          internalTitle TEXT NOT NULL,
          parentPackageId INTEGER REFERENCES packages(id) ON DELETE CASCADE,
          total REAL NOT NULL,
          addVat INTEGER DEFAULT 0,
          createdAt TEXT NOT NULL,
          updatedAt TEXT NOT NULL
        );
      `)}catch(t){console.error("Failed to recreate packages table:",t)}}Ie.exec(`
    CREATE TABLE IF NOT EXISTS package_line_items (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      packageId INTEGER NOT NULL REFERENCES packages(id) ON DELETE CASCADE,
      title TEXT NOT NULL,
      quantity INTEGER NOT NULL DEFAULT 1,
      amount REAL NOT NULL DEFAULT 0,
      parentItemId INTEGER REFERENCES package_line_items(id) ON DELETE CASCADE,
      description TEXT
    );

    CREATE INDEX IF NOT EXISTS idx_packages_parent ON packages(parentPackageId);
    CREATE INDEX IF NOT EXISTS idx_line_items_package ON package_line_items(packageId);

    CREATE TABLE IF NOT EXISTS offers (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      offerNumber TEXT NOT NULL UNIQUE,
      customerId INTEGER NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
      title TEXT NOT NULL,
      status TEXT NOT NULL DEFAULT 'draft',
      validUntil TEXT NOT NULL,
      subtotal REAL NOT NULL DEFAULT 0,
      vatRate REAL NOT NULL DEFAULT 19,
      vatAmount REAL NOT NULL DEFAULT 0,
      total REAL NOT NULL DEFAULT 0,
      notes TEXT,
      sentAt TEXT,
      acceptedAt TEXT,
      rejectedAt TEXT,
      createdAt TEXT NOT NULL,
      updatedAt TEXT NOT NULL
    );

    CREATE TABLE IF NOT EXISTS offer_line_items (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      offerId INTEGER NOT NULL REFERENCES offers(id) ON DELETE CASCADE,
      title TEXT NOT NULL,
      description TEXT,
      quantity INTEGER NOT NULL DEFAULT 1,
      unitPrice REAL NOT NULL DEFAULT 0,
      total REAL NOT NULL DEFAULT 0,
      parentItemId INTEGER REFERENCES offer_line_items(id) ON DELETE CASCADE
    );

    CREATE TABLE IF NOT EXISTS invoices (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      invoiceNumber TEXT NOT NULL UNIQUE,
      customerId INTEGER NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
      offerId INTEGER REFERENCES offers(id) ON DELETE SET NULL,
      title TEXT NOT NULL,
      status TEXT NOT NULL DEFAULT 'draft',
      dueDate TEXT NOT NULL,
      subtotal REAL NOT NULL DEFAULT 0,
      vatRate REAL NOT NULL DEFAULT 19,
      vatAmount REAL NOT NULL DEFAULT 0,
      total REAL NOT NULL DEFAULT 0,
      notes TEXT,
      sentAt TEXT,
      paidAt TEXT,
      overdueAt TEXT,
      cancelledAt TEXT,
      createdAt TEXT NOT NULL,
      updatedAt TEXT NOT NULL
    );

    CREATE TABLE IF NOT EXISTS invoice_line_items (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      invoiceId INTEGER NOT NULL REFERENCES invoices(id) ON DELETE CASCADE,
      title TEXT NOT NULL,
      description TEXT,
      quantity INTEGER NOT NULL DEFAULT 1,
      unitPrice REAL NOT NULL DEFAULT 0,
      total REAL NOT NULL DEFAULT 0,
      parentItemId INTEGER REFERENCES invoice_line_items(id) ON DELETE CASCADE
    );

    CREATE INDEX IF NOT EXISTS idx_offers_customer ON offers(customerId);
    CREATE INDEX IF NOT EXISTS idx_offers_status ON offers(status);
    CREATE INDEX IF NOT EXISTS idx_invoices_customer ON invoices(customerId);
    CREATE INDEX IF NOT EXISTS idx_invoices_status ON invoices(status);
    CREATE INDEX IF NOT EXISTS idx_offer_items_offer ON offer_line_items(offerId);
    CREATE INDEX IF NOT EXISTS idx_invoice_items_invoice ON invoice_line_items(invoiceId);

    CREATE TABLE IF NOT EXISTS timesheets (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      timesheetNumber TEXT NOT NULL UNIQUE,
      customerId INTEGER NOT NULL REFERENCES customers(id) ON DELETE CASCADE,
      title TEXT NOT NULL,
      status TEXT NOT NULL DEFAULT 'draft',
      startDate TEXT NOT NULL,
      endDate TEXT NOT NULL,
      subtotal REAL NOT NULL DEFAULT 0,
      vatRate REAL NOT NULL DEFAULT 19,
      vatAmount REAL NOT NULL DEFAULT 0,
      total REAL NOT NULL DEFAULT 0,
      notes TEXT,
      sentAt TEXT,
      approvedAt TEXT,
      rejectedAt TEXT,
      createdAt TEXT NOT NULL,
      updatedAt TEXT NOT NULL
    );

    CREATE INDEX IF NOT EXISTS idx_timesheets_customer ON timesheets(customerId);
    CREATE INDEX IF NOT EXISTS idx_timesheets_status ON timesheets(status);
    CREATE INDEX IF NOT EXISTS idx_timesheets_dates ON timesheets(startDate, endDate);

    -- Activities und Timesheet-Activities
    CREATE TABLE IF NOT EXISTS activities (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      name TEXT NOT NULL UNIQUE,
      description TEXT,
      defaultHourlyRate REAL NOT NULL DEFAULT 0,
      isActive INTEGER NOT NULL DEFAULT 1,
      createdAt TEXT NOT NULL,
      updatedAt TEXT NOT NULL
    );

    CREATE INDEX IF NOT EXISTS idx_activities_name ON activities(name);
    CREATE INDEX IF NOT EXISTS idx_activities_active ON activities(isActive);

    CREATE TABLE IF NOT EXISTS timesheet_activities (
      id INTEGER PRIMARY KEY AUTOINCREMENT,
      timesheetId INTEGER NOT NULL REFERENCES timesheets(id) ON DELETE CASCADE,
      activityId INTEGER NOT NULL REFERENCES activities(id) ON DELETE CASCADE,
      hours REAL NOT NULL DEFAULT 0,
      hourlyRate REAL NOT NULL DEFAULT 0,
      total REAL NOT NULL DEFAULT 0,
      description TEXT,
      position TEXT
    );

    CREATE INDEX IF NOT EXISTS idx_timesheet_activities_timesheet ON timesheet_activities(timesheetId);
    CREATE INDEX IF NOT EXISTS idx_timesheet_activities_activity ON timesheet_activities(activityId);

    -- Add position column to existing timesheet_activities table (migration)
    -- This is safe to run multiple times as it will only add the column if it doesn't exist
    PRAGMA table_info(timesheet_activities);
  `);try{ce("PRAGMA table_info(timesheet_activities)").some(n=>n.name==="position")||(oe("ALTER TABLE timesheet_activities ADD COLUMN position TEXT"),console.log("Added position column to timesheet_activities table"))}catch(e){console.warn("Migration warning:",e)}try{if(!Ie){console.error("❌ No database connection for listPreferences migration");return}ce("PRAGMA table_info(settings)").some(n=>n.name==="listPreferences")?console.log("✅ listPreferences column already exists"):(console.log("🔄 Adding listPreferences column to settings table..."),oe("ALTER TABLE settings ADD COLUMN listPreferences TEXT DEFAULT '{}'"),oe("UPDATE settings SET listPreferences = '{}' WHERE id = 1 AND (listPreferences IS NULL OR listPreferences = '')"),console.log("✅ Added listPreferences column to settings table with defaults"))}catch(e){console.warn("⚠️ Migration warning (listPreferences):",e),console.warn("⚠️ App will continue but list preferences may not persist");try{Ie&&(Ie.exec("ALTER TABLE settings ADD COLUMN listPreferences TEXT DEFAULT '{}'"),console.log("✅ Alternative migration successful"))}catch(t){console.warn("⚠️ Alternative migration also failed:",t)}}}}async function Ke(){if(Ie)return Ie;Qo||(Qo=await b0({locateFile:n=>"./sql-wasm.wasm"}));const e=localStorage.getItem(Rh);Ie=e?new Qo.Database(w0(e)):new Qo.Database,k0();const t=Ie.exec.bind(Ie);return Ie.exec=(...n)=>{const r=t(...n),i=String(n[0]??"").toUpperCase();return/INSERT|UPDATE|DELETE|REPLACE|CREATE|DROP|ALTER/.test(i)&&S0(),r},Ie}function ce(e,t=[]){if(!Ie)throw new Error("DB not initialized");const n=Ie.prepare(e);try{n.bind(t);const r=[];for(;n.step();)r.push(n.getAsObject());return r}finally{n.free()}}function oe(e,t=[]){if(!Ie)throw new Error("DB not initialized");const n=Ie.prepare(e);try{n.bind(t),n.step()}finally{n.free()}}let Gs=!1;async function Ne(e){const t=await Ke();if(Gs)return console.warn("⚠️ Skipping nested transaction - executing directly within current transaction"),await e();Gs=!0,t.exec("BEGIN");try{const n=await e();return t.exec("COMMIT"),n}catch(n){throw t.exec("ROLLBACK"),n}finally{Gs=!1}}const nn={companyData:{name:"RawaLite",street:"",postalCode:"",city:"",phone:"",email:"",website:"",taxNumber:"",vatId:"",kleinunternehmer:!1,bankName:"",bankAccount:"",bankBic:"",logo:""},designSettings:{theme:"salbeigrün",navigationMode:"sidebar"},numberingCircles:[{id:"customers",name:"Kunden",prefix:"K-",digits:4,current:0,resetMode:"never"},{id:"offers",name:"Angebote",prefix:"AN-",digits:4,current:0,resetMode:"yearly"},{id:"invoices",name:"Rechnungen",prefix:"RE-",digits:4,current:0,resetMode:"yearly"},{id:"packages",name:"Pakete",prefix:"PAK-",digits:3,current:0,resetMode:"never"},{id:"timesheets",name:"Leistungsnachweise",prefix:"LN-",digits:4,current:0,resetMode:"yearly"}]};class Ju{mapSQLiteToCompanyData(t){return{name:t.companyName||"",street:t.street||"",postalCode:t.zip||"",city:t.city||"",phone:t.phone||"",email:t.email||"",website:t.website||"",taxNumber:t.taxId||"",vatId:t.vatId||"",kleinunternehmer:!!t.kleinunternehmer,bankName:t.bankName||"",bankAccount:t.bankAccount||"",bankBic:t.bankBic||"",logo:t.logo||""}}extractDesignSettings(t){try{if(t.designSettings&&typeof t.designSettings=="string")return JSON.parse(t.designSettings)}catch(n){console.warn("Error parsing design settings from database:",n)}return nn.designSettings}mapCompanyDataToSQLite(t){return{companyName:t.name??"",street:t.street??"",zip:t.postalCode??"",city:t.city??"",phone:t.phone??"",email:t.email??"",website:t.website??"",taxId:t.taxNumber??"",vatId:t.vatId??"",kleinunternehmer:t.kleinunternehmer?1:0,bankName:t.bankName??"",bankAccount:t.bankAccount??"",bankBic:t.bankBic??"",logo:t.logo??"",designSettings:t.designSettings??"{}"}}async getSettings(){await Ke();const n=ce("SELECT * FROM settings WHERE id = 1")[0];let r,i,a=!1;n?(r=this.mapSQLiteToCompanyData(n),i=this.extractDesignSettings(n),n.designSettings||(console.log("🔧 No design settings found in database - initializing defaults"),i=nn.designSettings,a=!0)):(console.log("🔧 No settings record found - creating initial settings"),r=nn.companyData,i=nn.designSettings,a=!0);let l;try{const p=localStorage.getItem("rawalite-numbering");p?l=JSON.parse(p):(l=nn.numberingCircles,localStorage.setItem("rawalite-numbering",JSON.stringify(l)),console.log("Initialized default numbering circles in localStorage"))}catch(p){console.warn("Error loading numbering circles from localStorage:",p),l=nn.numberingCircles;try{localStorage.setItem("rawalite-numbering",JSON.stringify(l))}catch(u){console.error("Could not save default numbering circles:",u)}}const d={companyData:r,numberingCircles:l,designSettings:i};if(a)try{console.log("💾 Saving initial design settings to SQLite:",i);const p={...r,designSettings:JSON.stringify(i)};await this.updateCompanyData(p),console.log("✅ Successfully initialized design settings in SQLite")}catch(p){console.error("❌ Could not save initial design settings:",p)}return d}async updateCompanyData(t){await Ne(async()=>{const n=this.mapCompanyDataToSQLite(t),r=new Date().toISOString(),i=[n.companyName??"",n.street??"",n.zip??"",n.city??"",n.phone??"",n.email??"",n.website??"",n.taxId??"",n.vatId??"",n.kleinunternehmer??0,n.bankName??"",n.bankAccount??"",n.bankBic??"",n.logo??"",n.designSettings??"{}",r];oe(`
        INSERT OR REPLACE INTO settings (
          id, companyName, street, zip, city, phone, email, website, 
          taxId, vatId, kleinunternehmer, bankName, bankAccount, bankBic, 
          logo, designSettings, updatedAt
        ) VALUES (
          1, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?
        )
      `,i)})}async updateNumberingCircles(t){try{localStorage.setItem("rawalite-numbering",JSON.stringify(t))}catch(n){throw console.error("Error saving numbering circles:",n),n}}async getNextNumber(t){const n=await this.getSettings(),r=n.numberingCircles.find(d=>d.id===t);if(!r)throw new Error(`Nummernkreis '${t}' nicht gefunden`);const i=new Date().getFullYear();let a=r.current+1;r.resetMode==="yearly"&&r.lastResetYear!==i&&(a=1);const l=n.numberingCircles.map(d=>d.id===t?{...d,current:a,lastResetYear:i}:d);return await this.updateNumberingCircles(l),`${r.prefix}${a.toString().padStart(r.digits,"0")}`}async updateLogoSettings(t){const n=await this.getSettings(),r={...n.designSettings,logoSettings:t},i={...n.companyData,designSettings:JSON.stringify(r)};await this.updateCompanyData(i)}async getLogoSettings(){return(await this.getSettings()).designSettings.logoSettings||{}}}const Gl=[{id:"salbeigrün",name:"Salbeigrün (Standard)",primary:"#4a5d5a",secondary:"#3a4d4a",accent:"#7dd3a0",gradient:"linear-gradient(160deg, #4a5d5a 0%, #3a4d4a 40%, #2f403d 100%)",description:"Beruhigendes Salbeigrün mit sanften Pastellakzenten"},{id:"himmelblau",name:"Himmelblau (Business)",primary:"#4a5b6b",secondary:"#3d4e5e",accent:"#87ceeb",gradient:"linear-gradient(160deg, #4a5b6b 0%, #3d4e5e 40%, #324151 100%)",description:"Sanftes Himmelblau für professionelle Eleganz"},{id:"lavendel",name:"Lavendel (Elegant)",primary:"#5a4d6b",secondary:"#4d405e",accent:"#b19cd9",gradient:"linear-gradient(160deg, #5a4d6b 0%, #4d405e 40%, #403351 100%)",description:"Elegantes Lavendel mit warmen Untertönen"},{id:"pfirsich",name:"Pfirsich (Warm)",primary:"#6b5a4d",secondary:"#5e4d40",accent:"#f4a28c",gradient:"linear-gradient(160deg, #6b5a4d 0%, #5e4d40 40%, #514033 100%)",description:"Warme Pfirsichtöne für gemütliche Atmosphäre"},{id:"rosé",name:"Rosé (Soft)",primary:"#6b4d5a",secondary:"#5e4050",accent:"#e6a8b8",gradient:"linear-gradient(160deg, #6b4d5a 0%, #5e4050 40%, #513343 100%)",description:"Sanfte Rosétöne für dezente Eleganz"},{id:"custom",name:"Custom Colors",primary:"#4a5d5a",secondary:"#3a4d4a",accent:"#7dd3a0",gradient:"linear-gradient(160deg, #4a5d5a 0%, #3a4d4a 40%, #2f403d 100%)",description:"Benutzerdefinierte Farbauswahl"}],Ql={primary:"#4a5d5a",secondary:"#3a4d4a",accent:"#7dd3a0"};function ec(e,t){const n=Gl.find(r=>r.id===e)||Gl[0];return e==="custom"&&t?{...n,primary:t.primary,secondary:t.secondary,accent:t.accent,gradient:`linear-gradient(160deg, ${t.primary} 0%, ${t.secondary} 40%, ${t.secondary} 100%)`}:n}function Yr(e,t){const n=ec(e,t),r=document.documentElement;r.style.setProperty("--theme-primary",n.primary),r.style.setProperty("--theme-secondary",n.secondary),r.style.setProperty("--theme-accent",n.accent),r.style.setProperty("--theme-gradient",n.gradient),r.setAttribute("data-theme",e)}function Zr(e){document.documentElement.setAttribute("data-nav-mode",e)}const Ah=k.createContext(null),Yo=new Ju;function T0({children:e}){const[t,n]=k.useState(nn),[r,i]=k.useState(!0),[a,l]=k.useState(null),d=async()=>{try{i(!0),console.log("🔄 Loading settings from SQLite...");const v=await Yo.getSettings();n(v),v.designSettings?(console.log("🎨 Applying persisted design settings:",v.designSettings),Yr(v.designSettings.theme,v.designSettings.customColors),Zr(v.designSettings.navigationMode)):(console.warn("⚠️ No persisted design settings found - applying defaults"),Yr("salbeigrün"),Zr("sidebar")),l(null),console.log("✅ Settings loaded and applied successfully")}catch(v){console.error("❌ Error loading settings from SQLite:",v),l("Fehler beim Laden der Einstellungen"),console.log("🎨 Applying fallback design settings due to error"),Yr("salbeigrün"),Zr("sidebar")}finally{i(!1)}};k.useEffect(()=>{d()},[]);const g={settings:t,loading:r,error:a,updateCompanyData:async v=>{try{i(!0),console.log("💾 Saving company data (including design settings)..."),await Yo.updateCompanyData(v),console.log("🔄 Refreshing settings after company data update..."),await d(),console.log("✅ Company data saved and settings refreshed")}catch(E){throw console.error("❌ Error saving company data:",E),l("Fehler beim Speichern der Unternehmensdaten"),E}},updateNumberingCircles:async v=>{try{i(!0),await Yo.updateNumberingCircles(v),await d(),l(null)}catch(E){throw console.error("Error saving numbering circles:",E),l("Fehler beim Speichern der Nummernkreise"),E}},getNextNumber:async v=>{try{const E=await Yo.getNextNumber(v);return await d(),E}catch(E){throw console.error("Error getting next number:",E),E}},refreshSettings:d};return o.jsx(Ah.Provider,{value:g,children:e})}function qt(){const e=k.useContext(Ah);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e}function kr(){var v,E,h;const{settings:e,loading:t,error:n,updateCompanyData:r}=qt(),[i,a]=k.useState(!1);k.useEffect(()=>{!t&&e.designSettings&&console.log("🔄 Design settings changed in useDesignSettings:",e.designSettings)},[e.designSettings,t]);const l=async(S,T)=>{var b;try{a(!0),console.log("🎨 Updating theme to:",S,T?"with custom colors":""),Yr(S,T);const y={...e,designSettings:{theme:S,navigationMode:((b=e.designSettings)==null?void 0:b.navigationMode)||"sidebar",customColors:T}};console.log("💾 Saving theme to database:",y.designSettings);const w={...e.companyData,designSettings:JSON.stringify(y.designSettings)};await r(w),console.log("✅ Theme successfully updated and saved")}catch(y){throw console.error("❌ Error updating theme:",y),e.designSettings&&(console.log("🔄 Rolling back theme due to error"),Yr(e.designSettings.theme,e.designSettings.customColors)),y}finally{a(!1)}},d=async S=>{var T,b;try{a(!0),console.log("🧭 Updating navigation mode to:",S),Zr(S);const y={...e,designSettings:{theme:((T=e.designSettings)==null?void 0:T.theme)||"salbeigrün",navigationMode:S,customColors:(b=e.designSettings)==null?void 0:b.customColors}};console.log("💾 Saving navigation mode to database:",y.designSettings);const w={...e.companyData,designSettings:JSON.stringify(y.designSettings)};await r(w),console.log("✅ Navigation mode successfully updated and saved")}catch(y){throw console.error("❌ Error updating navigation mode:",y),e.designSettings&&(console.log("🔄 Rolling back navigation mode due to error"),Zr(e.designSettings.navigationMode)),y}finally{a(!1)}},p=((v=e.designSettings)==null?void 0:v.theme)||"salbeigrün",u=((E=e.designSettings)==null?void 0:E.navigationMode)||"sidebar",m=(h=e.designSettings)==null?void 0:h.customColors,g=ec(p,m);return{designSettings:e.designSettings,currentTheme:p,currentNavigationMode:u,currentCustomColors:m,currentThemeDefinition:g,loading:t||i,error:n,updateTheme:l,updateNavigationMode:d}}const Lh=k.createContext({adapter:null,ready:!1});function ln(){const e=k.useContext(Lh);if(!e)throw new Error("usePersistence must be used within PersistenceProvider");return e}const Lr=new Ju;function Ln(){const[e,t]=k.useState(nn),[n,r]=k.useState(!0),[i,a]=k.useState(null);return k.useEffect(()=>{async function u(){try{r(!0);const m=await Lr.getSettings();t(m),a(null)}catch(m){console.error("Error loading settings from SQLite:",m),a("Fehler beim Laden der Einstellungen")}finally{r(!1)}}u()},[]),{settings:e,loading:n,error:i,updateCompanyData:async u=>{try{r(!0),await Lr.updateCompanyData(u);const m=await Lr.getSettings();t(m),a(null)}catch(m){throw console.error("Error saving company data:",m),a("Fehler beim Speichern der Unternehmensdaten"),m}finally{r(!1)}},updateNumberingCircles:async u=>{try{r(!0),await Lr.updateNumberingCircles(u),t(m=>({...m,numberingCircles:u})),a(null)}catch(m){throw console.error("Error saving numbering circles:",m),a("Fehler beim Speichern der Nummernkreise"),m}finally{r(!1)}},getNextNumber:async u=>{try{const m=await Lr.getNextNumber(u),g=await Lr.getSettings();return t(g),m}catch(m){console.error("Error getting next number:",m);const g=new Date().getFullYear(),v=Date.now().toString().slice(-4),h=`${u==="timesheets"?"LN-":"DOC-"}${g}-${v}`;return console.warn(`Using fallback number for ${u}: ${h}`),h}}}}class $i extends Error{constructor(t,n,r){super(t),this.code=n,this.originalError=r,this.name="AppError"}}class nt extends $i{constructor(t,n){super(t,"DATABASE_ERROR",n),this.name="DatabaseError"}}class ae extends $i{constructor(t,n){super(t,"VALIDATION_ERROR"),this.field=n,this.name="ValidationError"}}function be(e){return e instanceof $i?e:e instanceof Error?new $i(e.message,"UNKNOWN_ERROR",e):new $i(String(e),"UNKNOWN_ERROR",e)}function j0(e){switch(e.code){case"DATABASE_ERROR":return"Es gab ein Problem mit der Datenbank. Bitte versuchen Sie es erneut.";case"VALIDATION_ERROR":return e.message;case"SETTINGS_ERROR":return"Fehler beim Laden oder Speichern der Einstellungen.";default:return"Ein unerwarteter Fehler ist aufgetreten. Bitte versuchen Sie es erneut."}}function go(){const{adapter:e}=ln(),{getNextNumber:t}=Ln(),{settings:n}=qt(),[r,i]=k.useState([]),[a,l]=k.useState(!0),[d,p]=k.useState(null);async function u(){if(e){l(!0),p(null);try{const E=await e.listOffers();i(E)}catch(E){const h=be(E);p(h.message),console.error("Error loading offers:",h)}finally{l(!1)}}}k.useEffect(()=>{u()},[e]);async function m(E){var y,w;if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(!((y=E.title)!=null&&y.trim()))throw new ae("Angebots-Titel ist erforderlich","title");if(!E.customerId)throw new ae("Kunde ist erforderlich","customerId");if(!E.lineItems||E.lineItems.length===0)throw new ae("Mindestens eine Position ist erforderlich","lineItems");let h=0;E.lineItems.forEach((R,N)=>{var A;if(!((A=R.title)!=null&&A.trim()))throw new ae(`Titel für Position ${N+1} ist erforderlich`,`lineItems.${N}.title`);if(R.quantity<=0)throw new ae(`Menge für Position ${N+1} muss größer als 0 sein`,`lineItems.${N}.quantity`);if(R.unitPrice<0)throw new ae(`Preis für Position ${N+1} darf nicht negativ sein`,`lineItems.${N}.unitPrice`);const L=R.quantity*R.unitPrice;h+=L,R.total=L});const T=((w=n==null?void 0:n.companyData)==null?void 0:w.kleinunternehmer)||!1?0:h*(E.vatRate/100),b=h+T;p(null);try{let R;try{R=await t("offers")}catch(L){console.warn("Settings not available, using fallback numbering:",L);const A=new Date().getFullYear(),F=Date.now().toString().slice(-4);R=`AN-${A}-${F}`}const N=await e.createOffer({...E,offerNumber:R,subtotal:h,vatAmount:T,total:b});return await u(),N}catch(R){const N=be(R);throw p(N.message),console.error("Error creating offer:",N),N}}async function g(E,h){var S;if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(h.title!==void 0&&!h.title.trim())throw new ae("Angebots-Titel ist erforderlich","title");if(h.lineItems!==void 0){if(h.lineItems.length===0)throw new ae("Mindestens eine Position ist erforderlich","lineItems");let T=0;h.lineItems.forEach((N,L)=>{var F;if(!((F=N.title)!=null&&F.trim()))throw new ae(`Titel für Position ${L+1} ist erforderlich`,`lineItems.${L}.title`);if(N.quantity<=0)throw new ae(`Menge für Position ${L+1} muss größer als 0 sein`,`lineItems.${L}.quantity`);if(N.unitPrice<0)throw new ae(`Preis für Position ${L+1} darf nicht negativ sein`,`lineItems.${L}.unitPrice`);const A=N.quantity*N.unitPrice;T+=A,N.total=A});const b=((S=n==null?void 0:n.companyData)==null?void 0:S.kleinunternehmer)||!1,y=h.vatRate??19,w=b?0:T*(y/100),R=T+w;h.subtotal=T,h.vatAmount=w,h.total=R}p(null);try{const T=await e.updateOffer(E,h);return await u(),T}catch(T){const b=be(T);throw p(b.message),console.error("Error updating offer:",b),b}}async function v(E){if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");p(null);try{return await e.deleteOffer(E),await u(),!0}catch(h){const S=be(h);throw p(S.message),console.error("Error deleting offer:",S),S}}return{offers:r,loading:a,error:d,createOffer:m,updateOffer:g,deleteOffer:v,refresh:u}}function os(){const{adapter:e}=ln(),{getNextNumber:t}=Ln(),{settings:n}=qt(),[r,i]=k.useState([]),[a,l]=k.useState(!0),[d,p]=k.useState(null);async function u(){if(e){l(!0),p(null);try{const E=await e.listInvoices();i(E)}catch(E){const h=be(E);p(h.message),console.error("Error loading invoices:",h)}finally{l(!1)}}}k.useEffect(()=>{u()},[e]);async function m(E){var y,w,R;if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(!((y=E.title)!=null&&y.trim()))throw new ae("Rechnungs-Titel ist erforderlich","title");if(!E.customerId)throw new ae("Kunde ist erforderlich","customerId");if(!((w=E.dueDate)!=null&&w.trim()))throw new ae("Fälligkeitsdatum ist erforderlich","dueDate");if(!E.lineItems||E.lineItems.length===0)throw new ae("Mindestens eine Position ist erforderlich","lineItems");let h=0;E.lineItems.forEach((N,L)=>{var F;if(!((F=N.title)!=null&&F.trim()))throw new ae(`Titel für Position ${L+1} ist erforderlich`,`lineItems.${L}.title`);if(N.quantity<=0)throw new ae(`Menge für Position ${L+1} muss größer als 0 sein`,`lineItems.${L}.quantity`);if(N.unitPrice<0)throw new ae(`Preis für Position ${L+1} darf nicht negativ sein`,`lineItems.${L}.unitPrice`);const A=N.quantity*N.unitPrice;h+=A,N.total=A});const T=((R=n==null?void 0:n.companyData)==null?void 0:R.kleinunternehmer)||!1?0:h*(E.vatRate/100),b=h+T;p(null);try{let N;try{N=await t("invoices")}catch(A){console.warn("Settings not available, using fallback numbering:",A);const F=new Date().getFullYear(),B=Date.now().toString().slice(-4);N=`RE-${F}-${B}`}const L=await e.createInvoice({...E,invoiceNumber:N,subtotal:h,vatAmount:T,total:b});return await u(),L}catch(N){const L=be(N);throw p(L.message),console.error("Error creating invoice:",L),L}}async function g(E,h){var S;if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(h.title!==void 0&&!h.title.trim())throw new ae("Rechnungs-Titel ist erforderlich","title");if(h.lineItems!==void 0){if(h.lineItems.length===0)throw new ae("Mindestens eine Position ist erforderlich","lineItems");let T=0;h.lineItems.forEach((N,L)=>{var F;if(!((F=N.title)!=null&&F.trim()))throw new ae(`Titel für Position ${L+1} ist erforderlich`,`lineItems.${L}.title`);if(N.quantity<=0)throw new ae(`Menge für Position ${L+1} muss größer als 0 sein`,`lineItems.${L}.quantity`);if(N.unitPrice<0)throw new ae(`Preis für Position ${L+1} darf nicht negativ sein`,`lineItems.${L}.unitPrice`);const A=N.quantity*N.unitPrice;T+=A,N.total=A});const b=((S=n==null?void 0:n.companyData)==null?void 0:S.kleinunternehmer)||!1,y=h.vatRate??19,w=b?0:T*(y/100),R=T+w;h.subtotal=T,h.vatAmount=w,h.total=R}p(null);try{const T=await e.updateInvoice(E,h);return await u(),T}catch(T){const b=be(T);throw p(b.message),console.error("Error updating invoice:",b),b}}async function v(E){if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");p(null);try{return await e.deleteInvoice(E),await u(),!0}catch(h){const S=be(h);throw p(S.message),console.error("Error deleting invoice:",S),S}}return{invoices:r,loading:a,error:d,createInvoice:m,updateInvoice:g,deleteInvoice:v,refresh:u}}function tc(){const{adapter:e}=ln(),{getNextNumber:t}=Ln(),{settings:n}=qt(),[r,i]=k.useState([]),[a,l]=k.useState(!0),[d,p]=k.useState(null);async function u(){if(e){l(!0),p(null);try{const E=await e.listTimesheets();i(E)}catch(E){const h=be(E);p(h.message),console.error("Error loading timesheets:",h)}finally{l(!1)}}}k.useEffect(()=>{u()},[e]);async function m(E){var w,R,N;if(console.log("useTimesheets.createTimesheet: Starting with data:",E),!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(!((w=E.title)!=null&&w.trim()))throw new ae("Titel ist erforderlich","title");if(!E.customerId)throw new ae("Kunde ist erforderlich","customerId");if(!E.startDate)throw new ae("Startdatum ist erforderlich","startDate");if(!E.endDate)throw new ae("Enddatum ist erforderlich","endDate");if(new Date(E.endDate)<new Date(E.startDate))throw new ae("Enddatum muss nach dem Startdatum liegen","endDate");const h=((R=E.activities)==null?void 0:R.map((L,A)=>{if(!L.activityId)throw new ae(`Aktivität für Position ${A+1} ist erforderlich`,`activities.${A}.activityId`);if(L.hours<=0)throw new ae(`Stunden für Position ${A+1} müssen positiv sein`,`activities.${A}.hours`);if(L.hourlyRate<0)throw new ae(`Stundensatz für Position ${A+1} darf nicht negativ sein`,`activities.${A}.hourlyRate`);return{...L,total:L.hours*L.hourlyRate}}))||[],S=h.reduce((L,A)=>L+A.total,0),b=((N=n==null?void 0:n.companyData)==null?void 0:N.kleinunternehmer)||!1?0:S*(E.vatRate/100),y=S+b;console.log("useTimesheets.createTimesheet: Calculated totals - subtotal:",S,"vatAmount:",b,"total:",y),p(null);try{let L;try{console.log("useTimesheets.createTimesheet: Getting next number for timesheets"),L=await t("timesheets"),console.log("useTimesheets.createTimesheet: Generated timesheet number:",L)}catch(F){console.warn("Settings not available, using fallback numbering:",F);const B=new Date().getFullYear(),j=Date.now().toString().slice(-4);L=`LN-${B}-${j}`,console.log("useTimesheets.createTimesheet: Using fallback number:",L)}console.log("useTimesheets.createTimesheet: Creating timesheet in database...");const A=await e.createTimesheet({...E,activities:h,timesheetNumber:L,subtotal:S,vatAmount:b,total:y});return console.log("useTimesheets.createTimesheet: Successfully created timesheet:",A),await u(),A}catch(L){const A=be(L);throw p(A.message),console.error("Error creating timesheet:",A),A}}async function g(E,h){var S;if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(h.title!==void 0&&!h.title.trim())throw new ae("Leistungsnachweis-Titel ist erforderlich","title");if(h.startDate&&h.endDate&&new Date(h.endDate)<new Date(h.startDate))throw new ae("Enddatum muss nach dem Startdatum liegen","endDate");if(h.activities&&h.activities.length>0){const T=h.activities.map((L,A)=>{if(L.hours<0)throw new ae(`Stunden für Tätigkeit ${A+1} dürfen nicht negativ sein`,`activities.${A}.hours`);if(L.hourlyRate<0)throw new ae(`Stundensatz für Tätigkeit ${A+1} darf nicht negativ sein`,`activities.${A}.hourlyRate`);return{...L,total:L.hours*L.hourlyRate}}),b=T.reduce((L,A)=>L+A.total,0),y=((S=n==null?void 0:n.companyData)==null?void 0:S.kleinunternehmer)||!1,w=h.vatRate??19,R=y?0:b*(w/100),N=b+R;h.activities=T,h.subtotal=b,h.vatAmount=R,h.total=N}p(null);try{const T=await e.updateTimesheet(E,h);return await u(),T}catch(T){const b=be(T);throw p(b.message),console.error("Error updating timesheet:",b),b}}async function v(E){if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");p(null);try{return await e.deleteTimesheet(E),await u(),!0}catch(h){const S=be(h);throw p(S.message),console.error("Error deleting timesheet:",S),S}}return{timesheets:r,loading:a,error:d,createTimesheet:m,updateTimesheet:g,deleteTimesheet:v,refresh:u}}function qd(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function Tr(){const{adapter:e,ready:t,error:n}=ln(),{getNextNumber:r}=Ln(),[i,a]=k.useState([]),[l,d]=k.useState(!1),[p,u]=k.useState(null),m=async()=>{if(e){d(!0),u(null);try{const h=await e.listCustomers();a(h)}catch(h){const S=be(h);u(S.message),console.error("Error loading customers:",S)}finally{d(!1)}}};return k.useEffect(()=>{!t||!e||m()},[t,e]),{customers:i,loading:l,error:n||p,createCustomer:async h=>{var S;if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(!((S=h.name)!=null&&S.trim()))throw new ae("Kundenname ist erforderlich","name");if(h.email&&!qd(h.email))throw new ae("Ungültige E-Mail-Adresse","email");u(null);try{console.log("Creating customer...");let T;try{console.log("Getting next customer number..."),T=await r("customers"),console.log("Got customer number:",T)}catch(b){console.warn("Settings not available, using fallback numbering:",b),T=`K-${Date.now()}`}return console.log("Creating customer with data:",{...h,number:T}),await e.createCustomer({...h,number:T}),console.log("Customer created successfully, refreshing data..."),await m(),console.log("Data refreshed"),!0}catch(T){const b=be(T);throw u(b.message),console.error("Error creating customer:",b),b}},updateCustomer:async(h,S)=>{if(console.log("useCustomers updateCustomer called with:",h,S),!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(S.name!==void 0&&!S.name.trim())throw new ae("Kundenname ist erforderlich","name");if(S.email!==void 0&&S.email&&!qd(S.email))throw new ae("Ungültige E-Mail-Adresse","email");u(null);try{return console.log("Updating customer with adapter..."),await e.updateCustomer(h,S),console.log("Customer updated successfully"),await m(),!0}catch(T){console.error("Error in updateCustomer:",T);const b=be(T);throw u(b.message),console.error("Error updating customer:",b),b}},deleteCustomer:async h=>{if(console.log("useCustomers deleteCustomer called with:",h),!e)throw new nt("Datenbank-Adapter nicht verfügbar");u(null);try{return console.log("Deleting customer with adapter..."),await e.deleteCustomer(h),console.log("Customer deleted successfully"),await m(),!0}catch(S){console.error("Error in deleteCustomer:",S);const T=be(S);throw u(T.message),console.error("Error deleting customer:",T),T}},refresh:m}}function C0(){const{settings:e,loading:t}=qt(),{offers:n}=go(),{invoices:r}=os(),{timesheets:i}=tc(),{customers:a}=Tr(),l={totalCustomers:a.length,totalOffers:n.length,totalInvoices:r.length,totalTimesheets:i.length,pendingOffers:n.filter(g=>g.status==="draft").length,acceptedOffers:n.filter(g=>g.status==="accepted").length,paidInvoices:r.filter(g=>g.status==="paid").length,unpaidInvoices:r.filter(g=>g.status==="draft"||g.status==="sent"||g.status==="overdue").length,approvedTimesheets:i.filter(g=>g.status==="approved").length,pendingTimesheets:i.filter(g=>g.status==="draft"||g.status==="sent").length,totalOfferValue:n.reduce((g,v)=>g+v.total,0),totalInvoiceValue:r.reduce((g,v)=>g+v.total,0),paidAmount:r.filter(g=>g.status==="paid").reduce((g,v)=>g+v.total,0),unpaidAmount:r.filter(g=>g.status!=="paid").reduce((g,v)=>g+v.total,0),timesheetValue:i.reduce((g,v)=>g+v.total,0)},d=n.sort((g,v)=>new Date(v.createdAt).getTime()-new Date(g.createdAt).getTime()).slice(0,3),p=r.sort((g,v)=>new Date(v.createdAt).getTime()-new Date(g.createdAt).getTime()).slice(0,3),u=g=>{switch(g){case"paid":return"#22c55e";case"accepted":return"#22c55e";case"sent":return"#f59e0b";case"approved":return"#22c55e";case"draft":return"#6b7280";case"rejected":return"#ef4444";case"overdue":return"#ef4444";default:return"#6b7280"}},m=g=>{switch(g){case"paid":return"Bezahlt";case"accepted":return"Angenommen";case"sent":return"Versendet";case"approved":return"Genehmigt";case"draft":return"Entwurf";case"rejected":return"Abgelehnt";case"overdue":return"Überfällig";default:return g}};return o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px",marginTop:"20px"},children:[o.jsxs("div",{className:"sidebar-widget-card",style:{padding:"12px",backgroundColor:"rgba(255,255,255,0.06)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"linear-gradient(135deg, rgba(5, 150, 105, 0.3) 0%, rgba(16, 185, 129, 0.2) 100%)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[o.jsx("span",{style:{fontSize:"18px"},children:"�"}),o.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:"Angebote"})]}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"white",marginBottom:"4px"},children:l.totalOffers}),o.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.7)"},children:[l.pendingOffers," Entwürfe • ",l.acceptedOffers," Angenommen"]}),o.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",marginTop:"2px"},children:["Wert: ",l.totalOfferValue.toFixed(0)," €"]})]}),o.jsxs("div",{className:"sidebar-widget-card",style:{padding:"12px",backgroundColor:"rgba(255,255,255,0.06)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",background:"linear-gradient(135deg, rgba(220, 38, 38, 0.3) 0%, rgba(239, 68, 68, 0.2) 100%)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"6px"},children:[o.jsx("span",{style:{fontSize:"18px"},children:"🧾"}),o.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:"Rechnungen"})]}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"white",marginBottom:"4px"},children:l.totalInvoices}),o.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.7)"},children:[l.paidInvoices," Bezahlt • ",l.unpaidInvoices," Offen"]}),o.jsxs("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",marginTop:"2px"},children:["Wert: ",l.totalInvoiceValue.toFixed(0)," €"]})]}),o.jsxs("div",{className:"sidebar-widget-card",style:{padding:"12px",backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.08)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"18px"},children:"💰"}),o.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:"Finanzen"})]}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"6px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:"Bezahlt:"}),o.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#22c55e"},children:[l.paidAmount.toFixed(0)," €"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:"Offen:"}),o.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#f59e0b"},children:[l.unpaidAmount.toFixed(0)," €"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.7)"},children:"Leistungen:"}),o.jsxs("span",{style:{fontSize:"14px",fontWeight:"600",color:"#8b5cf6"},children:[l.timesheetValue.toFixed(0)," €"]})]})]})]}),o.jsxs("div",{className:"sidebar-widget-card",style:{padding:"12px",backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.08)"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"10px"},children:[o.jsx("span",{style:{fontSize:"18px"},children:"📊"}),o.jsx("span",{style:{fontSize:"14px",color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:"Letzte Aktivitäten"})]}),d.length>0&&o.jsxs("div",{style:{marginBottom:"10px"},children:[o.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontWeight:"500"},children:"Angebote:"}),d.map(g=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"11px",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[o.jsxs("span",{style:{color:"rgba(255,255,255,0.8)",fontWeight:"500"},children:["#",g.offerNumber]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsxs("span",{style:{color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:[g.total.toFixed(0),"€"]}),o.jsx("span",{style:{color:u(g.status),fontSize:"10px",fontWeight:"500"},children:m(g.status)})]})]},g.id))]}),p.length>0&&o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.6)",marginBottom:"6px",fontWeight:"500"},children:"Rechnungen:"}),p.map(g=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",fontSize:"11px",padding:"4px 0",borderBottom:"1px solid rgba(255,255,255,0.05)"},children:[o.jsxs("span",{style:{color:"rgba(255,255,255,0.8)",fontWeight:"500"},children:["#",g.invoiceNumber]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[o.jsxs("span",{style:{color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:[g.total.toFixed(0),"€"]}),o.jsx("span",{style:{color:u(g.status),fontSize:"10px",fontWeight:"500"},children:m(g.status)})]})]},g.id))]}),d.length===0&&p.length===0&&o.jsx("div",{style:{fontSize:"11px",color:"rgba(255,255,255,0.5)",fontStyle:"italic",textAlign:"center",padding:"8px 0"},children:"Noch keine Aktivitäten"})]})]})}const N0=""+new URL("rawalite-logo-CCh9TDwS.png",import.meta.url).href;function I0(){var i,a,l,d;const{settings:e,loading:t}=qt(),{currentNavigationMode:n}=kr(),r=[{to:"/",label:"Dashboard"},{to:"/kunden",label:"Kunden"},{to:"/pakete",label:"Pakete"},{to:"/angebote",label:"Angebote"},{to:"/rechnungen",label:"Rechnungen"},{to:"/leistungsnachweise",label:"Leistungsnachweise"},{to:"/einstellungen",label:"Einstellungen"}];return o.jsxs("aside",{className:`sidebar ${n==="header"?"sidebar-compact":""}`,children:[o.jsx("div",{style:{marginBottom:"20px"},children:o.jsx("div",{style:{width:"100%",textAlign:"center",padding:"16px 8px",marginBottom:"16px"},children:o.jsx("img",{src:N0,alt:"RawaLite",style:{width:"140px",height:"140px",objectFit:"contain",backgroundColor:"transparent",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},onError:p=>{var E;console.warn("🚨 RawaLite Logo ES6 import failed, trying production fallbacks...");const u=["/rawalite-logo.png","./assets/rawalite-logo.png","./rawalite-logo.png","https://raw.githubusercontent.com/MonaFP/RawaLite/main/rawalite-logo.png","https://github.com/MonaFP/RawaLite/raw/main/rawalite-logo.png","data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjgwIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPjx0ZXh0IHg9IjEwIiB5PSI0MCIgZm9udC1mYW1pbHk9IkFyaWFsIiBmb250LXNpemU9IjI0IiBmaWxsPSIjZmZmIj5SYXdhTGl0ZTwvdGV4dD48L3N2Zz4="],m=p.currentTarget;let g=m.dataset.fallbackIndex||"0";const v=parseInt(g)+1;if(v<u.length)console.warn(`🔄 Trying fallback ${v}: ${u[v]}`),m.dataset.fallbackIndex=v.toString(),m.src=u[v];else{console.error("❌ All logo fallbacks exhausted - using text fallback"),m.style.display="none";const h=document.createElement("div");h.textContent="RawaLite",h.style.cssText="font-size: 24px; font-weight: bold; color: white; text-align: center; padding: 10px;",(E=m.parentNode)==null||E.appendChild(h)}}})})}),n==="sidebar"&&o.jsx("ul",{className:"nav",children:r.map(p=>o.jsx("li",{children:o.jsx(Zu,{to:p.to,end:p.to==="/",children:p.label})},p.to))}),n==="header"&&o.jsxs("div",{style:{marginTop:"20px",padding:"16px 12px",backgroundColor:"rgba(255,255,255,0.04)",borderRadius:"12px",border:"1px solid rgba(255,255,255,0.08)"},children:[!t&&((i=e.companyData)!=null&&i.logo)?o.jsx("div",{style:{width:"100%",textAlign:"center",marginBottom:"12px"},children:o.jsx("img",{src:e.companyData.logo,alt:"Firmenlogo",style:{maxWidth:"100%",maxHeight:"60px",objectFit:"contain",borderRadius:"6px",filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},onError:p=>{console.error("Firmenlogo konnte nicht geladen werden"),p.currentTarget.style.display="none"}})}):o.jsxs("div",{className:"logo-placeholder",style:{width:"100%",textAlign:"center",marginBottom:"12px",padding:"16px 10px",backgroundColor:"rgba(255,255,255,0.02)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsx("div",{className:"placeholder-icon",style:{fontSize:"20px",marginBottom:"4px",opacity:.4},children:"⚪"}),o.jsx("div",{className:"placeholder-text",style:{fontSize:"10px",color:"rgba(255,255,255,0.4)",fontWeight:"normal"},children:"Kein Logo"})]}),o.jsx("div",{className:"company-name",style:{fontSize:"16px",color:!t&&((a=e.companyData)!=null&&a.name)?"rgba(255,255,255,0.95)":"rgba(255,255,255,0.6)",fontWeight:"600",textAlign:"center",fontStyle:!t&&((l=e.companyData)!=null&&l.name)?"normal":"italic"},children:!t&&((d=e.companyData)!=null&&d.name)?e.companyData.name:"[Ihr Firmenname]"})]}),n==="header"&&o.jsx(C0,{})]})}function R0(e={}){const[t,n]=k.useState("idle"),[r,i]=k.useState(null),[a,l]=k.useState(null),[d,p]=k.useState(null),[u,m]=k.useState(!1),[g,v]=k.useState(null);k.useEffect(()=>{var R;if(!((R=window.rawalite)!=null&&R.updater))return;const y=N=>{p(N)},w=window.rawalite.updater.onProgress(y);return()=>{w()}},[]),k.useEffect(()=>{var y;e.autoCheckOnStart&&((y=window.rawalite)!=null&&y.updater)&&E()},[e.autoCheckOnStart]);const E=k.useCallback(async()=>{var y;if(!((y=window.rawalite)!=null&&y.updater)){i("Updater nicht verfügbar"),n("error");return}n("checking"),i(null);try{const w=await window.rawalite.updater.check();w.ok&&w.hasUpdate&&w.target?(l(w.target),n("available")):n("not-available")}catch(w){console.error("Update check failed:",w),i(w instanceof Error?w.message:"Update-Prüfung fehlgeschlagen"),n("error")}},[]),h=k.useCallback(async()=>{var y,w;if(!((y=a==null?void 0:a.files)!=null&&y[0])||!((w=window.rawalite)!=null&&w.updater)){i("Kein Update verfügbar oder Updater nicht bereit"),n("error");return}n("downloading"),p(null),i(null);try{const R=a.files[0],N=await window.rawalite.updater.download(R.url);if(N!=null&&N.ok&&(N!=null&&N.file))v(N.file);else throw new Error((N==null?void 0:N.error)||"Download fehlgeschlagen");n("downloaded")}catch(R){console.error("Download failed:",R),i(R instanceof Error?R.message:"Download fehlgeschlagen"),n("error")}},[a]),S=k.useCallback(async()=>{var y;if(!g||!((y=window.rawalite)!=null&&y.updater)){i("Kein heruntergeladenes Update oder Updater nicht bereit"),n("error");return}n("installing"),m(!0),i(null);try{await window.rawalite.updater.install(g)}catch(w){console.error("Install failed:",w),i(w instanceof Error?w.message:"Installation fehlgeschlagen"),n("error"),m(!1)}},[g]);return[{state:t,error:r,updateInfo:a,progress:d,installInitiated:u},{checkForUpdates:E,startDownload:h,installAndRestart:S}]}function A0(){const[e,t]=k.useState(null),[n,r]=k.useState(!0),[i,a]=k.useState(null),l=k.useCallback(async()=>{var p;try{if(r(!0),a(null),!((p=window.rawalite)!=null&&p.version))throw new Error("Version API not available - running outside Electron?");const u=await window.rawalite.version.get();if(u.ok&&u.app&&u.electron&&u.chrome)t({app:u.app,electron:u.electron,chrome:u.chrome});else throw new Error("Incomplete version data received from API")}catch(u){const m=u instanceof Error?u.message:"Failed to fetch version information";console.error("[useVersion] Version fetch failed:",u),a(m),t(null)}finally{r(!1)}},[]),d=k.useCallback(async()=>{await l()},[l]);return k.useEffect(()=>{l()},[l]),{version:e,loading:n,error:i,refresh:d,appVersion:(e==null?void 0:e.app)||null}}function L0(){const{appVersion:e}=A0();return e}function D0(){var l,d,p,u,m;const{settings:e,loading:t}=qt(),{offers:n}=go(),{invoices:r}=os(),{timesheets:i}=tc(),a={totalOffers:n.length,pendingOffers:n.filter(g=>g.status==="draft").length,acceptedOffers:n.filter(g=>g.status==="accepted").length,totalInvoices:r.length,paidInvoices:r.filter(g=>g.status==="paid").length,unpaidInvoices:r.filter(g=>g.status==="draft"||g.status==="sent"||g.status==="overdue").length,totalTimesheets:i.length,approvedTimesheets:i.filter(g=>g.status==="approved").length,pendingTimesheets:i.filter(g=>g.status==="draft"||g.status==="sent").length,paidAmount:r.filter(g=>g.status==="paid").reduce((g,v)=>g+v.total,0),unpaidAmount:r.filter(g=>g.status!=="paid").reduce((g,v)=>g+v.total,0),timesheetValue:i.reduce((g,v)=>g+v.total,0)};return o.jsxs("div",{className:"header-widgets",style:{display:"flex",alignItems:"center",gap:"16px",fontSize:"13px",minHeight:"32px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",padding:"4px 12px",backgroundColor:"rgba(255,255,255,0.08)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.12)"},children:[!t&&((l=e.companyData)!=null&&l.logo)?o.jsx("img",{src:e.companyData.logo,alt:"Logo",style:{height:"24px",width:"auto",objectFit:"contain",borderRadius:"3px",filter:"drop-shadow(0 1px 3px rgba(0,0,0,0.3))"},onError:g=>{g.currentTarget.style.display="none"}}):o.jsx("div",{style:{width:"24px",height:"24px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"3px",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"12px",color:"rgba(255,255,255,0.4)"},children:"🏢"}),o.jsx("div",{style:{fontSize:"14px",color:!t&&((d=e.companyData)!=null&&d.name)?"rgba(255,255,255,0.95)":"rgba(255,255,255,0.6)",fontWeight:"600",whiteSpace:"nowrap",maxWidth:"120px",overflow:"hidden",textOverflow:"ellipsis",fontStyle:!t&&((p=e.companyData)!=null&&p.name)?"normal":"italic"},title:!t&&((u=e.companyData)!=null&&u.name)?e.companyData.name:"[Ihr Firmenname]",children:!t&&((m=e.companyData)!=null&&m.name)?e.companyData.name:"[Firmenname]"})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"center"},children:[o.jsxs("div",{className:"header-widget-item",style:{padding:"4px 8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap"},children:[o.jsx("span",{style:{fontSize:"12px"},children:"📋"}),o.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:a.totalOffers}),o.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.6)"},children:"Angebote"})]}),o.jsxs("div",{className:"header-widget-item",style:{padding:"4px 8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap"},children:[o.jsx("span",{style:{fontSize:"12px"},children:"🧾"}),o.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:a.totalInvoices}),o.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.6)"},children:"Rechnungen"})]}),o.jsxs("div",{className:"header-widget-item",style:{padding:"4px 8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",gap:"4px",whiteSpace:"nowrap"},children:[o.jsx("span",{style:{fontSize:"12px"},children:"⏰"}),o.jsx("span",{style:{fontSize:"12px",color:"rgba(255,255,255,0.9)",fontWeight:"600"},children:a.totalTimesheets}),o.jsx("span",{style:{fontSize:"10px",color:"rgba(255,255,255,0.6)"},children:"Leistungen"})]}),o.jsxs("div",{className:"header-widget-item",style:{padding:"4px 8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"4px",border:"1px solid rgba(255,255,255,0.1)",display:"flex",alignItems:"center",gap:"6px",whiteSpace:"nowrap"},children:[o.jsx("span",{style:{fontSize:"12px"},children:"💰"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:[o.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.9)",fontWeight:"600",lineHeight:"1"},children:[(a.paidAmount/1e3).toFixed(0),"k €"]}),o.jsx("div",{style:{fontSize:"8px",color:"rgba(255,255,255,0.5)",lineHeight:"1"},children:"bezahlt"})]}),a.unpaidAmount>0&&o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"1px"},children:[o.jsxs("div",{style:{fontSize:"10px",color:"rgba(255,255,255,0.9)",fontWeight:"600",lineHeight:"1"},children:[(a.unpaidAmount/1e3).toFixed(0),"k €"]}),o.jsx("div",{style:{fontSize:"8px",color:"rgba(255,255,255,0.5)",lineHeight:"1"},children:"offen"})]})]})]})]})}function Dh({title:e,right:t}={}){var S;const{pathname:n}=yn(),[r,i]=R0({autoCheckOnStart:!1}),{currentNavigationMode:a}=kr(),l=L0(),d=r.state==="checking",p=r.state==="downloading"||r.installInitiated,u=r.state==="available"||r.state==="downloaded",m=l?`v${l}`:"v1.0.0",g=async()=>{if(!(p||d))if(r.state==="available"){if(confirm("Update verfügbar! Jetzt herunterladen?"))try{await i.startDownload()}catch(T){console.error("Download failed:",T),alert("Download fehlgeschlagen: "+(T instanceof Error?T.message:String(T)))}}else if(r.state==="downloaded"){if(confirm("Update bereit zur Installation! App wird neu gestartet."))try{await i.installAndRestart()}catch(T){console.error("Install failed:",T),alert("Installation fehlgeschlagen: "+(T instanceof Error?T.message:String(T)))}}else try{console.log("[Header] Starting update check..."),await i.checkForUpdates(),await new Promise(b=>{let y=0;const w=50,R=()=>{y++,console.log(`[Header] Update check attempt ${y}, current state: ${r.state}`),r.state==="not-available"?(console.log("[Header] Update check completed - no update available"),alert("Sie verwenden bereits die neueste Version."),b()):r.state==="error"?(console.log("[Header] Update check failed with error state"),alert("Update-Prüfung fehlgeschlagen: "+(r.error||"Unbekannter Fehler")),b()):y>=w?(console.warn("[Header] Update check timeout - no state change detected"),alert("Update-Prüfung dauert ungewöhnlich lange. Bitte versuchen Sie es später erneut."),b()):r.state==="checking"?setTimeout(R,100):(console.log("[Header] Update check detected different state:",r.state),b())};R()})}catch(T){console.error("Update check failed:",T),alert("Update-Prüfung fehlgeschlagen: "+(T instanceof Error?T.message:String(T)))}},v=()=>r.state==="downloading"?"⬇️":r.installInitiated?"🔄":r.state==="checking"?"⏳":r.state==="available"?"🔔":r.state==="downloaded"?"✅":r.error?"⚠️":"🔍",E=()=>r.state==="available"||r.state==="downloaded"?"#22c55e":r.state==="checking"||r.state==="downloading"||r.installInitiated?"#f59e0b":r.error?"#ef4444":"#3b82f6",h=[{to:"/",label:"Dashboard"},{to:"/kunden",label:"Kunden"},{to:"/pakete",label:"Pakete"},{to:"/angebote",label:"Angebote"},{to:"/rechnungen",label:"Rechnungen"},{to:"/leistungsnachweise",label:"Leistungsnachweise"},{to:"/einstellungen",label:"Einstellungen"}];return o.jsxs("header",{className:"header",children:[a==="header"&&o.jsx("nav",{style:{display:"flex",gap:"6px"},children:h.map(T=>o.jsx(Zu,{to:T.to,end:T.to==="/",style:({isActive:b})=>({color:b?"white":"rgba(255,255,255,0.8)",textDecoration:"none",padding:"8px 12px",borderRadius:"6px",fontSize:"14px",fontWeight:b?"600":"500",background:b?"rgba(255,255,255,0.1)":"transparent",transition:"all 0.2s ease",border:b?"1px solid rgba(255,255,255,0.2)":"1px solid transparent"}),children:T.label},T.to))}),a==="sidebar"&&o.jsx(D0,{}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[t&&o.jsx("div",{className:"header-right",children:t}),o.jsxs("div",{style:{opacity:p||d?.6:1,cursor:p||d?"wait":"pointer",color:E(),fontWeight:u?"600":"500",transition:"all 0.2s ease",display:"flex",alignItems:"center",gap:"4px",padding:"4px 8px",borderRadius:"4px",backgroundColor:r.state==="available"||r.state==="downloaded"?"rgba(239, 68, 68, 0.15)":r.state==="checking"||r.state==="downloading"||r.installInitiated?"rgba(245, 158, 11, 0.15)":r.error?"rgba(239, 68, 68, 0.15)":"rgba(134, 239, 172, 0.2)",border:`1px solid ${r.state==="available"||r.state==="downloaded"?"rgba(239, 68, 68, 0.4)":r.state==="checking"||r.state==="downloading"||r.installInitiated?"rgba(245, 158, 11, 0.4)":r.error?"rgba(239, 68, 68, 0.4)":"rgba(134, 239, 172, 0.6)"}`,userSelect:"none"},onClick:g,title:r.state==="downloading"?`Update wird heruntergeladen... ${((S=r.progress)==null?void 0:S.percent)||0}%`:r.installInitiated?"Update wird installiert...":r.state==="checking"?"Prüfe nach Updates...":r.state==="available"?"Update verfügbar - Klicken zum Herunterladen":r.state==="downloaded"?"Update bereit - Klicken zum Installieren":r.error?`Fehler: ${r.error}`:"Klicken um nach Updates zu suchen",children:[v()," ",m]})]})]})}function nc(){const{adapter:e}=ln(),[t,n]=k.useState([]),[r,i]=k.useState(!0),[a,l]=k.useState(null);async function d(){if(e){i(!0),l(null);try{const g=await e.listPackages();n(g)}catch(g){const v=be(g);l(v.message),console.error("Error loading packages:",v)}finally{i(!1)}}}k.useEffect(()=>{d()},[e]);async function p(g){var E;if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(!((E=g.internalTitle)!=null&&E.trim()))throw new ae("Paket-Titel ist erforderlich","internalTitle");if(!g.lineItems||g.lineItems.length===0)throw new ae("Mindestens eine Position ist erforderlich","lineItems");g.lineItems.forEach((h,S)=>{var T;if(!((T=h.title)!=null&&T.trim()))throw new ae(`Titel für Position ${S+1} ist erforderlich`,`lineItems.${S}.title`);if(h.quantity<=0)throw new ae(`Menge für Position ${S+1} muss größer als 0 sein`,`lineItems.${S}.quantity`);if(h.amount<0)throw new ae(`Preis für Position ${S+1} darf nicht negativ sein`,`lineItems.${S}.amount`)});const v=g.lineItems.reduce((h,S)=>S.parentItemId?h:h+S.quantity*S.amount,0);l(null);try{const h=await e.createPackage({...g,total:v});return await d(),h}catch(h){const S=be(h);throw l(S.message),console.error("Error creating package:",S),S}}async function u(g,v){if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(v.internalTitle!==void 0&&!v.internalTitle.trim())throw new ae("Paket-Titel ist erforderlich","internalTitle");if(v.lineItems!==void 0){if(v.lineItems.length===0)throw new ae("Mindestens eine Position ist erforderlich","lineItems");v.lineItems.forEach((h,S)=>{var T;if(!((T=h.title)!=null&&T.trim()))throw new ae(`Titel für Position ${S+1} ist erforderlich`,`lineItems.${S}.title`);if(h.quantity<=0)throw new ae(`Menge für Position ${S+1} muss größer als 0 sein`,`lineItems.${S}.quantity`);if(h.amount<0)throw new ae(`Preis für Position ${S+1} darf nicht negativ sein`,`lineItems.${S}.amount`)});const E=v.lineItems.reduce((h,S)=>S.parentItemId?h:h+S.quantity*S.amount,0);v.total=E}l(null);try{const E=await e.updatePackage(g,v);return await d(),E}catch(E){const h=be(E);throw l(h.message),console.error("Error updating package:",h),h}}async function m(g){if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");l(null);try{return await e.deletePackage(g),await d(),!0}catch(v){const E=be(v);throw l(E.message),console.error("Error deleting package:",E),E}}return{packages:t,loading:r,error:a,createPackage:p,updatePackage:u,deletePackage:m,refresh:d}}const Qs=new Ju;function rc(){var E;const{settings:e}=Ln(),[t,n]=k.useState(!1),[r,i]=k.useState(0),[a,l]=k.useState(null),d=((E=e==null?void 0:e.designSettings)==null?void 0:E.logoSettings)||{};k.useEffect(()=>{async function h(){var S;if(d.filePath&&((S=window.rawalite)!=null&&S.logo))try{const T=await window.rawalite.logo.getUrl(d.filePath);l(T)}catch(T){console.warn("Error loading logo URL:",T),l(null)}else l(null)}h()},[d.filePath]);const p=k.useCallback(async h=>{var S;console.log("🖼️ [Logo] Starting upload:",h.file.name,h.file.type,h.file.size),n(!0),i(0);try{if(!((S=window.rawalite)!=null&&S.logo))return console.warn("Logo API not available - using fallback"),await u(h);i(25);const T=await window.rawalite.logo.upload({buffer:await h.file.arrayBuffer(),fileName:h.file.name,mimeType:h.file.type,maxWidth:h.maxWidth||800,maxHeight:h.maxHeight||600,quality:h.quality||.85});if(i(50),T.success&&T.metadata){const b={filePath:T.filePath,fileName:T.metadata.fileName,format:T.metadata.format,width:T.metadata.width,height:T.metadata.height,fileSize:T.metadata.fileSize,uploadedAt:new Date().toISOString()};return console.log("💾 [Logo] Saving metadata to settings:",b),await Qs.updateLogoSettings(b),i(100),console.log("✅ [Logo] Upload completed successfully"),T}else throw new Error(T.error||"Logo upload failed")}catch(T){return console.error("❌ [Logo] Upload failed:",T),{success:!1,error:T instanceof Error?T.message:"Unknown error"}}finally{n(!1),i(0)}},[]),u=k.useCallback(async h=>{try{i(25);const S=await P0(h.file);i(50);const T=await _0(h.file);i(75);const b={fileName:h.file.name,format:z0(h.file.type),width:T.width,height:T.height,fileSize:h.file.size,base64Data:S,uploadedAt:new Date().toISOString()};return await Qs.updateLogoSettings(b),i(100),console.log("✅ [Logo] Fallback upload completed successfully"),{success:!0,metadata:{fileName:b.fileName,format:b.format,width:b.width,height:b.height,fileSize:b.fileSize}}}catch(S){return console.error("❌ [Logo] Fallback upload failed:",S),{success:!1,error:S instanceof Error?S.message:"Unknown error"}}},[]),m=k.useCallback(async()=>{var h;if(a)return a;if(!d.filePath&&!d.base64Data)return null;try{if(d.filePath&&((h=window.rawalite)!=null&&h.logo)){const S=await window.rawalite.logo.getUrl(d.filePath);return l(S),S}if(d.base64Data&&d.format){const T=`data:${d.format==="svg"?"image/svg+xml":`image/${d.format}`};base64,${d.base64Data}`;return l(T),T}return null}catch(S){return console.error("❌ [Logo] Failed to get URL:",S),null}},[d,a]),g=k.useCallback(async()=>{var h;console.log("🗑️ [Logo] Removing logo...");try{if(d.filePath&&((h=window.rawalite)!=null&&h.logo))try{await window.rawalite.logo.delete(d.filePath)||console.warn("⚠️ [Logo] File deletion failed, but continuing with settings cleanup")}catch(S){console.warn("⚠️ [Logo] File deletion error:",S)}return await Qs.updateLogoSettings({}),l(null),console.log("✅ [Logo] Logo removed successfully"),!0}catch(S){return console.error("❌ [Logo] Failed to remove logo:",S),!1}},[d.filePath]),v=k.useCallback(async()=>{var h;if(!d.filePath&&!d.base64Data)return null;try{if(d.filePath&&((h=window.rawalite)!=null&&h.logo)){const S=await window.rawalite.logo.get(d.filePath);if(S)return`data:${d.format==="svg"?"image/svg+xml":`image/${d.format}`};base64,${S}`}return d.base64Data&&d.format?`data:${d.format==="svg"?"image/svg+xml":`image/${d.format}`};base64,${d.base64Data}`:null}catch(S){return console.error("❌ [Logo] Failed to get logo for PDF:",S),null}},[d]);return{logoSettings:d,isUploading:t,uploadProgress:r,logoUrl:a,uploadLogo:p,getLogoUrl:m,removeLogo:g,getLogoForPdf:v,hasLogo:!!(d.filePath||d.base64Data)}}async function P0(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{const a=r.result.split(",")[1];t(a)},r.onerror=n,r.readAsDataURL(e)})}async function _0(e){return new Promise(t=>{if(!e.type.startsWith("image/")){t({});return}const n=new Image;n.onload=()=>{t({width:n.naturalWidth,height:n.naturalHeight})},n.onerror=()=>{t({})},n.src=URL.createObjectURL(e)})}function z0(e){switch(e.toLowerCase()){case"image/svg+xml":return"svg";case"image/png":return"png";case"image/jpeg":case"image/jpg":return"jpeg";default:return"png"}}function F0({title:e="Dashboard"}){const{customers:t}=Tr(),{offers:n}=go(),{invoices:r}=os(),{packages:i}=nc();kr();const{settings:a}=qt(),{logoUrl:l,hasLogo:d,getLogoUrl:p}=rc();k.useEffect(()=>{async function h(){try{d&&await p()}catch(S){console.error("Error loading logo:",S)}}h()},[d,p]);const u={totalCustomers:t.length,totalOffers:n.length,totalInvoices:r.length,totalPackages:i.length,pendingOffers:n.filter(h=>h.status==="draft").length,acceptedOffers:n.filter(h=>h.status==="accepted").length,paidInvoices:r.filter(h=>h.status==="paid").length,unpaidInvoices:r.filter(h=>h.status==="draft"||h.status==="sent"||h.status==="overdue").length,totalOfferValue:n.reduce((h,S)=>h+S.total,0),totalInvoiceValue:r.reduce((h,S)=>h+S.total,0),paidAmount:r.filter(h=>h.status==="paid").reduce((h,S)=>h+S.total,0),unpaidAmount:r.filter(h=>h.status!=="paid").reduce((h,S)=>h+S.total,0)},m=n.sort((h,S)=>new Date(S.createdAt).getTime()-new Date(h.createdAt).getTime()).slice(0,5),g=r.sort((h,S)=>new Date(S.createdAt).getTime()-new Date(h.createdAt).getTime()).slice(0,5),v=h=>{switch(h){case"paid":return"#7dd3a0";case"accepted":return"#7dd3a0";case"sent":return"#f4c2a1";case"draft":return"#9fb8d3";case"rejected":return"#e6a8b8";case"overdue":return"#e6a8b8";case"cancelled":return"#b8b8c8";default:return"#b8b8c8"}},E=h=>{switch(h){case"paid":return"Bezahlt";case"accepted":return"Angenommen";case"sent":return"Versendet";case"draft":return"Entwurf";case"rejected":return"Abgelehnt";case"overdue":return"Überfällig";case"cancelled":return"Storniert";default:return h}};return o.jsxs("div",{className:"card",children:[(l||a.companyData.name!=="RawaLite")&&o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px",padding:"16px",backgroundColor:"rgba(255,255,255,0.05)",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px"},children:[l&&o.jsx("div",{style:{flexShrink:0,width:"80px",height:"80px",display:"flex",alignItems:"center",justifyContent:"center",padding:"8px",backgroundColor:"rgba(255,255,255,0.1)",borderRadius:"8px"},children:o.jsx("img",{src:l,alt:"Firmenlogo",style:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}})}),o.jsxs("div",{style:{flex:1},children:[o.jsx("h3",{style:{margin:"0 0 8px 0",color:"var(--accent)",fontSize:"18px",fontWeight:"600"},children:a.companyData.name||"RawaLite"}),(a.companyData.street||a.companyData.city)&&o.jsxs("div",{style:{fontSize:"14px",opacity:.8,lineHeight:"1.4",color:"var(--foreground)"},children:[a.companyData.street&&o.jsx("div",{children:a.companyData.street}),(a.companyData.postalCode||a.companyData.city)&&o.jsxs("div",{children:[a.companyData.postalCode," ",a.companyData.city]})]})]})]}),o.jsx("h2",{style:{marginTop:0},children:e}),o.jsx("p",{children:"Willkommen in RaWaLite. Hier ist deine Übersicht:"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(220px,1fr))",gap:16,marginBottom:24},children:[o.jsx("div",{className:"card",style:{background:"linear-gradient(135deg, #9fb8d3 0%, #b5c9df 100%)"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2d3748"},children:u.totalCustomers}),o.jsx("div",{style:{opacity:.8,color:"#4a5568"},children:"Kunden"})]}),o.jsx("div",{style:{fontSize:"32px",opacity:.6,color:"#2d3748"},children:"👥"})]})}),o.jsxs("div",{className:"card",style:{background:"linear-gradient(135deg, #a8d5ba 0%, #b8e0c7 100%)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2d3748"},children:u.totalOffers}),o.jsx("div",{style:{opacity:.8,color:"#4a5568"},children:"Angebote"})]}),o.jsx("div",{style:{fontSize:"32px",opacity:.6,color:"#2d3748"},children:"📋"})]}),o.jsxs("div",{style:{marginTop:8,fontSize:"12px",opacity:.7,color:"#4a5568"},children:[u.pendingOffers," Entwürfe, ",u.acceptedOffers," Angenommen"]})]}),o.jsxs("div",{className:"card",style:{background:"linear-gradient(135deg, #f4c2a1 0%, #f7d4b8 100%)"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2d3748"},children:u.totalInvoices}),o.jsx("div",{style:{opacity:.8,color:"#4a5568"},children:"Rechnungen"})]}),o.jsx("div",{style:{fontSize:"32px",opacity:.6,color:"#2d3748"},children:"🧾"})]}),o.jsxs("div",{style:{marginTop:8,fontSize:"12px",opacity:.7,color:"#4a5568"},children:[u.paidInvoices," Bezahlt, ",u.unpaidInvoices," Offen"]})]}),o.jsx("div",{className:"card",style:{background:"linear-gradient(135deg, #d4b3e8 0%, #e0c4f0 100%)"},children:o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{fontSize:"24px",fontWeight:"600",color:"#2d3748"},children:u.totalPackages}),o.jsx("div",{style:{opacity:.8,color:"#4a5568"},children:"Pakete"})]}),o.jsx("div",{style:{fontSize:"32px",opacity:.6,color:"#2d3748"},children:"📦"})]})})]}),o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(300px,1fr))",gap:16,marginBottom:24},children:o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{marginTop:0},children:"💰 Finanzübersicht"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:8},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Angebotswert gesamt:"}),o.jsxs("span",{style:{fontWeight:"600"},children:[u.totalOfferValue.toFixed(2)," €"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Rechnungswert gesamt:"}),o.jsxs("span",{style:{fontWeight:"600"},children:[u.totalInvoiceValue.toFixed(2)," €"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#7dd3a0"},children:[o.jsx("span",{children:"Bezahlt:"}),o.jsxs("span",{style:{fontWeight:"600"},children:[u.paidAmount.toFixed(2)," €"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",color:"#f4c2a1"},children:[o.jsx("span",{children:"Offen:"}),o.jsxs("span",{style:{fontWeight:"600"},children:[u.unpaidAmount.toFixed(2)," €"]})]})]})]})}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit,minmax(400px,1fr))",gap:16},children:[o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{marginTop:0},children:"📋 Letzte Angebote"}),m.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:m.map(h=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255,255,255,0.03)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"500"},children:["#",h.offerNumber]}),o.jsx("div",{style:{fontSize:"12px",opacity:.7},children:new Date(h.createdAt).toLocaleDateString("de-DE")})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("div",{style:{fontWeight:"600"},children:[h.total.toFixed(2)," €"]}),o.jsx("div",{style:{fontSize:"12px",color:v(h.status),fontWeight:"500"},children:E(h.status)})]})]},h.id))}):o.jsx("p",{style:{opacity:.7,fontStyle:"italic"},children:"Noch keine Angebote vorhanden."})]}),o.jsxs("div",{className:"card",children:[o.jsx("h3",{style:{marginTop:0},children:"🧾 Letzte Rechnungen"}),g.length>0?o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:8},children:g.map(h=>o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"8px 12px",background:"rgba(255,255,255,0.03)",borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsxs("div",{children:[o.jsxs("div",{style:{fontWeight:"500"},children:["#",h.invoiceNumber]}),o.jsx("div",{style:{fontSize:"12px",opacity:.7},children:new Date(h.createdAt).toLocaleDateString("de-DE")})]}),o.jsxs("div",{style:{textAlign:"right"},children:[o.jsxs("div",{style:{fontWeight:"600"},children:[h.total.toFixed(2)," €"]}),o.jsx("div",{style:{fontSize:"12px",color:v(h.status),fontWeight:"500"},children:E(h.status)})]})]},h.id))}):o.jsx("p",{style:{opacity:.7,fontStyle:"italic"},children:"Noch keine Rechnungen vorhanden."})]})]})]})}function mo({columns:e,data:t,emptyMessage:n,expandableRows:r,sortable:i=!1,sortConfig:a,onSortChange:l,visibleColumns:d,onVisibleColumnsChange:p,pageSize:u=25,currentPage:m=1,onPageChange:g,showPagination:v=!1,showColumnToggle:E=!1}){const[h,S]=k.useState(new Set),[T,b]=k.useState(!1),y=C=>{const z=new Set(h);z.has(C)?z.delete(C):z.add(C),S(z)},w=k.useMemo(()=>d||e.map(C=>String(C.key)),[e,d]),R=k.useMemo(()=>e.filter(C=>w.includes(String(C.key))&&C.visible!==!1),[e,w]),N=k.useMemo(()=>a?[...t].sort((C,z)=>{const M=C[a.key],Y=z[a.key];if(M==null)return 1;if(Y==null)return-1;let he=0;return typeof M=="string"&&typeof Y=="string"?he=M.toLowerCase().localeCompare(Y.toLowerCase()):typeof M=="number"&&typeof Y=="number"?he=M-Y:he=String(M).localeCompare(String(Y)),a.direction==="desc"?-he:he}):t,[t,a]),L=k.useMemo(()=>{if(!v)return N;const C=(m-1)*u,z=C+u;return N.slice(C,z)},[N,m,u,v]),A=Math.ceil(N.length/u),F=C=>{if(!i||!l)return;const z=String(C);let M={key:z,direction:"asc"};a&&a.key===z&&(a.direction==="asc"?M={key:z,direction:"desc"}:M=null),l(M)},B=C=>{if(!p)return;const z=w.includes(C)?w.filter(M=>M!==C):[...w,C];p(z)},j=C=>!a||a.key!==String(C)?o.jsx("span",{style:{opacity:.3,marginLeft:"4px"},children:"↕"}):o.jsx("span",{style:{marginLeft:"4px"},children:a.direction==="asc"?"↑":"↓"});return o.jsxs("div",{className:"card",children:[E&&o.jsx("div",{style:{padding:"12px",borderBottom:"1px solid var(--border)"},children:o.jsxs("div",{style:{position:"relative",display:"inline-block"},children:[o.jsx("button",{onClick:()=>b(!T),style:{background:"var(--sidebar-green)",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Filter ⚙️"}),T&&o.jsx("div",{style:{position:"absolute",top:"100%",left:0,background:"white",border:"1px solid #ddd",borderRadius:"6px",padding:"12px",zIndex:1e3,minWidth:"220px",boxShadow:"0 4px 12px rgba(0,0,0,0.15)",maxHeight:"300px",overflowY:"auto"},children:e.map(C=>o.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"6px 0",cursor:"pointer",fontSize:"14px",color:"#374151",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:z=>z.currentTarget.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:z=>z.currentTarget.style.backgroundColor="transparent",children:[o.jsx("input",{type:"checkbox",checked:w.includes(String(C.key)),onChange:()=>B(String(C.key)),style:{marginRight:"8px",accentColor:"var(--primary)"}}),o.jsx("span",{style:{color:"#374151",fontWeight:"500"},children:C.header})]},String(C.key)))})]})}),o.jsxs("table",{className:"table",children:[o.jsx("thead",{children:o.jsxs("tr",{children:[r&&o.jsx("th",{style:{width:"40px"}}),R.map(C=>o.jsx("th",{style:{width:C.width,cursor:i&&C.sortable!==!1?"pointer":"default",userSelect:"none"},onClick:()=>i&&C.sortable!==!1&&F(C.key),children:o.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[C.header,i&&C.sortable!==!1&&j(C.key)]})},String(C.key)))]})}),o.jsx("tbody",{children:L.length===0?o.jsx("tr",{children:o.jsx("td",{colSpan:R.length+(r?1:0),style:{opacity:.8,padding:"16px 8px"},children:n??"Keine Einträge vorhanden."})}):L.map((C,z)=>o.jsxs(fa.Fragment,{children:[o.jsxs("tr",{children:[r&&o.jsx("td",{children:o.jsx("button",{onClick:()=>y(C.id),style:{background:"none",border:"none",color:"var(--foreground)",cursor:"pointer",padding:"4px 8px",fontSize:"14px",borderRadius:"4px",transition:"background-color 0.2s"},onMouseEnter:M=>M.currentTarget.style.backgroundColor="rgba(255,255,255,0.1)",onMouseLeave:M=>M.currentTarget.style.backgroundColor="transparent",children:h.has(C.id)?"▼":"▶"})}),R.map(M=>o.jsx("td",{children:M.render?M.render(C):String(C[M.key])},String(M.key)))]}),r&&h.has(C.id)&&o.jsx("tr",{children:o.jsx("td",{colSpan:R.length+1,style:{padding:0,border:"none"},children:r(C)})})]},z))})]}),v&&A>1&&o.jsxs("div",{style:{padding:"12px",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{fontSize:"14px",opacity:.7},children:[N.length," Einträge, Seite ",m," von ",A]}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{onClick:()=>g==null?void 0:g(m-1),disabled:m===1,style:{padding:"6px 12px",border:"1px solid var(--border)",background:m===1?"var(--muted)":"var(--background)",color:"var(--foreground)",cursor:m===1?"not-allowed":"pointer",borderRadius:"4px"},children:"← Zurück"}),o.jsx("button",{onClick:()=>g==null?void 0:g(m+1),disabled:m===A,style:{padding:"6px 12px",border:"1px solid var(--border)",background:m===A?"var(--muted)":"var(--background)",color:"var(--foreground)",cursor:m===A?"not-allowed":"pointer",borderRadius:"4px"},children:"Weiter →"})]})]})]})}function O0({value:e="",onSearch:t,placeholder:n="Suchen...",debounceMs:r=250,disabled:i=!1}){const[a,l]=k.useState(e),d=k.useCallback(()=>{const u=a.trim();t(u)},[a,t]);k.useEffect(()=>{const u=setTimeout(d,r);return()=>clearTimeout(u)},[d,r]),k.useEffect(()=>{l(e)},[e]);const p=()=>{l(""),t("")};return o.jsxs("div",{style:{position:"relative",display:"inline-block",minWidth:"300px"},children:[o.jsx("input",{type:"text",value:a,onChange:u=>l(u.target.value),placeholder:n,disabled:i,style:{width:"100%",padding:"8px 36px 8px 12px",border:"1px solid var(--border)",borderRadius:"4px",fontSize:"14px",background:"var(--background)",color:"var(--foreground)",outline:"none"},onFocus:u=>u.target.style.borderColor="var(--primary)",onBlur:u=>u.target.style.borderColor="var(--border)"}),o.jsx("div",{style:{position:"absolute",right:"8px",top:"50%",transform:"translateY(-50%)",pointerEvents:"none",color:"var(--muted-foreground)",fontSize:"16px"},children:"🔍"}),a&&o.jsx("button",{onClick:p,style:{position:"absolute",right:"28px",top:"50%",transform:"translateY(-50%)",background:"none",border:"none",cursor:"pointer",color:"var(--muted-foreground)",fontSize:"16px",padding:"2px"},title:"Löschen",children:"✕"})]})}function M0({filters:e,onRemove:t,onClearAll:n}){return e.length===0?null:o.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"8px",alignItems:"center",margin:"8px 0"},children:[o.jsx("span",{style:{fontSize:"14px",opacity:.7,marginRight:"4px"},children:"Filter:"}),e.map(r=>o.jsxs("div",{style:{display:"flex",alignItems:"center",background:"#3b82f6",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"12px",gap:"6px"},children:[o.jsx("span",{children:r.label}),r.removable!==!1&&o.jsx("button",{onClick:()=>t(r.key),style:{background:"none",border:"none",color:"white",cursor:"pointer",fontSize:"10px",padding:"0 2px",borderRadius:"50%"},title:`${r.label} entfernen`,children:"✕"})]},r.key)),n&&e.length>1&&o.jsx("button",{onClick:n,style:{background:"none",border:"1px solid var(--border)",color:"var(--foreground)",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Alle entfernen"})]})}function B0({options:e,selected:t,onSelectionChange:n,label:r,disabled:i=!1,maxHeight:a=200}){const[l,d]=k.useState(!1),p=m=>{const g=t.includes(m)?t.filter(v=>v!==m):[...t,m];n(g)},u=t.map(m=>{var g;return(g=e.find(v=>v.value===m))==null?void 0:g.label}).filter(Boolean).join(", ");return o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{style:{fontSize:"14px",fontWeight:"500",color:"#374151",whiteSpace:"nowrap"},children:"Filter:"}),o.jsxs("div",{style:{position:"relative",display:"inline-block",minWidth:"150px"},children:[o.jsxs("button",{onClick:()=>!i&&d(!l),disabled:i,style:{width:"100%",padding:"8px 12px",border:"1px solid var(--border)",borderRadius:"4px",background:"var(--background)",color:"var(--foreground)",cursor:i?"not-allowed":"pointer",textAlign:"left",fontSize:"14px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("span",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:t.length>0?u:r}),o.jsxs("span",{style:{marginLeft:"8px",fontSize:"12px"},children:[t.length>0&&`(${t.length})`," ▼"]})]}),l&&o.jsxs("div",{style:{position:"absolute",top:"100%",left:0,right:0,background:"white",border:"1px solid #d1d5db",borderRadius:"6px",zIndex:1e3,maxHeight:`${a}px`,overflowY:"auto",boxShadow:"0 4px 12px rgba(0,0,0,0.15)"},children:[e.map(m=>o.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"8px 12px",cursor:"pointer",fontSize:"14px",borderBottom:"1px solid var(--border)"},onMouseEnter:g=>g.currentTarget.style.backgroundColor="#f3f4f6",onMouseLeave:g=>g.currentTarget.style.backgroundColor="transparent",children:[o.jsx("input",{type:"checkbox",checked:t.includes(m.value),onChange:()=>p(m.value),style:{marginRight:"8px"}}),o.jsx("span",{style:{flex:1},children:m.label}),m.count!==void 0&&o.jsxs("span",{style:{fontSize:"12px",opacity:.7,marginLeft:"8px"},children:["(",m.count,")"]})]},m.value)),e.length===0&&o.jsx("div",{style:{padding:"12px",fontSize:"14px",opacity:.7,textAlign:"center"},children:"Keine Optionen verfügbar"})]}),l&&o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:999},onClick:()=>d(!1)})]})]})}const Ph=k.createContext(void 0);function U0({children:e}){const[t,n]=k.useState([]),r=k.useCallback(p=>{n(u=>u.filter(m=>m.id!==p))},[]),i=k.useCallback((p,u,m=5e3)=>{const g=Date.now().toString(),v={id:g,type:p,message:u,duration:m};n(E=>[...E,v]),m>0&&setTimeout(()=>r(g),m)},[r]),a=k.useCallback(p=>{const u=typeof p=="string"?p:j0(p);i("error",u)},[i]),l=k.useCallback(p=>{i("success",p)},[i]),d=k.useCallback(p=>{i("info",p)},[i]);return o.jsx(Ph.Provider,{value:{notifications:t,showNotification:i,showError:a,showSuccess:l,showInfo:d,removeNotification:r},children:e})}function un(){const e=k.useContext(Ph);if(e===void 0)throw new Error("useNotifications must be used within a NotificationProvider");return e}function $0({notification:e,onRemove:t}){return o.jsx("div",{className:`notification-toast notification-${e.type}`,children:o.jsxs("div",{className:"notification-content",children:[o.jsx("span",{className:"notification-message",children:e.message}),o.jsx("button",{className:"notification-close",onClick:()=>t(e.id),"aria-label":"Schließen",children:"×"})]})})}function W0(){const{notifications:e,removeNotification:t}=un();return o.jsx("div",{className:"notification-container",children:e.map(n=>o.jsx($0,{notification:n,onRemove:t},n.id))})}const _h=k.createContext(void 0);function V0({children:e}){const[t,n]=k.useState(!1),[r,i]=k.useState(),a=(d,p)=>{n(d),i(p)},l=async(d,p)=>{a(!0,p);try{return await d()}finally{a(!1)}};return o.jsx(_h.Provider,{value:{isLoading:t,loadingMessage:r,setLoading:a,withLoading:l},children:e})}function jr(){const e=k.useContext(_h);if(e===void 0)throw new Error("useLoading must be used within a LoadingProvider");return e}function H0({message:e}){return o.jsxs("div",{className:"loading-container",children:[o.jsx("div",{className:"loading-spinner"}),e&&o.jsx("p",{className:"loading-message",children:e})]})}function q0(){const{isLoading:e,loadingMessage:t}=jr();return e?o.jsx("div",{className:"loading-overlay",children:o.jsx(H0,{message:t})}):null}function Xd({initial:e,onSubmit:t,onCancel:n,submitLabel:r="Speichern"}){const[i,a]=k.useState(e??{name:""}),[l,d]=k.useState({}),[p,u]=k.useState(!1),{showError:m,showSuccess:g}=un(),{withLoading:v}=jr();k.useEffect(()=>{a(e??{name:""}),d({})},[e]);function E(T,b){a(y=>({...y,[T]:b})),l[T]&&d(y=>({...y,[T]:""}))}function h(){const T={};return(!i.name||i.name.trim().length<2)&&(T.name="Bitte einen gültigen Namen angeben (min. 2 Zeichen)."),i.email&&i.email.trim()&&!/\S+@\S+\.\S+/.test(i.email)&&(T.email="Bitte eine gültige E-Mail-Adresse eingeben."),d(T),Object.keys(T).length===0}async function S(T){var y,w,R,N,L,A;if(T.preventDefault(),console.log("CustomerForm handleSubmit called"),!h()){console.log("Form validation failed");return}if(p){console.log("Already submitting, preventing double submission");return}const b={name:i.name.trim(),email:((y=i.email)==null?void 0:y.trim())||void 0,phone:((w=i.phone)==null?void 0:w.trim())||void 0,street:((R=i.street)==null?void 0:R.trim())||void 0,zip:((N=i.zip)==null?void 0:N.trim())||void 0,city:((L=i.city)==null?void 0:L.trim())||void 0,notes:((A=i.notes)==null?void 0:A.trim())||void 0};console.log("CustomerForm submitting data:",b);try{u(!0),console.log("Calling onSubmit with withLoading wrapper"),await v(async()=>{console.log("Inside withLoading, calling onSubmit"),await t(b),console.log("onSubmit completed successfully")},`${r}...`),g(`Kunde wurde erfolgreich ${r==="Speichern"?"gespeichert":"aktualisiert"}.`)}catch(F){console.error("Error in handleSubmit:",F);const B=be(F);B instanceof ae&&B.field?d(j=>({...j,[B.field]:B.message})):m(B)}finally{u(!1)}}return o.jsxs("form",{onSubmit:S,className:"customer-form",style:{display:"grid",gap:12,maxWidth:680},children:[o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"Name*"}),o.jsx("input",{type:"text",value:i.name,onChange:T=>E("name",T.target.value),placeholder:"Max Mustermann",required:!0,disabled:p,className:l.name?"error":""}),l.name&&o.jsx("span",{className:"field-error",children:l.name})]}),o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"E-Mail"}),o.jsx("input",{type:"email",value:i.email??"",onChange:T=>E("email",T.target.value),placeholder:"max@example.com",disabled:p,className:l.email?"error":""}),l.email&&o.jsx("span",{className:"field-error",children:l.email})]}),o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"Telefon"}),o.jsx("input",{type:"tel",value:i.phone??"",onChange:T=>E("phone",T.target.value),placeholder:"+49 30 12345678",disabled:p})]}),o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"Straße"}),o.jsx("input",{type:"text",value:i.street??"",onChange:T=>E("street",T.target.value),placeholder:"Musterstraße 123",disabled:p})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 2fr",gap:8},children:[o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"PLZ"}),o.jsx("input",{type:"text",value:i.zip??"",onChange:T=>E("zip",T.target.value),placeholder:"12345",disabled:p})]}),o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"Ort"}),o.jsx("input",{type:"text",value:i.city??"",onChange:T=>E("city",T.target.value),placeholder:"Berlin",disabled:p})]})]}),o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"Notizen"}),o.jsx("textarea",{value:i.notes??"",onChange:T=>E("notes",T.target.value),placeholder:"Weitere Informationen zum Kunden...",disabled:p,rows:3})]}),o.jsxs("div",{style:{display:"flex",gap:8,marginTop:"16px"},children:[o.jsx("button",{type:"submit",disabled:p,className:"btn btn-primary",style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",minWidth:"120px"},children:p?"Wird gespeichert...":r}),n&&o.jsx("button",{type:"button",onClick:n,disabled:p,className:"btn btn-secondary",style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",minWidth:"120px"},children:"Abbrechen"})]}),o.jsx("style",{children:`
        .customer-form input, .customer-form textarea { 
          background: rgba(255,255,255,.06); 
          color: white; 
          border: 1px solid rgba(255,255,255,.15); 
          padding: 10px 12px; 
          border-radius: 8px; 
          font-size: 14px;
          width: 100%;
          box-sizing: border-box;
          font-family: inherit;
        }
        .customer-form input:focus, .customer-form textarea:focus { 
          outline: 2px solid rgba(96,165,250,.5);
          background: rgba(255,255,255,.08);
        }
        .customer-form input.error, .customer-form textarea.error {
          border-color: rgba(239, 68, 68, 0.5);
          background: rgba(239, 68, 68, 0.1);
        }
        .customer-form input:disabled, .customer-form textarea:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        .customer-form label {
          font-weight: 500;
          margin-bottom: 4px;
          color: rgba(255,255,255,.9);
        }
        .field-error {
          color: rgba(239, 68, 68, 0.9);
          font-size: 0.8rem;
          margin-top: 4px;
        }
        .customer-form textarea {
          resize: vertical;
          min-height: 60px;
        }
      `})]})}const pa={customers:{sortBy:"name",sortDir:"asc",visibleColumns:["number","name","email","phone","city","createdAt"],pageSize:25,defaultFilters:{},lastSearch:""},packages:{sortBy:"createdAt",sortDir:"desc",visibleColumns:["internalTitle","total","addVat","createdAt"],pageSize:25,defaultFilters:{},lastSearch:""},offers:{sortBy:"createdAt",sortDir:"desc",visibleColumns:["offerNumber","customerId","title","status","validUntil","total","createdAt"],pageSize:25,defaultFilters:{},lastSearch:""},invoices:{sortBy:"createdAt",sortDir:"desc",visibleColumns:["invoiceNumber","customerId","title","status","dueDate","total","createdAt"],pageSize:25,defaultFilters:{},lastSearch:""},timesheets:{sortBy:"createdAt",sortDir:"desc",visibleColumns:["timesheetNumber","customerId","title","status","startDate","endDate","total","createdAt"],pageSize:25,defaultFilters:{},lastSearch:""}};function X0(e,t){return{...pa[e],...t}}function zh(e){const{adapter:t}=ln(),[n,r]=k.useState(pa[e]),[i,a]=k.useState(!0),[l,d]=k.useState(null),p=k.useCallback(async()=>{if(t){a(!0),d(null);try{const E=(await t.getListPreferences())[e],h=X0(e,E);r(h)}catch(v){const E=be(v);d(E.message),console.error(`Error loading preferences for ${e}:`,E),r(pa[e])}finally{a(!1)}}},[t,e]);k.useEffect(()=>{p()},[p]);const u=k.useCallback(async v=>{if(!t)throw new Error("Adapter not available");const E=n,h={...n,...v};r(h),d(null);try{await t.updateListPreference(e,v)}catch(S){r(E);const T=be(S);throw d(T.message),console.error(`Error updating preferences for ${e}:`,T),T}},[t,e,n]),m=k.useCallback(async()=>{const v=pa[e];await u(v)},[e,u]),g=k.useCallback(async()=>{if(!t)throw new Error("Adapter not available");try{await t.updateListPreference(e,n)}catch(v){const E=be(v);throw d(E.message),E}},[t,e,n]);return{preferences:n,loading:i,error:l,updatePreference:u,resetToDefaults:m,saveAsDefault:g}}class K0{static exportCustomersToCSV(t){const r=[["ID","Nummer","Name","E-Mail","Telefon","Straße","PLZ","Ort","Notizen","Erstellt","Aktualisiert"].join(";"),...t.map(i=>[i.id,i.number,i.name,i.email||"",i.phone||"",i.street||"",i.zip||"",i.city||"",i.notes||"",i.createdAt,i.updatedAt].map(a=>`"${String(a).replace(/"/g,'""')}"`).join(";"))].join(`
`);this.downloadFile(r,`kunden_${new Date().toISOString().split("T")[0]}.csv`,"text/csv")}static downloadFile(t,n,r){const i=new Blob([t],{type:r}),a=URL.createObjectURL(i),l=document.createElement("a");l.href=a,l.download=n,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(a)}}function G0({title:e="Kunden"}){const{customers:t,loading:n,error:r,createCustomer:i,updateCustomer:a,deleteCustomer:l}=Tr(),{preferences:d,updatePreference:p}=zh("customers"),[u,m]=k.useState("list"),[g,v]=k.useState(null),{showError:E,showSuccess:h}=un(),{withLoading:S}=jr(),[T,b]=k.useState(d.lastSearch||""),[y,w]=k.useState([]),[R,N]=k.useState(null),[L,A]=k.useState(d.sortBy?{key:d.sortBy,direction:d.sortDir||"asc"}:null),[F,B]=k.useState(1),j=k.useMemo(()=>{let Z=t;if(T.trim()){const $=T.toLowerCase();Z=Z.filter(Q=>{var fe,Te,at;return Q.name.toLowerCase().includes($)||((fe=Q.email)==null?void 0:fe.toLowerCase().includes($))||((Te=Q.phone)==null?void 0:Te.includes($))||((at=Q.city)==null?void 0:at.toLowerCase().includes($))||Q.number.toLowerCase().includes($)})}return y.length>0&&(Z=Z.filter($=>$.city&&y.includes($.city))),R!==null&&(Z=Z.filter($=>R?!!$.email:!$.email)),Z},[t,T,y,R]),C=k.useMemo(()=>{const Z=t.reduce(($,Q)=>(Q.city&&($[Q.city]=($[Q.city]||0)+1),$),{});return Object.entries(Z).sort(([$],[Q])=>$.localeCompare(Q)).map(([$,Q])=>({value:$,label:$,count:Q}))},[t]),z=k.useMemo(()=>{const Z=[];return T.trim()&&Z.push({key:"search",label:`Suche: "${T}"`,value:T}),y.forEach($=>{Z.push({key:`city-${$}`,label:`Ort: ${$}`,value:$})}),R!==null&&Z.push({key:"hasEmail",label:R?"Mit E-Mail":"Ohne E-Mail",value:R}),Z},[T,y,R]),M=k.useMemo(()=>{var $,Q,fe,Te,at,Ft;return[{key:"number",header:"Nummer",sortable:!0,visible:(($=d.visibleColumns)==null?void 0:$.includes("number"))!==!1},{key:"name",header:"Name",sortable:!0,visible:((Q=d.visibleColumns)==null?void 0:Q.includes("name"))!==!1},{key:"email",header:"E-Mail",sortable:!0,visible:((fe=d.visibleColumns)==null?void 0:fe.includes("email"))!==!1,render:st=>st.email||o.jsx("em",{style:{opacity:.6},children:"kein Eintrag"})},{key:"city",header:"Ort",sortable:!0,visible:((Te=d.visibleColumns)==null?void 0:Te.includes("city"))!==!1,render:st=>st.city||o.jsx("em",{style:{opacity:.6},children:"kein Eintrag"})},{key:"phone",header:"Telefon",sortable:!0,visible:((at=d.visibleColumns)==null?void 0:at.includes("phone"))!==!1,render:st=>st.phone||o.jsx("em",{style:{opacity:.6},children:"kein Eintrag"})},{key:"createdAt",header:"Erstellt",sortable:!0,visible:((Ft=d.visibleColumns)==null?void 0:Ft.includes("createdAt"))!==!1,render:st=>new Date(st.createdAt).toLocaleDateString("de-DE")},{key:"id",header:"Aktionen",sortable:!1,visible:!0,render:st=>o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"btn btn-secondary",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{v(st),m("edit")},disabled:n,children:"Bearbeiten"}),o.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{confirm("Diesen Kunden wirklich löschen?")&&me(st.id)},disabled:n,children:"Löschen"})]})}].filter(st=>st.visible)},[n,d.visibleColumns]);async function Y(Z){try{await i({name:Z.name,email:Z.email,phone:Z.phone,street:Z.street,zip:Z.zip,city:Z.city,notes:Z.notes}),m("list")}catch($){console.error("Error creating customer:",$)}}async function he(Z){if(g)try{await a(g.id,{name:Z.name,email:Z.email,phone:Z.phone,street:Z.street,zip:Z.zip,city:Z.city,notes:Z.notes}),m("list"),v(null)}catch($){console.error("Error updating customer:",$)}}async function me(Z){try{await S(()=>l(Z),"Kunde wird gelöscht..."),h("Kunde wurde erfolgreich gelöscht.")}catch($){const Q=be($);E(Q)}}async function ve(){try{await S(()=>Promise.resolve(K0.exportCustomersToCSV(j)),"CSV wird erstellt..."),h("CSV-Export wurde erfolgreich erstellt.")}catch(Z){const $=be(Z);E("Fehler beim CSV-Export: "+$.message)}}const G=Z=>{b(Z),B(1),p({lastSearch:Z})},O=Z=>{if(Z==="search")b(""),p({lastSearch:""});else if(Z.startsWith("city-")){const $=Z.replace("city-","");w(Q=>Q.filter(fe=>fe!==$))}else Z==="hasEmail"&&N(null);B(1)},W=()=>{b(""),w([]),N(null),B(1),p({lastSearch:""})},V=Z=>{A(Z),p(Z?{sortBy:Z.key,sortDir:Z.direction}:{sortBy:void 0,sortDir:void 0})},te=Z=>{p({visibleColumns:Z})},Se=Z=>{B(Z)};return n&&t.length===0?o.jsx("div",{className:"card",children:o.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[o.jsx("div",{className:"loading-spinner",style:{margin:"0 auto 1rem"}}),o.jsx("p",{children:"Kundendaten werden geladen..."})]})}):r&&t.length===0?o.jsx("div",{className:"card",children:o.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[o.jsxs("p",{style:{color:"rgba(239, 68, 68, 0.9)",marginBottom:"1rem"},children:["Fehler beim Laden der Kundendaten: ",r]}),o.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Seite neu laden"})]})}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:"0 0 4px 0"},children:e}),o.jsxs("div",{style:{opacity:.7},children:[j.length," von ",t.length," Kunden",j.length!==t.length&&" (gefiltert)"]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsxs("button",{className:"btn btn-success",onClick:ve,disabled:n||j.length===0,children:["CSV Export (",j.length,")"]}),o.jsx("button",{className:`btn ${u==="create"?"btn-secondary":"btn-primary"}`,onClick:()=>m(u==="create"?"list":"create"),disabled:n,children:u==="create"?"Abbrechen":"Neuer Kunde"})]})]}),o.jsxs("div",{style:{marginBottom:"16px",display:"flex",flexWrap:"wrap",gap:"12px",alignItems:"center"},children:[o.jsx(O0,{value:T,onSearch:G,placeholder:"Suche nach Name, E-Mail, Telefon, Ort oder Nummer...",disabled:n}),o.jsx(B0,{options:C,selected:y,onSelectionChange:w,label:"Orte filtern",disabled:n}),o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:()=>N(R===!0?null:!0),style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"4px",background:R===!0?"#3b82f6":"#f9fafb",color:R===!0?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:R===!0?"600":"400",transition:"all 0.2s ease"},children:"Mit E-Mail"}),o.jsx("button",{onClick:()=>N(R===!1?null:!1),style:{padding:"8px 12px",border:"1px solid #d1d5db",borderRadius:"4px",background:R===!1?"#3b82f6":"#f9fafb",color:R===!1?"white":"#374151",cursor:"pointer",fontSize:"14px",fontWeight:R===!1?"600":"400",transition:"all 0.2s ease"},children:"Ohne E-Mail"})]})]}),o.jsx(M0,{filters:z,onRemove:O,onClearAll:z.length>1?W:void 0}),o.jsx(mo,{columns:M,data:j,emptyMessage:T||y.length>0||R!==null?"Keine Kunden entsprechen den Filterkriterien.":"Noch keine Kunden angelegt.",sortable:!0,sortConfig:L,onSortChange:V,visibleColumns:d.visibleColumns,onVisibleColumnsChange:te,showColumnToggle:!0,showPagination:j.length>(d.pageSize||25),pageSize:d.pageSize||25,currentPage:F,onPageChange:Se}),u==="create"&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(0,0,0,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Neuer Kunde"}),o.jsx("div",{style:{opacity:.7},children:"Erstelle einen neuen Kunden."})]}),o.jsx(Xd,{onSubmit:Y,onCancel:()=>m("list"),submitLabel:"Erstellen"})]}),u==="edit"&&g&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(0,0,0,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Kunde bearbeiten"}),o.jsxs("div",{style:{opacity:.7},children:["Bearbeite die Kundendaten von ",g.name,"."]})]}),o.jsx(Xd,{initial:{name:g.name,email:g.email||"",phone:g.phone||"",street:g.street||"",zip:g.zip||"",city:g.city||"",notes:g.notes||""},onSubmit:he,onCancel:()=>{m("list"),v(null)},submitLabel:"Aktualisieren"})]})]})}const Kd=({offer:e,customers:t,packages:n,onSave:r,onCancel:i,submitLabel:a="Erstellen"})=>{var Se,Z;const{adapter:l}=ln(),{settings:d}=Ln(),{showError:p,showSuccess:u}=un(),{withLoading:m}=jr(),[g,v]=k.useState(((Se=e==null?void 0:e.customerId)==null?void 0:Se.toString())||""),[E,h]=k.useState((e==null?void 0:e.title)||""),[S,T]=k.useState((e==null?void 0:e.notes)||""),[b,y]=k.useState(e!=null&&e.validUntil?new Date(e.validUntil).toISOString().split("T")[0]:""),[w,R]=k.useState((e==null?void 0:e.lineItems)||[]),[N,L]=k.useState((e==null?void 0:e.vatRate)||19),[A,F]=k.useState({}),[B,j]=k.useState(!1),C=((Z=d==null?void 0:d.companyData)==null?void 0:Z.kleinunternehmer)||!1,z=w.reduce(($,Q)=>$+Q.total,0),M=C?0:z*N/100,Y=z+M,he=()=>{const $={id:Date.now(),title:"",description:"",quantity:1,unitPrice:0,total:0,parentItemId:void 0};R([...w,$])},me=$=>{const Q={id:Date.now(),title:"",description:"",quantity:1,unitPrice:0,total:0,parentItemId:$};R([...w,Q])},ve=($,Q,fe)=>{R(Te=>Te.map(at=>{if(at.id===$){const Ft={...at,[Q]:fe};return(Q==="quantity"||Q==="unitPrice")&&(Ft.total=Ft.quantity*Ft.unitPrice),Ft}return at}))},G=$=>{R(Q=>Q.filter(fe=>fe.id!==$&&fe.parentItemId!==$))},O=async $=>{if(l)try{const Q=await l.getPackage($);if(!Q)return;const fe=Q.lineItems.map(Te=>({id:Date.now()+Math.random(),title:Te.title,description:Te.description,quantity:Te.quantity,unitPrice:Te.amount,total:Te.quantity*Te.amount,parentItemId:Te.parentItemId}));R([...w,...fe])}catch(Q){console.error("Error adding package:",Q)}};function W(){const $={};return g||($.customerId="Kunde ist erforderlich"),E!=null&&E.trim()||($.title="Angebots-Titel ist erforderlich"),w.length===0&&($.lineItems="Mindestens eine Position ist erforderlich"),w.forEach((Q,fe)=>{var Te;(Te=Q.title)!=null&&Te.trim()||($[`lineItem_${fe}_title`]=`Titel für Position ${fe+1} ist erforderlich`),Q.quantity<=0&&($[`lineItem_${fe}_quantity`]=`Menge für Position ${fe+1} muss größer als 0 sein`),Q.unitPrice<0&&($[`lineItem_${fe}_unitPrice`]=`Preis für Position ${fe+1} darf nicht negativ sein`)}),F($),Object.keys($).length===0}const V=async $=>{if($.preventDefault(),B)return;if(!g||!E.trim()){alert("❌ Pflichtfelder fehlen:\\n\\n"+(g?"":"• Bitte wählen Sie einen Kunden aus\\n")+(E.trim()?"":"• Bitte geben Sie einen Titel ein\\n"));return}if(!W())return;const Q={offerNumber:(e==null?void 0:e.offerNumber)||`AN-${Date.now()}`,customerId:parseInt(g),title:E.trim(),notes:S.trim(),validUntil:b,lineItems:w,subtotal:z,vatRate:N,vatAmount:M,total:Y,status:(e==null?void 0:e.status)||"draft"};try{j(!0),await m(()=>r(Q),`${a}...`),u(`Angebot wurde erfolgreich ${a==="Erstellen"?"erstellt":"aktualisiert"}.`)}catch(fe){const Te=be(fe);Te instanceof ae&&Te.field?F(at=>({...at,[Te.field]:Te.message})):p(Te)}finally{j(!1)}},te=w.filter($=>!$.parentItemId);return o.jsxs("div",{className:"card",style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{margin:"0 0 16px 0"},children:e?"Angebot bearbeiten":"Neues Angebot"}),o.jsxs("form",{onSubmit:V,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Kunde *"}),o.jsxs("select",{value:g,onChange:$=>{v($.target.value),A.customerId&&F(Q=>({...Q,customerId:""}))},style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)"},required:!0,disabled:B,className:A.customerId?"error":"",children:[o.jsx("option",{value:"",children:"Kunde auswählen"}),t.map($=>o.jsx("option",{value:$.id,children:$.name},$.id))]}),A.customerId&&o.jsx("div",{className:"field-error",children:A.customerId})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Gültig bis"}),o.jsx("input",{type:"date",value:b,onChange:$=>y($.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Titel *"}),o.jsx("input",{type:"text",value:E,onChange:$=>{h($.target.value),A.title&&F(Q=>({...Q,title:""}))},style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)"},required:!0,disabled:B,className:A.title?"error":""}),A.title&&o.jsx("div",{className:"field-error",children:A.title})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Anmerkungen"}),o.jsx("textarea",{value:S,onChange:$=>T($.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)",resize:"vertical"}})]}),o.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.1)",paddingTop:"16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0",fontSize:"16px",fontWeight:"600"},children:"Positionen"}),o.jsxs("select",{onChange:$=>{$.target.value&&(O(parseInt($.target.value)),$.target.value="")},style:{padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},disabled:B,children:[o.jsx("option",{value:"",children:"Paket hinzufügen"}),n.map($=>o.jsx("option",{value:$.id,children:$.internalTitle},$.id))]}),o.jsx("button",{type:"button",onClick:he,disabled:B,className:"btn btn-success",style:{fontSize:"14px",padding:"6px 12px"},children:"Position hinzufügen"})]}),A.lineItems&&o.jsx("div",{className:"field-error",style:{marginBottom:"12px"},children:A.lineItems}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:te.map($=>o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr auto",gap:"8px",alignItems:"start",padding:"12px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.4)"},children:[o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Titel",value:$.title,onChange:Q=>ve($.id,"title",Q.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px",marginBottom:"4px"}}),o.jsx("input",{type:"text",placeholder:"Beschreibung",value:$.description||"",onChange:Q=>ve($.id,"description",Q.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"}})]}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Menge",value:$.quantity,onChange:Q=>ve($.id,"quantity",parseFloat(Q.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Einzelpreis",value:$.unitPrice,onChange:Q=>ve($.id,"unitPrice",parseFloat(Q.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsxs("div",{style:{padding:"6px",fontSize:"14px",fontWeight:"500"},children:[$.total.toFixed(2)," €"]}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{type:"button",onClick:()=>me($.id),style:{backgroundColor:"var(--ok)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Sub"}),o.jsx("button",{type:"button",onClick:()=>G($.id),style:{backgroundColor:"var(--danger)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"✕"})]})]}),w.filter(Q=>Q.parentItemId===$.id).map(Q=>o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr auto",gap:"8px",alignItems:"start",padding:"12px",marginLeft:"24px",border:"1px solid rgba(96,165,250,.3)",borderLeft:"4px solid var(--accent)",borderRadius:"6px",background:"rgba(96,165,250,.1)",marginTop:"4px"},children:[o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Sub-Titel",value:Q.title,onChange:fe=>ve(Q.id,"title",fe.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px",marginBottom:"4px"}}),o.jsx("input",{type:"text",placeholder:"Sub-Beschreibung",value:Q.description||"",onChange:fe=>ve(Q.id,"description",fe.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"}})]}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Menge",value:Q.quantity,onChange:fe=>ve(Q.id,"quantity",parseFloat(fe.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Einzelpreis",value:Q.unitPrice,onChange:fe=>ve(Q.id,"unitPrice",parseFloat(fe.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsxs("div",{style:{padding:"6px",fontSize:"14px",fontWeight:"500"},children:[Q.total.toFixed(2)," €"]}),o.jsx("div",{children:o.jsx("button",{type:"button",onClick:()=>G(Q.id),style:{backgroundColor:"var(--danger)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"✕"})})]},Q.id))]},$.id))})]}),o.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.1)",paddingTop:"16px"},children:o.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:o.jsxs("div",{style:{width:"300px",display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Zwischensumme:"}),o.jsxs("span",{children:[z.toFixed(2)," €"]})]}),!C&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{children:"MwSt.:"}),o.jsx("input",{type:"number",value:N,onChange:$=>L(parseFloat($.target.value)||0),style:{width:"60px",padding:"4px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",max:"100",step:"0.1"}),o.jsx("span",{children:"%"})]}),o.jsxs("span",{children:[M.toFixed(2)," €"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid rgba(255,255,255,.1)",paddingTop:"8px"},children:[o.jsx("span",{children:"Gesamtbetrag:"}),o.jsxs("span",{children:[Y.toFixed(2)," €"]})]})]})})}),o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"16px"},children:[o.jsx("button",{type:"button",onClick:i,disabled:B,className:"btn btn-secondary",style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",minWidth:"120px"},children:"Abbrechen"}),o.jsx("button",{type:"submit",disabled:B,className:"btn btn-primary",style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",minWidth:"120px"},children:B?"Wird gespeichert...":a})]}),o.jsx("style",{children:`
          .field-error {
            color: rgba(239, 68, 68, 0.9);
            font-size: 0.8rem;
            margin-top: 4px;
          }
          .error {
            border-color: rgba(239, 68, 68, 0.5) !important;
            background: rgba(239, 68, 68, 0.1) !important;
          }
        `})]})]})};function Q0(e,t){const n=ec(e,t),r=`
    --pdf-theme-primary: ${n.primary};
    --pdf-theme-secondary: ${n.secondary};
    --pdf-theme-accent: ${n.accent};
    --pdf-theme-gradient: ${n.gradient};
    
    /* Derived colors for professional document styling */
    --pdf-company-name: ${n.primary};
    --pdf-document-title: ${n.primary};
    --pdf-table-header: ${n.primary};
    --pdf-table-border: ${Ys(n.primary,.3)};
    --pdf-accent-elements: ${n.accent};
    --pdf-total-highlight: ${n.primary};
    --pdf-info-labels: ${n.secondary};
  `,i=`
    /* Theme-aware company branding */
    .company-name {
      color: var(--pdf-company-name) !important;
    }
    
    /* Document title styling */
    .document-title {
      color: var(--pdf-document-title) !important;
    }
    
    /* Table header theming */
    .positions-table th,
    .activities-table th {
      background-color: ${Ys(n.primary,.1)} !important;
      color: var(--pdf-table-header) !important;
    }
    
    /* Border and line theming */
    .letterhead,
    .info-block,
    .notes-section,
    .business-footer {
      border-color: var(--pdf-table-border) !important;
    }
    
    .positions-table,
    .activities-table,
    .totals-table {
      border-color: var(--pdf-table-border) !important;
    }
    
    .positions-table th,
    .positions-table td,
    .activities-table th,
    .activities-table td {
      border-color: var(--pdf-table-border) !important;
    }
    
    /* Information labels */
    .info-label,
    .notes-title {
      color: var(--pdf-info-labels) !important;
    }
    
    /* Total amount highlighting */
    .total-final {
      border-color: var(--pdf-theme-primary) !important;
      color: var(--pdf-theme-primary) !important;
    }
    
    /* Accent elements */
    .sender-line {
      border-color: var(--pdf-table-border) !important;
    }
    
    /* Subtle background theming for sub-items */
    .sub-position {
      background-color: ${Ys(n.primary,.05)} !important;
    }
  `;return{themeId:e,theme:n,cssVariables:r.trim(),themeCSS:i.trim()}}function Ys(e,t){const n=e.replace("#",""),r=parseInt(n.substr(0,2),16),i=parseInt(n.substr(2,2),16),a=parseInt(n.substr(4,2),16);return`rgba(${r}, ${i}, ${a}, ${t})`}function Zs(e,t){return Q0(e,t)}class Ma{static async exportOfferToPDF(t,n,r,i=!1,a,l,d){var p,u;try{console.log(`📄 Exporting offer ${t.offerNumber} to PDF (preview: ${i})`);const m=a?Zs(a,l):null;console.log("🎨 Generated PDF theme data:",m);const g={templateType:"offer",data:{offer:t,customer:n,settings:r,currentDate:new Date().toLocaleDateString("de-DE"),logo:d},theme:m?{themeId:m.themeId,theme:m.theme,primary:m.theme.primary,secondary:m.theme.secondary,accent:m.theme.accent}:null,options:{filename:`Angebot_${t.offerNumber}_${n.name.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`,previewOnly:i,enablePDFA:!1,validateCompliance:!1}};console.log("🔄 Calling PDF generation via IPC (with logo:",!!d,")...",g);const v=await((u=(p=window.rawalite)==null?void 0:p.pdf)==null?void 0:u.generate(g));return console.log("📋 PDF generation result:",v),v!=null&&v.success?(console.log("✅ PDF generation successful:",v.filePath),i&&v.previewUrl&&console.log("🔍 Opening PDF preview..."),v):(console.error("❌ PDF generation failed:",v==null?void 0:v.error),v||{success:!1,error:"PDF generation failed - no result"})}catch(m){return console.error("PDF Service Error:",m),{success:!1,error:m instanceof Error?m.message:"Unknown PDF generation error"}}}static async exportInvoiceToPDF(t,n,r,i=!1,a,l,d){var p,u;try{console.log(`📄 Exporting invoice ${t.invoiceNumber} to PDF (preview: ${i})`);const m=a?Zs(a,l):null;console.log("🎨 Generated PDF theme data:",m);const g={templateType:"invoice",data:{invoice:t,customer:n,settings:r,currentDate:new Date().toLocaleDateString("de-DE"),logo:d},theme:m?{themeId:m.themeId,theme:m.theme,primary:m.theme.primary,secondary:m.theme.secondary,accent:m.theme.accent}:null,options:{filename:`Rechnung_${t.invoiceNumber}_${n.name.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`,previewOnly:i,enablePDFA:!1,validateCompliance:!1}};console.log("🔄 Calling PDF generation via IPC...",g);const v=await((u=(p=window.rawalite)==null?void 0:p.pdf)==null?void 0:u.generate(g));return console.log("📋 PDF generation result:",v),v!=null&&v.success?(console.log("✅ PDF generation successful:",v.filePath),i&&v.previewUrl&&console.log("🔍 Opening PDF preview..."),v):(console.error("❌ PDF generation failed:",v==null?void 0:v.error),v||{success:!1,error:"PDF generation failed - no result"})}catch(m){return console.error("PDF Service Error:",m),{success:!1,error:m instanceof Error?m.message:"Unknown PDF generation error"}}}static async exportTimesheetToPDF(t,n,r,i=!1,a,l){var d,p;try{console.log(`📄 Exporting timesheet ${t.timesheetNumber} to PDF (preview: ${i})`);const u=a?Zs(a,l):null;console.log("🎨 Generated PDF theme data:",u);const m={templateType:"timesheet",data:{timesheet:t,customer:n,settings:r,currentDate:new Date().toLocaleDateString("de-DE")},theme:u?{themeId:u.themeId,theme:u.theme,primary:u.theme.primary,secondary:u.theme.secondary,accent:u.theme.accent}:null,options:{filename:`Leistungsnachweis_${t.timesheetNumber}_${n.name.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`,previewOnly:i,enablePDFA:!1,validateCompliance:!1}};console.log("🔄 Calling PDF generation via IPC...",m);const g=await((p=(d=window.rawalite)==null?void 0:d.pdf)==null?void 0:p.generate(m));return console.log("📋 PDF generation result:",g),g!=null&&g.success?(console.log("✅ PDF generation successful:",g.filePath),i&&g.previewUrl&&console.log("🔍 Opening PDF preview..."),g):(console.error("❌ PDF generation failed:",g==null?void 0:g.error),g||{success:!1,error:"PDF generation failed - no result"})}catch(u){return console.error("PDF Service Error:",u),{success:!1,error:u instanceof Error?u.message:"Unknown PDF generation error"}}}static async getSystemStatus(){var t,n;try{return await((n=(t=window.rawalite)==null?void 0:t.pdf)==null?void 0:n.getStatus())||{electronAvailable:!1,ghostscriptAvailable:!1,veraPDFAvailable:!1,pdfa2bSupported:!1}}catch(r){return console.error("PDF Status Check Error:",r),{electronAvailable:!1,ghostscriptAvailable:!1,veraPDFAvailable:!1,pdfa2bSupported:!1}}}}function Y0({title:e="Angebote"}){const{offers:t,loading:n,error:r,createOffer:i,updateOffer:a,deleteOffer:l}=go(),{customers:d}=Tr(),{packages:p}=nc(),{preferences:u}=zh("offers"),{settings:m}=qt(),{currentTheme:g,currentCustomColors:v}=kr(),{showSuccess:E,showError:h}=un(),{getLogoForPdf:S}=rc(),[T,b]=k.useState("list"),[y,w]=k.useState(null),[R,N]=k.useState(u.lastSearch||""),[L,A]=k.useState([]),[F,B]=k.useState(u.sortBy?{key:u.sortBy,direction:u.sortDir||"asc"}:null),[j,C]=k.useState(1),z=k.useMemo(()=>[{key:"offerNumber",header:"Nummer"},{key:"customerId",header:"Kunde",render:O=>{const W=d.find(V=>V.id===O.customerId);return(W==null?void 0:W.name)||`Kunde #${O.customerId}`}},{key:"title",header:"Titel"},{key:"status",header:"Status",render:O=>{const W={draft:"#6b7280",sent:"#3b82f6",accepted:"#10b981",rejected:"#ef4444"},V={draft:"Entwurf",sent:"Versendet",accepted:"Angenommen",rejected:"Abgelehnt"},te=W[O.status]||"#6b7280",Se=V[O.status]||O.status;return o.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:te+"20",color:te},children:Se})}},{key:"total",header:"Gesamtbetrag",render:O=>`€${O.total.toFixed(2)}`},{key:"validUntil",header:"Gültig bis",render:O=>O.validUntil?new Date(O.validUntil).toLocaleDateString("de-DE"):"-"},{key:"id",header:"Aktionen",render:O=>o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{className:"btn btn-info",onClick:()=>G(O),style:{padding:"4px 8px",fontSize:"12px"},title:"PDF Vorschau anzeigen",children:"👁️ Vorschau"}),o.jsx("button",{className:"btn btn-warning",onClick:()=>ve(O),style:{padding:"4px 8px",fontSize:"12px"},title:"PDF herunterladen",children:"💾 PDF"}),o.jsx("button",{className:"btn btn-secondary",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{w(O),b("edit")},children:"Bearbeiten"}),o.jsxs("select",{value:O.status,onChange:W=>he(O.id,W.target.value),style:{padding:"4px 8px",fontSize:"12px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",cursor:"pointer"},children:[o.jsx("option",{value:"draft",children:"Entwurf"}),o.jsx("option",{value:"sent",children:"Gesendet"}),o.jsx("option",{value:"accepted",children:"Angenommen"}),o.jsx("option",{value:"rejected",children:"Abgelehnt"})]}),o.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{confirm("Dieses Angebot wirklich löschen?")&&me(O.id)},children:"Löschen"})]})}],[d]);async function M(O){await i(O),b("list")}async function Y(O){y&&(await a(y.id,O),b("list"),w(null))}async function he(O,W){try{const V=t.find($=>$.id===O);if(!V)return;const te=new Date().toISOString(),Se={};switch(W){case"sent":Se.sentAt=te;break;case"accepted":Se.acceptedAt=te;break;case"rejected":Se.rejectedAt=te;break}await a(O,{...V,status:W,...Se}),E(`Angebot-Status auf "${{draft:"Entwurf",sent:"Gesendet",accepted:"Angenommen",rejected:"Abgelehnt"}[W]}" geändert`)}catch{h("Fehler beim Ändern des Status")}}async function me(O){await l(O)}const ve=async O=>{const W=d.find(V=>V.id===O.customerId);if(!W){alert("Kunde nicht gefunden");return}try{console.log("🎯 Starting PDF export for offer:",O.offerNumber),console.log("🎨 Using theme:",g,v?"with custom colors":"");const V=await S();console.log("🖼️ [DEBUG] Logo data for PDF:",V?"Present":"None");const te=await Ma.exportOfferToPDF(O,W,m,!1,g,v,V);te.success?(console.log("✅ PDF export successful:",te.filePath),alert(`� PDF erfolgreich erstellt!

Datei: ${te.filePath}
Größe: ${Math.round((te.fileSize||0)/1024)} KB`)):(console.error("❌ PDF export failed:",te.error),alert(`❌ PDF-Export fehlgeschlagen:

${te.error}`))}catch(V){console.error("PDF Export failed:",V),alert("PDF Export fehlgeschlagen: "+(V instanceof Error?V.message:"Unbekannter Fehler"))}},G=async O=>{const W=d.find(V=>V.id===O.customerId);if(!W){alert("Kunde nicht gefunden");return}try{console.log("🔍 Starting PDF preview for offer:",O.offerNumber),console.log("🎨 Using theme:",g,v?"with custom colors":"");const V=await S();console.log("🖼️ [DEBUG PREVIEW] Logo data for PDF:",V?"Present":"None");const te=await Ma.exportOfferToPDF(O,W,m,!0,g,v,V);te.success?console.log("✅ PDF preview successful"):(console.error("❌ PDF preview failed:",te.error),alert(`❌ PDF-Vorschau fehlgeschlagen:

${te.error}`))}catch(V){console.error("PDF Preview failed:",V),alert("PDF Vorschau fehlgeschlagen: "+(V instanceof Error?V.message:"Unbekannter Fehler"))}};return n?o.jsx("div",{className:"card",children:"Lade Angebote..."}):r?o.jsxs("div",{className:"card",children:["Fehler: ",r]}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:"0 0 4px 0"},children:e}),o.jsx("div",{style:{opacity:.7},children:"Verwalte deine Angebote und exportiere sie als PDF."})]}),o.jsx("button",{className:`btn ${T==="create"?"btn-secondary":"btn-primary"}`,onClick:()=>b(T==="create"?"list":"create"),children:T==="create"?"Abbrechen":"Neues Angebot"})]}),o.jsx(mo,{columns:z,data:t,emptyMessage:"Noch keine Angebote erstellt."}),T==="create"&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Neues Angebot"}),o.jsx("div",{style:{opacity:.7},children:"Erstelle ein neues Angebot."})]}),o.jsx(Kd,{customers:d,packages:p,onSave:M,onCancel:()=>b("list"),submitLabel:"Erstellen"})]}),T==="edit"&&y&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Angebot bearbeiten"}),o.jsxs("div",{style:{opacity:.7},children:['Bearbeite das Angebot "',y.title,'".']})]}),o.jsx(Kd,{offer:y,customers:d,packages:p,onSave:Y,onCancel:()=>{b("list"),w(null)},submitLabel:"Aktualisieren"})]})]})}function Z0({}){const{adapter:e,ready:t,error:n}=ln(),[r,i]=k.useState([]),[a,l]=k.useState(!1),[d,p]=k.useState("");k.useEffect(()=>{if(!t||!e)return;let m=!0;return(async()=>{l(!0);try{const g=await e.listCustomers();m&&i(g)}finally{m&&l(!1)}})(),()=>{m=!1}},[t,e]);async function u(){if(!e)return;const m=d.trim();if(!m)return;const g=`K-${String(Date.now()).slice(-6)}`;await e.createCustomer({number:g,name:m});const v=await e.listCustomers();i(v),p("")}return o.jsxs("div",{className:"p-4 space-y-6",children:[o.jsx("header",{className:"flex items-center justify-between",children:o.jsx("h1",{className:"text-2xl font-semibold",children:"Angebot – Details"})}),!t&&o.jsx("div",{className:"text-sm text-gray-500",children:"Initialisiere Persistenz…"}),n&&o.jsxs("div",{className:"text-sm text-red-600",children:["Persistenzfehler: ",String(n)]}),o.jsxs("section",{className:"space-y-3",children:[o.jsx("h2",{className:"text-lg font-medium",children:"Schnell-Kunde anlegen"}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("input",{value:d,onChange:m=>p(m.target.value),placeholder:"Kundenname",className:"flex-1 px-3 py-2 border rounded"}),o.jsx("button",{onClick:u,disabled:!d.trim()||!e,className:"px-4 py-2 bg-blue-600 text-white rounded disabled:bg-gray-400",children:"Hinzufügen"})]})]}),o.jsxs("section",{className:"space-y-3",children:[o.jsxs("h2",{className:"text-lg font-medium",children:["Kunden (",r.length,")"]}),a?o.jsx("div",{className:"text-sm text-gray-500",children:"Lade Kunden…"}):o.jsx("div",{className:"grid gap-2",children:r.map(m=>o.jsxs("div",{className:"p-3 border rounded",children:[o.jsx("div",{className:"font-medium",children:m.name}),o.jsx("div",{className:"text-sm text-gray-600",children:m.number})]},m.id))})]})]})}function Gd({initial:e,onSubmit:t,onCancel:n,submitLabel:r="Speichern",packages:i=[]}){const[a,l]=k.useState(e??{internalTitle:"",lineItems:[],addVat:!1}),[d,p]=k.useState({title:"",quantity:1,amount:0,parentItemId:void 0,description:""}),[u,m]=k.useState(""),[g,v]=k.useState({}),[E,h]=k.useState(!1),{showError:S,showSuccess:T}=un(),{withLoading:b}=jr();function y(){var z;if(!d.title.trim()){m("Bitte einen Titel für die Position eingeben"),setTimeout(()=>{const M=document.querySelector('input[placeholder*="Position"]');M==null||M.focus()},100);return}m("");const j={title:d.title.trim(),quantity:d.quantity,amount:d.amount,parentItemId:d.parentItemId,description:((z=d.description)==null?void 0:z.trim())||void 0};l(M=>({...M,lineItems:[...M.lineItems,j]}));const C=d.parentItemId;p({title:"",quantity:1,amount:0,parentItemId:C,description:""}),setTimeout(()=>{const M=document.querySelector('input[placeholder*="Position"]');M==null||M.focus()},100)}function w(j){l(C=>({...C,lineItems:C.lineItems.filter((z,M)=>M!==j)}))}function R(j,C,z){l(M=>({...M,lineItems:M.lineItems.map((Y,he)=>he===j?{...Y,[C]:z}:Y)}))}function N(){const j={};return a.internalTitle.trim()||(j.internalTitle="Bitte einen internen Titel eingeben"),a.lineItems.length===0&&(j.lineItems="Bitte mindestens eine Position hinzufügen"),a.lineItems.forEach((C,z)=>{C.title.trim()||(j[`item_${z}_title`]="Titel ist erforderlich"),C.quantity<=0&&(j[`item_${z}_quantity`]="Menge muss größer als 0 sein"),C.amount<0&&(j[`item_${z}_amount`]="Betrag darf nicht negativ sein")}),v(j),Object.keys(j).length===0}const L=a.lineItems.reduce((j,C)=>C.parentItemId?j:j+C.quantity*C.amount,0);async function A(j){if(j.preventDefault(),!N()||E)return;const C={...a,internalTitle:a.internalTitle.trim()};try{h(!0),await b(()=>t(C),`${r}...`),T(`Paket wurde erfolgreich ${r==="Speichern"?"gespeichert":"aktualisiert"}.`)}catch(z){const M=be(z);M instanceof ae&&M.field?v(Y=>({...Y,[M.field]:M.message})):S(M)}finally{h(!1)}}const F=i.filter(j=>!j.parentPackageId),B=a.lineItems.length>0||F.length>0;return o.jsxs("form",{onSubmit:A,className:"package-form",style:{display:"grid",gap:16},children:[o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"Paket-Name*"}),o.jsx("input",{value:a.internalTitle,onChange:j=>{l(C=>({...C,internalTitle:j.target.value})),g.internalTitle&&v(C=>({...C,internalTitle:""}))},placeholder:"Webdesign-Paket",disabled:E,className:g.internalTitle?"error":""}),g.internalTitle&&o.jsx("span",{className:"field-error",children:g.internalTitle})]}),B&&o.jsxs("div",{style:{display:"grid",gap:6},children:[o.jsx("label",{children:"Als Subpaket zu (optional)"}),o.jsxs("select",{value:a.parentPackageId||"",onChange:j=>l(C=>({...C,parentPackageId:j.target.value?Number(j.target.value):void 0})),disabled:E,children:[o.jsx("option",{value:"",children:"-- Hauptpaket --"}),F.length>0?F.map(j=>o.jsx("option",{value:j.id,children:j.internalTitle},j.id)):o.jsx("option",{disabled:!0,style:{fontStyle:"italic",opacity:.7},children:"Speichere zuerst ein Hauptpaket, um Subpakete erstellen zu können"})]})]}),o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 12px 0"},children:"Leistungspositionen"}),g.lineItems&&o.jsx("div",{className:"field-error",style:{marginBottom:"12px"},children:g.lineItems}),a.lineItems.map((j,C)=>{const z=!!j.parentItemId;return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 120px auto",gap:8,alignItems:"center",padding:"8px 0",paddingLeft:z?"20px":"0",borderBottom:"1px solid rgba(255,255,255,.1)",borderLeft:z?"2px solid rgba(96,165,250,.5)":"none"},children:[o.jsxs("div",{children:[z&&o.jsx("span",{style:{opacity:.7,fontSize:"12px"},children:"↳ "}),o.jsx("input",{value:j.title,onChange:M=>R(C,"title",M.target.value),placeholder:z?"Sub-Position":"Hauptposition",disabled:E,className:g[`item_${C}_title`]?"error":""}),g[`item_${C}_title`]&&o.jsx("div",{className:"field-error",style:{fontSize:"10px"},children:g[`item_${C}_title`]}),z&&o.jsx("input",{value:j.description||"",onChange:M=>R(C,"description",M.target.value),placeholder:"Beschreibung (optional)",style:{marginTop:"4px",fontSize:"12px",opacity:.8},disabled:E})]}),o.jsx("input",{type:"number",value:j.quantity,onChange:M=>R(C,"quantity",Number(M.target.value)),style:{width:"60px"},min:"1",disabled:E,className:g[`item_${C}_quantity`]?"error":""}),o.jsx("input",{type:"number",value:j.amount,onChange:M=>R(C,"amount",Number(M.target.value)),placeholder:z?"0":"1000",step:"0.01",disabled:E,className:g[`item_${C}_amount`]?"error":""}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[!z&&o.jsx("button",{type:"button",onClick:()=>{p(M=>({...M,parentItemId:C,title:"",description:""})),setTimeout(()=>{const M=document.querySelector('input[placeholder*="Position"]');M==null||M.focus()},100)},disabled:E,style:{backgroundColor:"rgba(96,165,250,.8)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Sub-Item zu dieser Position hinzufügen",children:"+ Sub"}),o.jsx("button",{type:"button",onClick:()=>w(C),disabled:E,style:{backgroundColor:"rgba(239,68,68,.8)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"🗑️"})]})]},C)}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr auto 120px auto auto",gap:8,alignItems:"center",padding:"12px 0",borderTop:"2px solid rgba(96,165,250,.3)",marginTop:"8px"},children:[o.jsxs("div",{children:[a.lineItems.filter(j=>!j.parentItemId).length>0&&o.jsxs("select",{value:d.parentItemId||"",onChange:j=>p(C=>({...C,parentItemId:j.target.value?Number(j.target.value):void 0})),style:{marginBottom:"4px",width:"100%"},disabled:E,children:[o.jsx("option",{value:"",children:"-- Hauptposition --"}),a.lineItems.filter(j=>!j.parentItemId).map((j,C)=>o.jsxs("option",{value:C,children:["↳ Sub-Item zu: ",j.title]},C))]}),o.jsx("input",{value:d.title,onChange:j=>{p(C=>({...C,title:j.target.value})),u&&m("")},placeholder:d.parentItemId!==void 0?"Sub-Position...":"Neue Position...",style:{width:"100%",border:u?"1px solid #ff6b6b":"1px solid rgba(255,255,255,.15)"},disabled:E}),d.parentItemId!==void 0&&o.jsx("input",{value:d.description,onChange:j=>p(C=>({...C,description:j.target.value})),placeholder:"Beschreibung (optional)",style:{marginTop:"4px",fontSize:"12px",opacity:.8,width:"100%"},disabled:E}),u&&o.jsx("div",{className:"field-error",children:u})]}),o.jsx("input",{type:"number",value:d.quantity,onChange:j=>p(C=>({...C,quantity:Number(j.target.value)})),style:{width:"60px"},min:"1",disabled:E}),o.jsx("input",{type:"number",value:d.amount,onChange:j=>p(C=>({...C,amount:Number(j.target.value)})),placeholder:"0",step:"0.01",disabled:E}),d.parentItemId!==void 0&&o.jsx("button",{type:"button",onClick:()=>p(j=>({...j,parentItemId:void 0})),disabled:E,style:{backgroundColor:"rgba(156,163,175,.8)",color:"white",border:"none",padding:"8px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},title:"Zu Hauptposition wechseln",children:"Haupt"}),o.jsx("button",{type:"button",onClick:y,disabled:E,style:{backgroundColor:"rgba(34,197,94,.8)",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontSize:"14px",fontWeight:"500"},children:"+ Position hinzufügen"})]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",borderTop:"1px solid rgba(255,255,255,.2)",paddingTop:"12px"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:8},children:[o.jsx("input",{type:"checkbox",checked:a.addVat,onChange:j=>l(C=>({...C,addVat:j.target.checked})),disabled:E}),"MwSt. hinzufügen"]}),o.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold"},children:["Total: ",L.toFixed(2)," €",a.addVat&&o.jsx("span",{style:{fontSize:"12px",opacity:.8,display:"block"},children:"zzgl. MwSt."})]})]}),o.jsxs("div",{style:{display:"flex",gap:8,alignItems:"center"},children:[o.jsx("button",{type:"submit",disabled:E,className:"btn btn-primary",style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",minWidth:"120px"},children:E?"Wird gespeichert...":r}),n&&o.jsx("button",{type:"button",onClick:n,disabled:E,className:"btn btn-secondary",style:{padding:"12px 24px",fontSize:"14px",fontWeight:"500",minWidth:"120px"},children:"Abbrechen"})]}),o.jsx("style",{children:`
        .package-form input, 
        .package-form select { 
          background: rgba(255,255,255,.06); 
          color: white; 
          border: 1px solid rgba(255,255,255,.15); 
          padding: 10px 12px; 
          border-radius: 10px; 
          font-family: inherit;
        }
        
        .package-form select option {
          background: #1a1a1a;
          color: white;
          padding: 8px;
        }
        
        .package-form input:focus, 
        .package-form select:focus { 
          outline: 2px solid rgba(96,165,250,.5);
          background: rgba(255,255,255,.08);
        }
        
        .package-form input.error {
          border-color: rgba(239, 68, 68, 0.5);
          background: rgba(239, 68, 68, 0.1);
        }
        
        .package-form input:disabled, 
        .package-form select:disabled {
          opacity: 0.6;
          cursor: not-allowed;
        }
        
        .package-form label {
          font-weight: 500;
          color: rgba(255,255,255,.9);
        }
        
        .field-error {
          color: rgba(239, 68, 68, 0.9);
          font-size: 0.8rem;
          margin-top: 4px;
        }
        
        .package-form input[type="checkbox"] {
          width: auto;
          margin: 0;
        }
      `})]})}function J0({title:e="Pakete"}){const{packages:t,loading:n,error:r,createPackage:i,updatePackage:a,deletePackage:l}=nc(),[d,p]=k.useState("list"),[u,m]=k.useState(null),{showError:g,showSuccess:v}=un(),{withLoading:E}=jr();t.filter(y=>!y.parentPackageId),t.filter(y=>y.parentPackageId);const h=k.useMemo(()=>[{key:"internalTitle",header:"Bezeichnung"},{key:"total",header:"Preis",render:y=>`€${y.total.toFixed(2)}`},{key:"lineItems",header:"Positionen",render:y=>`${y.lineItems.length} Position(en)`},{key:"parentPackageId",header:"Typ",render:y=>y.parentPackageId?o.jsx("em",{style:{opacity:.7},children:"Subpaket"}):o.jsx("strong",{children:"Hauptpaket"})},{key:"id",header:"Aktionen",render:y=>o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"btn btn-secondary",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{m(y),p("edit")},disabled:n,children:"Bearbeiten"}),o.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{confirm("Dieses Paket wirklich löschen?")&&b(y.id)},disabled:n,children:"Löschen"})]})}],[n]);async function S(y){try{await i({internalTitle:y.internalTitle,lineItems:y.lineItems.map((w,R)=>({...w,id:R+1})),parentPackageId:y.parentPackageId,addVat:y.addVat}),p("list")}catch(w){console.error("Error creating package:",w)}}async function T(y){if(u)try{await a(u.id,{internalTitle:y.internalTitle,lineItems:y.lineItems.map((w,R)=>({...w,id:R+1})),parentPackageId:y.parentPackageId,addVat:y.addVat}),p("list"),m(null)}catch(w){console.error("Error updating package:",w)}}async function b(y){try{await E(()=>l(y),"Paket wird gelöscht..."),v("Paket wurde erfolgreich gelöscht.")}catch(w){const R=be(w);g(R)}}return n&&t.length===0?o.jsx("div",{className:"card",children:o.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[o.jsx("div",{className:"loading-spinner",style:{margin:"0 auto 1rem"}}),o.jsx("p",{children:"Pakete werden geladen..."})]})}):r&&t.length===0?o.jsx("div",{className:"card",children:o.jsxs("div",{style:{textAlign:"center",padding:"2rem"},children:[o.jsxs("p",{style:{color:"rgba(239, 68, 68, 0.9)",marginBottom:"1rem"},children:["Fehler beim Laden der Pakete: ",r]}),o.jsx("button",{className:"btn btn-primary",onClick:()=>window.location.reload(),children:"Seite neu laden"})]})}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:"0 0 4px 0"},children:e}),o.jsx("div",{style:{opacity:.7},children:"Definiere Leistungspakete, die du in Angeboten/Rechnungen verwenden kannst."})]}),o.jsx("button",{className:`btn ${d==="create"?"btn-secondary":"btn-primary"}`,onClick:()=>p(d==="create"?"list":"create"),disabled:n,children:d==="create"?"Abbrechen":"Neues Paket"})]}),o.jsx(mo,{columns:h,data:t,emptyMessage:"Noch keine Pakete definiert."}),d==="create"&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Neues Paket"}),o.jsx("div",{style:{opacity:.7},children:"Erstelle ein neues Leistungspaket."})]}),o.jsx(Gd,{onSubmit:S,onCancel:()=>p("list"),submitLabel:"Paket erstellen",packages:t})]}),d==="edit"&&u&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Paket bearbeiten"}),o.jsxs("div",{style:{opacity:.7},children:['Bearbeite das Paket "',u.internalTitle,'".']})]}),o.jsx(Gd,{initial:{internalTitle:u.internalTitle,lineItems:u.lineItems.map(y=>({title:y.title,quantity:y.quantity,amount:y.amount,parentItemId:y.parentItemId,description:y.description})),addVat:u.addVat,parentPackageId:u.parentPackageId},onSubmit:T,onCancel:()=>{p("list"),m(null)},submitLabel:"Paket aktualisieren",packages:t})]})]})}const Qd=({invoice:e,customers:t,offers:n,onSave:r,onCancel:i})=>{var me,ve,G;const{adapter:a}=ln(),{settings:l}=Ln(),[d,p]=k.useState(((me=e==null?void 0:e.customerId)==null?void 0:me.toString())||""),[u,m]=k.useState(((ve=e==null?void 0:e.offerId)==null?void 0:ve.toString())||""),[g,v]=k.useState((e==null?void 0:e.title)||""),[E,h]=k.useState((e==null?void 0:e.notes)||""),[S,T]=k.useState(e!=null&&e.dueDate?new Date(e.dueDate).toISOString().split("T")[0]:""),[b,y]=k.useState((e==null?void 0:e.lineItems)||[]),[w,R]=k.useState((e==null?void 0:e.vatRate)||19),N=((G=l==null?void 0:l.companyData)==null?void 0:G.kleinunternehmer)||!1,L=b.reduce((O,W)=>O+W.total,0),A=N?0:L*(w/100),F=L+A,B=()=>{const O={id:Date.now(),title:"",description:"",quantity:1,unitPrice:0,total:0,parentItemId:void 0};y([...b,O])},j=O=>{const W={id:Date.now(),title:"",description:"",quantity:1,unitPrice:0,total:0,parentItemId:O};y([...b,W])},C=(O,W,V)=>{y(te=>te.map(Se=>{if(Se.id===O){const Z={...Se,[W]:V};return(W==="quantity"||W==="unitPrice")&&(Z.total=Z.quantity*Z.unitPrice),Z}return Se}))},z=O=>{y(W=>W.filter(V=>V.id!==O&&V.parentItemId!==O))},M=async O=>{if(a)try{const W=await a.getOffer(O);if(!W)return;const V=W.lineItems.map(te=>({id:Date.now()+Math.random(),title:te.title,description:te.description,quantity:te.quantity,unitPrice:te.unitPrice,total:te.total,parentItemId:te.parentItemId}));y(V),p(W.customerId.toString()),v(W.title),R(W.vatRate)}catch(W){console.error("Error adding offer:",W)}},Y=O=>{if(O.preventDefault(),!d||!g.trim()){alert("❌ Pflichtfelder fehlen:\\n\\n"+(d?"":"• Bitte wählen Sie einen Kunden aus\\n")+(g.trim()?"":"• Bitte geben Sie einen Titel ein\\n"));return}const W={invoiceNumber:(e==null?void 0:e.invoiceNumber)||`RE-${Date.now()}`,customerId:parseInt(d),offerId:u?parseInt(u):void 0,title:g,notes:E,dueDate:S,lineItems:b,subtotal:L,vatRate:w,vatAmount:A,total:F,status:(e==null?void 0:e.status)||"draft"};r(W)},he=b.filter(O=>!O.parentItemId);return o.jsxs("div",{className:"card",style:{maxWidth:"800px",margin:"0 auto"},children:[o.jsx("h2",{style:{margin:"0 0 16px 0"},children:e?"Rechnung bearbeiten":"Neue Rechnung"}),o.jsxs("form",{onSubmit:Y,style:{display:"flex",flexDirection:"column",gap:"16px"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Kunde *"}),o.jsxs("select",{value:d,onChange:O=>p(O.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)"},required:!0,children:[o.jsx("option",{value:"",children:"Kunde auswählen"}),t.map(O=>o.jsx("option",{value:O.id,children:O.name},O.id))]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Fällig am"}),o.jsx("input",{type:"date",value:S,onChange:O=>T(O.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)"}})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Titel *"}),o.jsx("input",{type:"text",value:g,onChange:O=>v(O.target.value),style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)"},required:!0})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"14px",fontWeight:"500"},children:"Anmerkungen"}),o.jsx("textarea",{value:E,onChange:O=>h(O.target.value),rows:3,style:{width:"100%",padding:"8px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.8)",color:"var(--muted)",resize:"vertical"}})]}),o.jsxs("div",{style:{borderTop:"1px solid rgba(255,255,255,.1)",paddingTop:"16px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0",fontSize:"16px",fontWeight:"600"},children:"Positionen"}),o.jsxs("select",{value:u,onChange:O=>{m(O.target.value),O.target.value&&M(parseInt(O.target.value))},style:{padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},children:[o.jsx("option",{value:"",children:"Aus Angebot übernehmen"}),n.filter(O=>!d||O.customerId===parseInt(d)).map(O=>o.jsxs("option",{value:O.id,children:[O.offerNumber," - ",O.title]},O.id))]}),o.jsx("button",{type:"button",onClick:B,style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"6px 12px",borderRadius:"4px",cursor:"pointer",fontSize:"14px"},children:"Position hinzufügen"})]}),o.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:he.map(O=>o.jsxs("div",{children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr auto",gap:"8px",alignItems:"start",padding:"12px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"6px",background:"rgba(17,24,39,.4)"},children:[o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Titel",value:O.title,onChange:W=>C(O.id,"title",W.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px",marginBottom:"4px"}}),o.jsx("input",{type:"text",placeholder:"Beschreibung",value:O.description||"",onChange:W=>C(O.id,"description",W.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"}})]}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Menge",value:O.quantity,onChange:W=>C(O.id,"quantity",parseFloat(W.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Einzelpreis",value:O.unitPrice,onChange:W=>C(O.id,"unitPrice",parseFloat(W.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsxs("div",{style:{padding:"6px",fontSize:"14px",fontWeight:"500"},children:[O.total.toFixed(2)," €"]}),o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{type:"button",onClick:()=>j(O.id),style:{backgroundColor:"var(--ok)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"Sub"}),o.jsx("button",{type:"button",onClick:()=>z(O.id),style:{backgroundColor:"var(--danger)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"✕"})]})]}),b.filter(W=>W.parentItemId===O.id).map(W=>o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr 1fr auto",gap:"8px",alignItems:"start",padding:"12px",marginLeft:"24px",border:"1px solid rgba(96,165,250,.3)",borderLeft:"4px solid var(--accent)",borderRadius:"6px",background:"rgba(96,165,250,.1)",marginTop:"4px"},children:[o.jsxs("div",{children:[o.jsx("input",{type:"text",placeholder:"Sub-Titel",value:W.title,onChange:V=>C(W.id,"title",V.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px",marginBottom:"4px"}}),o.jsx("input",{type:"text",placeholder:"Sub-Beschreibung",value:W.description||"",onChange:V=>C(W.id,"description",V.target.value),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"}})]}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Menge",value:W.quantity,onChange:V=>C(W.id,"quantity",parseFloat(V.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsx("div",{children:o.jsx("input",{type:"number",placeholder:"Einzelpreis",value:W.unitPrice,onChange:V=>C(W.id,"unitPrice",parseFloat(V.target.value)||0),style:{width:"100%",padding:"6px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",step:"0.01"})}),o.jsxs("div",{style:{padding:"6px",fontSize:"14px",fontWeight:"500"},children:[W.total.toFixed(2)," €"]}),o.jsx("div",{children:o.jsx("button",{type:"button",onClick:()=>z(W.id),style:{backgroundColor:"var(--danger)",color:"white",border:"none",padding:"4px 8px",borderRadius:"4px",cursor:"pointer",fontSize:"12px"},children:"✕"})})]},W.id))]},O.id))})]}),o.jsx("div",{style:{borderTop:"1px solid rgba(255,255,255,.1)",paddingTop:"16px"},children:o.jsx("div",{style:{display:"flex",justifyContent:"flex-end"},children:o.jsxs("div",{style:{width:"300px",display:"flex",flexDirection:"column",gap:"8px"},children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between"},children:[o.jsx("span",{children:"Zwischensumme:"}),o.jsxs("span",{children:[L.toFixed(2)," €"]})]}),!N&&o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[o.jsx("span",{children:"MwSt.:"}),o.jsx("input",{type:"number",value:w,onChange:O=>R(parseFloat(O.target.value)||0),style:{width:"60px",padding:"4px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",fontSize:"14px"},min:"0",max:"100",step:"0.1"}),o.jsx("span",{children:"%"})]}),o.jsxs("span",{children:[A.toFixed(2)," €"]})]}),o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid rgba(255,255,255,.1)",paddingTop:"8px"},children:[o.jsx("span",{children:"Gesamtbetrag:"}),o.jsxs("span",{children:[F.toFixed(2)," €"]})]})]})})}),o.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px",marginTop:"16px"},children:[o.jsx("button",{type:"button",onClick:i,style:{padding:"8px 16px",border:"1px solid rgba(255,255,255,.2)",background:"transparent",color:"var(--muted)",borderRadius:"6px",cursor:"pointer"},children:"Abbrechen"}),o.jsx("button",{type:"submit",style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"8px 16px",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:e?"Aktualisieren":"Erstellen"})]})]})]})};function ev({title:e="Rechnungen"}){const{invoices:t,loading:n,error:r,createInvoice:i,updateInvoice:a,deleteInvoice:l}=os(),{customers:d}=Tr(),{offers:p}=go(),{settings:u}=qt(),{currentTheme:m,currentCustomColors:g}=kr(),{showSuccess:v,showError:E}=un(),{getLogoForPdf:h}=rc(),[S,T]=k.useState("list"),[b,y]=k.useState(null),w=k.useMemo(()=>[{key:"invoiceNumber",header:"Nummer"},{key:"customerId",header:"Kunde",render:j=>{const C=d.find(z=>z.id===j.customerId);return(C==null?void 0:C.name)||`Kunde #${j.customerId}`}},{key:"title",header:"Titel"},{key:"status",header:"Status",render:j=>{const C={draft:"#6b7280",sent:"#3b82f6",paid:"#10b981",overdue:"#ef4444",cancelled:"#ef4444"},z={draft:"Entwurf",sent:"Versendet",paid:"Bezahlt",overdue:"Überfällig",cancelled:"Storniert"},M=C[j.status]||"#6b7280",Y=z[j.status]||j.status;return o.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:M+"20",color:M},children:Y})}},{key:"total",header:"Gesamtbetrag",render:j=>`€${j.total.toFixed(2)}`},{key:"dueDate",header:"Fällig am",render:j=>j.dueDate?new Date(j.dueDate).toLocaleDateString("de-DE"):"-"},{key:"id",header:"Aktionen",render:j=>o.jsxs("div",{style:{display:"flex",gap:"4px"},children:[o.jsx("button",{className:"btn btn-info",onClick:()=>B(j),style:{padding:"4px 8px",fontSize:"12px"},title:"PDF Vorschau anzeigen",children:"👁️ Vorschau"}),o.jsx("button",{className:"btn btn-warning",onClick:()=>F(j),style:{padding:"4px 8px",fontSize:"12px"},title:"PDF herunterladen",children:"💾 PDF"}),o.jsx("button",{className:"btn btn-secondary",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{y(j),T("edit")},children:"Bearbeiten"}),o.jsxs("select",{value:j.status,onChange:C=>L(j.id,C.target.value),style:{padding:"4px 8px",fontSize:"12px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"4px",background:"rgba(17,24,39,.8)",color:"var(--muted)",cursor:"pointer"},children:[o.jsx("option",{value:"draft",children:"Entwurf"}),o.jsx("option",{value:"sent",children:"Gesendet"}),o.jsx("option",{value:"paid",children:"Bezahlt"}),o.jsx("option",{value:"overdue",children:"Überfällig"}),o.jsx("option",{value:"cancelled",children:"Storniert"})]}),o.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>{confirm("Diese Rechnung wirklich löschen?")&&A(j.id)},children:"Löschen"})]})}],[d]);async function R(j){await i(j),T("list")}async function N(j){b&&(await a(b.id,j),T("list"),y(null))}async function L(j,C){try{const z=t.find(me=>me.id===j);if(!z)return;const M=new Date().toISOString(),Y={};switch(C){case"sent":Y.sentAt=M;break;case"paid":Y.paidAt=M;break;case"overdue":Y.overdueAt=M;break;case"cancelled":Y.cancelledAt=M;break}await a(j,{...z,status:C,...Y}),v(`Rechnungs-Status auf "${{draft:"Entwurf",sent:"Gesendet",paid:"Bezahlt",overdue:"Überfällig",cancelled:"Storniert"}[C]}" geändert`)}catch{E("Fehler beim Ändern des Status")}}async function A(j){await l(j)}const F=async j=>{const C=d.find(z=>z.id===j.customerId);if(!C){alert("Kunde nicht gefunden");return}try{console.log("🎯 Starting PDF export for invoice:",j.invoiceNumber);const z=await h();console.log("🖼️ [DEBUG] Logo data for PDF:",z?"Present":"None");const M=await Ma.exportInvoiceToPDF(j,C,u,!1,m,g,z);M.success?(console.log("✅ PDF export successful:",M.filePath),alert(`� PDF erfolgreich erstellt!

Datei: ${M.filePath}
Größe: ${Math.round((M.fileSize||0)/1024)} KB`)):(console.error("❌ PDF export failed:",M.error),alert(`❌ PDF-Export fehlgeschlagen:

${M.error}`))}catch(z){console.error("PDF Export failed:",z),alert("PDF Export fehlgeschlagen: "+(z instanceof Error?z.message:"Unbekannter Fehler"))}},B=async j=>{const C=d.find(z=>z.id===j.customerId);if(!C){alert("Kunde nicht gefunden");return}try{console.log("🔍 Starting PDF preview for invoice:",j.invoiceNumber);const z=await h();console.log("🖼️ [DEBUG PREVIEW] Logo data for PDF:",z?"Present":"None");const M=await Ma.exportInvoiceToPDF(j,C,u,!0,m,g,z);M.success?console.log("✅ PDF preview successful"):(console.error("❌ PDF preview failed:",M.error),alert(`❌ PDF-Vorschau fehlgeschlagen:

${M.error}`))}catch(z){console.error("PDF Preview failed:",z),alert("PDF Vorschau fehlgeschlagen: "+(z instanceof Error?z.message:"Unbekannter Fehler"))}};return n?o.jsx("div",{className:"card",children:"Lade Rechnungen..."}):r?o.jsxs("div",{className:"card",children:["Fehler: ",r]}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:"0 0 4px 0"},children:e}),o.jsx("div",{style:{opacity:.7},children:"Verwalte deine Rechnungen und exportiere sie als PDF."})]}),o.jsx("button",{className:"btn",onClick:()=>T(S==="create"?"list":"create"),children:S==="create"?"Abbrechen":"Neue Rechnung"})]}),o.jsx(mo,{columns:w,data:t,emptyMessage:"Noch keine Rechnungen erstellt."}),S==="create"&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Neue Rechnung"}),o.jsx("div",{style:{opacity:.7},children:"Erstelle eine neue Rechnung."})]}),o.jsx(Qd,{customers:d,offers:p,onSave:R,onCancel:()=>T("list")})]}),S==="edit"&&b&&o.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid rgba(255,255,255,.1)"},children:[o.jsxs("div",{style:{marginBottom:"16px"},children:[o.jsx("h3",{style:{margin:"0 0 4px 0"},children:"Rechnung bearbeiten"}),o.jsxs("div",{style:{opacity:.7},children:['Bearbeite die Rechnung "',b.title,'".']})]}),o.jsx(Qd,{invoice:b,customers:d,offers:p,onSave:N,onCancel:()=>{T("list"),y(null)}})]})]})}function ic(){const{adapter:e}=ln(),[t,n]=k.useState([]),[r,i]=k.useState(!0),[a,l]=k.useState(null);async function d(){if(e){i(!0),l(null);try{const E=await e.listActivities();n(E)}catch(E){const h=be(E);l(h.message),console.error("Error loading activities:",h)}finally{i(!1)}}}k.useEffect(()=>{d()},[e]);async function p(E){var h;if(console.log("🏗️ useActivities.createActivity called with:",E),!e)throw console.error("❌ No adapter available"),new nt("Datenbank-Adapter nicht verfügbar");if(!((h=E.name)!=null&&h.trim()))throw console.error("❌ Validation failed: no name"),new ae("Tätigkeitsname ist erforderlich","name");if(E.defaultHourlyRate<0)throw console.error("❌ Validation failed: negative hourly rate"),new ae("Stundensatz darf nicht negativ sein","defaultHourlyRate");l(null);try{console.log("📡 Calling adapter.createActivity...");const S=await e.createActivity(E);return console.log("✅ Activity created in database:",S),console.log("🔄 Reloading activities..."),await d(),console.log("✅ Activities reloaded successfully"),S}catch(S){console.error("❌ Error in createActivity:",S);const T=be(S);throw l(T.message),console.error("Error creating activity:",T),T}}async function u(E,h){if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");if(h.name!==void 0&&!h.name.trim())throw new ae("Tätigkeitsname ist erforderlich","name");if(h.defaultHourlyRate!==void 0&&h.defaultHourlyRate<0)throw new ae("Stundensatz darf nicht negativ sein","defaultHourlyRate");l(null);try{const S=await e.updateActivity(E,h);return await d(),S}catch(S){const T=be(S);throw l(T.message),console.error("Error updating activity:",T),T}}async function m(E){if(!e)throw new nt("Datenbank-Adapter nicht verfügbar");l(null);try{return await e.deleteActivity(E),await d(),!0}catch(h){const S=be(h);throw l(S.message),console.error("Error deleting activity:",S),S}}return{activities:t,loading:r,error:a,createActivity:p,updateActivity:u,deleteActivity:m,refresh:d,getActiveActivities:()=>t.filter(E=>E.isActive),getActivityById:E=>t.find(h=>h.id===E)}}function tv({initial:e,onSubmit:t,onCancel:n,submitLabel:r="Speichern"}){var y;const[i,a]=k.useState(e??{customerId:"",title:"",status:"draft",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],vatRate:19}),[l,d]=k.useState({}),[p,u]=k.useState(!1),{customers:m}=Tr(),{showError:g,showSuccess:v}=un(),{withLoading:E}=jr(),{settings:h}=Ln();k.useEffect(()=>{a(e??{customerId:"",title:"",status:"draft",startDate:new Date().toISOString().split("T")[0],endDate:new Date().toISOString().split("T")[0],vatRate:19}),d({})},[e]);function S(w,R){a(N=>({...N,[w]:R})),l[w]&&d(N=>({...N,[w]:""}))}async function T(w){w.preventDefault(),u(!0);try{console.log("BasicTimesheetForm handleSubmit: Starting submission with values:",i),await t(i),console.log("BasicTimesheetForm handleSubmit: Submission successful"),v(e?"Leistungsnachweis erfolgreich aktualisiert!":"Leistungsnachweis erfolgreich erstellt!")}catch(R){console.error("BasicTimesheetForm handleSubmit: Error occurred:",R);const N=be(R);N instanceof ae&&N.field?d(L=>({...L,[N.field]:N.message})):g(N.message)}finally{u(!1)}}const b=((y=h==null?void 0:h.companyData)==null?void 0:y.kleinunternehmer)||!1;return o.jsx("div",{style:{maxWidth:"800px",padding:"0"},children:o.jsxs("form",{onSubmit:T,style:{display:"flex",flexDirection:"column",gap:"24px"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr",gap:"16px",alignItems:"start"},children:[o.jsxs("div",{style:{display:"contents"},children:[o.jsx("label",{htmlFor:"customerId",style:{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Kunde *"}),o.jsxs("div",{children:[o.jsxs("select",{id:"customerId",value:i.customerId,onChange:w=>S("customerId",w.target.value?Number(w.target.value):""),style:{width:"100%",padding:"12px",borderRadius:"6px",border:l.customerId?"2px solid #ef4444":"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"14px"},required:!0,children:[o.jsx("option",{value:"",children:"Kunde auswählen..."}),m.map(w=>o.jsx("option",{value:w.id,children:w.name},w.id))]}),l.customerId&&o.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:l.customerId})]})]}),o.jsxs("div",{style:{display:"contents"},children:[o.jsx("label",{htmlFor:"status",style:{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Status"}),o.jsx("div",{children:o.jsxs("select",{id:"status",value:i.status,onChange:w=>S("status",w.target.value),style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"14px"},children:[o.jsx("option",{value:"draft",children:"Entwurf"}),o.jsx("option",{value:"sent",children:"Gesendet"}),o.jsx("option",{value:"approved",children:"Genehmigt"}),o.jsx("option",{value:"rejected",children:"Abgelehnt"})]})})]}),o.jsxs("div",{style:{display:"contents"},children:[o.jsx("label",{htmlFor:"title",style:{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Titel *"}),o.jsxs("div",{children:[o.jsx("input",{type:"text",id:"title",value:i.title,onChange:w=>S("title",w.target.value),placeholder:"z.B. Entwicklungsarbeiten KW 37",style:{width:"100%",padding:"12px",borderRadius:"6px",border:l.title?"2px solid #ef4444":"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"14px"},required:!0}),l.title&&o.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:l.title})]})]}),o.jsxs("div",{style:{display:"contents"},children:[o.jsx("label",{htmlFor:"startDate",style:{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Startdatum *"}),o.jsxs("div",{children:[o.jsx("input",{type:"date",id:"startDate",value:i.startDate,onChange:w=>S("startDate",w.target.value),style:{width:"100%",padding:"12px",borderRadius:"6px",border:l.startDate?"2px solid #ef4444":"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"14px"},required:!0}),l.startDate&&o.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:l.startDate})]})]}),o.jsxs("div",{style:{display:"contents"},children:[o.jsx("label",{htmlFor:"endDate",style:{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Enddatum *"}),o.jsxs("div",{children:[o.jsx("input",{type:"date",id:"endDate",value:i.endDate,onChange:w=>S("endDate",w.target.value),style:{width:"100%",padding:"12px",borderRadius:"6px",border:l.endDate?"2px solid #ef4444":"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"14px"},required:!0}),l.endDate&&o.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:l.endDate})]})]}),!b&&o.jsxs("div",{style:{display:"contents"},children:[o.jsx("label",{htmlFor:"vatRate",style:{display:"flex",alignItems:"center",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"MwSt. (%)"}),o.jsxs("div",{children:[o.jsx("input",{type:"number",id:"vatRate",value:i.vatRate,onChange:w=>S("vatRate",parseFloat(w.target.value)||0),step:"0.1",min:"0",max:"100",style:{width:"100%",padding:"12px",borderRadius:"6px",border:l.vatRate?"2px solid #ef4444":"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"14px"}}),l.vatRate&&o.jsx("p",{style:{color:"#ef4444",fontSize:"12px",marginTop:"4px"},children:l.vatRate})]})]})]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 1fr",gap:"16px",alignItems:"start"},children:[o.jsx("label",{htmlFor:"notes",style:{display:"flex",alignItems:"flex-start",paddingTop:"12px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:"Bemerkungen"}),o.jsx("div",{children:o.jsx("textarea",{id:"notes",value:i.notes||"",onChange:w=>S("notes",w.target.value),rows:3,style:{width:"100%",padding:"12px",borderRadius:"6px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"14px",resize:"vertical"},placeholder:"Zusätzliche Informationen..."})})]}),o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"16px",fontSize:"14px",color:"#374151"},children:[o.jsx("div",{style:{fontWeight:"600",marginBottom:"8px"},children:"💡 Hinweis"}),o.jsx("div",{children:'Nach dem Erstellen können Sie über "Positionen" die Arbeitsstunden und Tätigkeiten hinzufügen.'})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",justifyContent:"flex-end"},children:[n&&o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",children:"Abbrechen"}),o.jsx("button",{type:"submit",disabled:p,className:"btn btn-primary",children:p?"Speichert...":r})]})]})})}function nv({timesheet:e,onUpdate:t,onCancel:n}){var A;const[r,i]=k.useState(e.activities),[a,l]=k.useState(!1),{getActiveActivities:d,getActivityById:p}=ic(),{showError:u,showSuccess:m}=un(),{settings:g}=Ln();k.useEffect(()=>{i(e.activities)},[e]);function v(){const F=d();if(F.length===0){u("Bitte erstellen Sie zunächst Tätigkeitsarten in den Einstellungen.");return}if(r.length>=30){u("Maximal 30 Positionen können pro Leistungsnachweis hinzugefügt werden.");return}const B=F[0],j={id:Date.now(),timesheetId:e.id,activityId:B.id,hours:0,hourlyRate:B.defaultHourlyRate,total:0,description:"",position:""};i(C=>[...C,j])}function E(F,B,j){i(C=>{const z=[...C],M={...z[F]};if(B==="activityId"){M.activityId=j;const Y=p(j);Y&&(M.hourlyRate=Y.defaultHourlyRate)}else M[B]=j;return M.total=M.hours*M.hourlyRate,z[F]=M,z})}function h(F){i(B=>B.filter((j,C)=>C!==F))}async function S(){l(!0);try{await t(r),m("Positionen erfolgreich aktualisiert!")}catch{u("Fehler beim Speichern der Positionen.")}finally{l(!1)}}const T=r.reduce((F,B)=>F+B.total,0),b=r.reduce((F,B)=>F+B.hours,0),y=b/8,w=((A=g==null?void 0:g.companyData)==null?void 0:A.kleinunternehmer)||!1,R=w?0:e.vatRate,N=T*(R/100),L=T+N;return o.jsxs("div",{children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px"},children:[o.jsx("div",{children:o.jsxs("span",{style:{fontSize:"14px",color:"#6b7280"},children:[r.length," von max. 30 Position(en)"]})}),o.jsx("button",{type:"button",onClick:v,className:"btn btn-success",disabled:r.length>=30,style:{opacity:r.length>=30?.5:1,cursor:r.length>=30?"not-allowed":"pointer"},children:"+ Position hinzufügen"})]}),r.length===0?o.jsxs("div",{style:{background:"rgba(107, 114, 128, 0.1)",border:"1px solid rgba(107, 114, 128, 0.3)",borderRadius:"8px",padding:"40px",textAlign:"center",color:"#6b7280"},children:[o.jsx("div",{style:{fontSize:"16px",marginBottom:"8px"},children:"Keine Positionen vorhanden"}),o.jsx("div",{style:{fontSize:"14px"},children:'Klicken Sie auf "Position hinzufügen" um zu beginnen'})]}):o.jsxs("div",{style:{border:"1px solid rgba(255,255,255,.2)",borderRadius:"8px",overflow:"hidden"},children:[o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 150px 80px 100px 80px 100px 60px",gap:"12px",padding:"12px",background:"rgba(255,255,255,.05)",borderBottom:"1px solid rgba(255,255,255,.1)",fontSize:"12px",fontWeight:"600",color:"#6b7280"},children:[o.jsx("div",{children:"Tätigkeitsart"}),o.jsx("div",{children:"Position"}),o.jsx("div",{children:"Stunden"}),o.jsx("div",{children:"Stundensatz"}),o.jsx("div",{children:"Summe"}),o.jsx("div",{children:"Beschreibung"}),o.jsx("div",{})]}),r.map((F,B)=>(p(F.activityId),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px 150px 80px 100px 80px 100px 60px",gap:"12px",padding:"12px",borderBottom:B<r.length-1?"1px solid rgba(255,255,255,.1)":"none",background:B%2===0?"rgba(255,255,255,.02)":"transparent"},children:[o.jsx("select",{value:F.activityId,onChange:j=>E(B,"activityId",Number(j.target.value)),style:{padding:"6px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"12px"},children:d().map(j=>o.jsx("option",{value:j.id,children:j.name},j.id))}),o.jsx("input",{type:"text",value:F.position||"",onChange:j=>E(B,"position",j.target.value),placeholder:"z.B. Homepage, Meeting",style:{padding:"6px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"12px"}}),o.jsx("input",{type:"number",value:F.hours,onChange:j=>E(B,"hours",parseFloat(j.target.value)||0),step:"0.25",min:"0",style:{padding:"6px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"12px",textAlign:"right"}}),o.jsx("input",{type:"number",value:F.hourlyRate,onChange:j=>E(B,"hourlyRate",parseFloat(j.target.value)||0),step:"0.01",min:"0",style:{padding:"6px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"12px",textAlign:"right"}}),o.jsxs("div",{style:{padding:"6px",borderRadius:"4px",background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.3)",color:"#374151",fontSize:"12px",fontWeight:"600",textAlign:"right",display:"flex",alignItems:"center",justifyContent:"flex-end"},children:[F.total.toFixed(2)," €"]}),o.jsx("input",{type:"text",value:F.description||"",onChange:j=>E(B,"description",j.target.value),placeholder:"Details...",style:{padding:"6px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",fontSize:"12px"}}),o.jsx("button",{type:"button",onClick:()=>h(B),className:"btn btn-danger",style:{padding:"4px",fontSize:"10px",minWidth:"auto",width:"100%"},title:"Position löschen",children:"×"})]},F.id||B)))]}),T>0&&o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"20px",marginTop:"24px"},children:[o.jsx("h4",{style:{margin:"0 0 16px 0",color:"#374151",fontWeight:"600"},children:"Kostenübersicht"}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr 1fr",gap:"20px",fontSize:"14px",color:"#374151"},children:[o.jsxs("div",{children:[o.jsx("div",{style:{opacity:.7,fontSize:"12px",marginBottom:"4px"},children:"Gesamtstunden"}),o.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"600",fontSize:"16px"},children:[b.toFixed(1),"h"]})]}),o.jsxs("div",{children:[o.jsx("div",{style:{opacity:.7,fontSize:"12px",marginBottom:"4px"},children:"Personentage (PT)"}),o.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"600",fontSize:"16px"},children:[y.toFixed(1)," PT"]})]}),o.jsxs("div",{children:[o.jsx("div",{style:{opacity:.7,fontSize:"12px",marginBottom:"4px"},children:"Nettobetrag"}),o.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"600",fontSize:"16px"},children:[T.toFixed(2)," €"]})]}),o.jsxs("div",{children:[o.jsxs("div",{style:{opacity:.7,fontSize:"12px",marginBottom:"4px"},children:["Gesamtbetrag ",!w&&`(+ ${R}% MwSt.)`]}),o.jsxs("div",{style:{fontFamily:"monospace",fontWeight:"700",fontSize:"18px",color:"#059669"},children:[L.toFixed(2)," €"]})]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",paddingTop:"24px",justifyContent:"flex-end"},children:[o.jsx("button",{type:"button",onClick:n,className:"btn btn-secondary",disabled:a,children:"Abbrechen"}),o.jsx("button",{type:"button",onClick:S,disabled:a,className:"btn btn-primary",children:a?"Speichert...":"Positionen speichern"})]})]})}function rv(){const[e,t]=k.useState("list"),[n,r]=k.useState(null),[i,a]=k.useState(null),{timesheets:l,createTimesheet:d,updateTimesheet:p,deleteTimesheet:u}=tc(),{customers:m}=Tr(),{activities:g}=ic(),{settings:v}=qt(),E=k.useMemo(()=>[{key:"title",header:"Titel",render:j=>o.jsxs("div",{children:[(i==null?void 0:i.id)===j.id&&(i==null?void 0:i.field)==="title"?o.jsx("input",{type:"text",defaultValue:j.title,autoFocus:!0,onBlur:C=>L(j.id,"title",C.target.value),onKeyPress:C=>C.key==="Enter"&&L(j.id,"title",C.currentTarget.value),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",padding:"4px 8px",color:"var(--foreground)",width:"200px"}}):o.jsx("div",{style:{cursor:"pointer",fontWeight:"500"},onClick:()=>a({id:j.id,field:"title"}),children:j.title}),j.notes&&o.jsx("div",{style:{fontSize:"12px",opacity:.7,marginTop:"2px"},children:j.notes.length>50?`${j.notes.substring(0,50)}...`:j.notes})]})},{key:"customerId",header:"Kunde",render:j=>{const C=m.find(z=>z.id===j.customerId);return(i==null?void 0:i.id)===j.id&&(i==null?void 0:i.field)==="customerId"?o.jsx("select",{defaultValue:j.customerId,autoFocus:!0,onBlur:z=>L(j.id,"customerId",Number(z.target.value)),onChange:z=>L(j.id,"customerId",Number(z.target.value)),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",padding:"4px 8px",color:"var(--foreground)"},children:m.map(z=>o.jsx("option",{value:z.id,children:z.name},z.id))}):o.jsx("div",{style:{cursor:"pointer"},onClick:()=>a({id:j.id,field:"customerId"}),children:(C==null?void 0:C.name)||`Kunde #${j.customerId}`})}},{key:"period",header:"Zeitraum",render:j=>o.jsx("div",{style:{fontSize:"12px"},children:(i==null?void 0:i.id)===j.id&&(i==null?void 0:i.field)==="dates"?o.jsxs("div",{style:{display:"flex",gap:"4px",flexDirection:"column"},children:[o.jsx("input",{type:"date",defaultValue:j.startDate,onBlur:C=>A(j.id,"startDate",C.target.value),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",padding:"2px 4px",color:"var(--foreground)",fontSize:"11px"}}),o.jsx("input",{type:"date",defaultValue:j.endDate,onBlur:C=>A(j.id,"endDate",C.target.value),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",padding:"2px 4px",color:"var(--foreground)",fontSize:"11px"}})]}):o.jsxs("div",{style:{cursor:"pointer"},onClick:()=>a({id:j.id,field:"dates"}),children:[b(j.startDate)," - ",b(j.endDate)]})})},{key:"hours",header:"Stunden / PT",render:j=>{const{totalHours:C}=y(j),z=C/8;return o.jsxs("div",{style:{fontFamily:"monospace",fontSize:"13px"},children:[o.jsxs("div",{children:[C.toFixed(1),"h"]}),o.jsxs("div",{style:{opacity:.7,fontSize:"11px"},children:[z.toFixed(1)," PT"]})]})}},{key:"amount",header:"Betrag",render:j=>{const{total:C}=y(j);return o.jsx("span",{style:{fontFamily:"monospace",fontSize:"13px"},children:T(C)})}},{key:"status",header:"Status",render:j=>(i==null?void 0:i.id)===j.id&&(i==null?void 0:i.field)==="status"?o.jsxs("select",{defaultValue:j.status,autoFocus:!0,onBlur:C=>L(j.id,"status",C.target.value),onChange:C=>L(j.id,"status",C.target.value),style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.3)",borderRadius:"4px",padding:"2px 4px",color:"var(--foreground)",fontSize:"12px"},children:[o.jsx("option",{value:"draft",children:"Entwurf"}),o.jsx("option",{value:"sent",children:"Versendet"}),o.jsx("option",{value:"approved",children:"Genehmigt"}),o.jsx("option",{value:"rejected",children:"Abgelehnt"})]}):o.jsx("span",{style:{color:S(j.status),fontSize:"12px",cursor:"pointer"},onClick:()=>a({id:j.id,field:"status"}),children:h(j.status)})},{key:"id",header:"Aktionen",render:j=>o.jsxs("div",{style:{display:"flex",gap:8},children:[o.jsx("button",{className:"btn btn-primary",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>F(j),children:"Positionen"}),o.jsx("button",{className:"btn btn-danger",style:{padding:"4px 8px",fontSize:"12px"},onClick:()=>N(j.id),children:"Löschen"})]})}],[m,l,i]);function h(j){return{draft:"Entwurf",sent:"Versendet",approved:"Genehmigt",rejected:"Abgelehnt"}[j]||j}function S(j){return{draft:"#f59e0b",sent:"#3b82f6",approved:"#10b981",rejected:"#ef4444"}[j]||"#6b7280"}function T(j){return new Intl.NumberFormat("de-DE",{style:"currency",currency:"EUR"}).format(j)}function b(j){return new Date(j).toLocaleDateString("de-DE")}function y(j){var me;const C=j.activities.reduce((ve,G)=>ve+G.hours,0),z=j.activities.reduce((ve,G)=>ve+G.total,0),Y=((me=v==null?void 0:v.companyData)==null?void 0:me.kleinunternehmer)||!1?0:z*(j.vatRate/100),he=z+Y;return{subtotal:z,vatAmount:Y,total:he,totalHours:C}}async function w(j,C){const z=l.find(me=>me.id===j);if(!z)return;const M=C.reduce((me,ve)=>me+ve.total,0),Y=M*(z.vatRate/100),he=M+Y;await p(j,{activities:C,subtotal:M,vatAmount:Y,total:he}),t("list"),r(null)}async function R(j){console.log("handleCreateTimesheet called with:",j);const C={timesheetNumber:"",customerId:j.customerId,title:j.title,status:j.status,startDate:j.startDate,endDate:j.endDate,activities:[],vatRate:j.vatRate,subtotal:0,vatAmount:0,total:0,notes:j.notes};await d(C),t("list")}async function N(j){confirm("Leistungsnachweis wirklich löschen?")&&await u(j)}async function L(j,C,z){a(null);try{await p(j,{[C]:z})}catch(M){console.error("Inline update error:",M)}}async function A(j,C,z){a(null);try{await p(j,{[C]:z})}catch(M){console.error("Date update error:",M)}}function F(j){r(j),t("editActivities")}function B(){t("list"),r(null),a(null)}return o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[o.jsxs("div",{children:[o.jsx("h2",{style:{margin:"0 0 4px 0"},children:"Leistungsnachweise"}),o.jsx("div",{style:{opacity:.7},children:"Verwalten Sie Ihre Arbeitszeiterfassung und Stundenabrechnung."})]}),o.jsx("button",{className:"btn",onClick:()=>t(e==="create"?"list":"create"),children:e==="create"?"Abbrechen":"+ Neuer Leistungsnachweis"})]}),l.length>0&&o.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"16px",marginBottom:"24px"},children:(()=>{const j=l.reduce((C,z)=>{const{total:M,totalHours:Y}=y(z);return C.totalCount++,C.totalValue+=M,C.totalHours+=Y,C.totalPersonDays+=Y/8,z.status==="approved"&&C.approvedCount++,C},{totalCount:0,totalValue:0,totalHours:0,totalPersonDays:0,approvedCount:0});return o.jsxs(o.Fragment,{children:[o.jsxs("div",{style:{background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px",padding:"16px"},children:[o.jsx("div",{style:{fontSize:"12px",opacity:.7,marginBottom:"4px"},children:"Gesamt"}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"bold"},children:j.totalCount})]}),o.jsxs("div",{style:{background:"rgba(16, 185, 129, 0.1)",border:"1px solid rgba(16, 185, 129, 0.2)",borderRadius:"8px",padding:"16px"},children:[o.jsx("div",{style:{fontSize:"12px",opacity:.7,marginBottom:"4px"},children:"Gesamtumsatz"}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"bold"},children:T(j.totalValue)})]}),o.jsxs("div",{style:{background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"8px",padding:"16px"},children:[o.jsx("div",{style:{fontSize:"12px",opacity:.7,marginBottom:"4px"},children:"Gesamtstunden"}),o.jsxs("div",{style:{fontSize:"24px",fontWeight:"bold"},children:[j.totalHours.toFixed(1),"h"]})]}),o.jsxs("div",{style:{background:"rgba(139, 92, 246, 0.1)",border:"1px solid rgba(139, 92, 246, 0.2)",borderRadius:"8px",padding:"16px"},children:[o.jsx("div",{style:{fontSize:"12px",opacity:.7,marginBottom:"4px"},children:"Personentage (PT)"}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#8b5cf6"},children:j.totalPersonDays.toFixed(1)})]}),o.jsxs("div",{style:{background:"rgba(34, 197, 94, 0.1)",border:"1px solid rgba(34, 197, 94, 0.2)",borderRadius:"8px",padding:"16px"},children:[o.jsx("div",{style:{fontSize:"12px",opacity:.7,marginBottom:"4px"},children:"Genehmigt"}),o.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#22c55e"},children:j.approvedCount})]})]})})()}),o.jsx(mo,{columns:E,data:l,emptyMessage:"Noch keine Leistungsnachweise erstellt.",expandableRows:j=>o.jsx("div",{style:{padding:"16px",background:"rgba(255,255,255,0.02)",borderTop:"1px solid rgba(255,255,255,.1)"},children:j.activities&&j.activities.length>0?o.jsxs("div",{children:[o.jsxs("h4",{style:{margin:"0 0 12px 0",fontSize:"14px",fontWeight:"600",color:"#374151"},children:["Positionen (",j.activities.length,")"]}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 140px 80px 90px 90px 1fr",gap:"8px",padding:"8px 12px",borderBottom:"1px solid rgba(255,255,255,.1)",fontSize:"12px",fontWeight:"600",color:"#6b7280",marginBottom:"4px"},children:[o.jsx("div",{children:"Tätigkeitsart"}),o.jsx("div",{children:"Position"}),o.jsx("div",{style:{textAlign:"right"},children:"Stunden"}),o.jsx("div",{style:{textAlign:"right"},children:"Stundensatz"}),o.jsx("div",{style:{textAlign:"right"},children:"Summe"}),o.jsx("div",{children:"Beschreibung"})]}),j.activities.map((C,z)=>{const M=g.find(Y=>Y.id===C.activityId);return o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 140px 80px 90px 90px 1fr",gap:"8px",padding:"8px 12px",borderBottom:z<j.activities.length-1?"1px solid rgba(255,255,255,.05)":"none",fontSize:"13px",color:"#374151"},children:[o.jsx("div",{style:{fontWeight:"500",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:(M==null?void 0:M.name)||`Tätigkeit #${C.activityId}`}),o.jsx("div",{style:{color:C.position?"#374151":"#9ca3af",fontStyle:C.position?"normal":"italic",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:C.position||"Keine Position"}),o.jsxs("div",{style:{fontFamily:"monospace",textAlign:"right",fontWeight:"600"},children:[C.hours.toFixed(2)," h"]}),o.jsxs("div",{style:{fontFamily:"monospace",textAlign:"right"},children:[C.hourlyRate.toFixed(2)," €"]}),o.jsxs("div",{style:{fontFamily:"monospace",textAlign:"right",fontWeight:"600",color:"#059669"},children:[C.total.toFixed(2)," €"]}),o.jsx("div",{style:{color:C.description?"#374151":"#9ca3af",fontStyle:C.description?"normal":"italic",fontSize:"12px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:C.description||"Keine Beschreibung"})]},C.id||z)}),o.jsxs("div",{style:{display:"grid",gridTemplateColumns:"180px 140px 80px 90px 90px 1fr",gap:"8px",padding:"12px 12px 8px 12px",borderTop:"2px solid rgba(59, 130, 246, 0.3)",marginTop:"8px",fontSize:"14px",fontWeight:"600",color:"#374151"},children:[o.jsx("div",{}),o.jsx("div",{style:{color:"#059669"},children:"Gesamt:"}),o.jsxs("div",{style:{fontFamily:"monospace",textAlign:"right",color:"#059669"},children:[j.activities.reduce((C,z)=>C+z.hours,0).toFixed(2)," h"]}),o.jsx("div",{}),o.jsxs("div",{style:{fontFamily:"monospace",textAlign:"right",color:"#059669",fontSize:"16px"},children:[j.activities.reduce((C,z)=>C+z.total,0).toFixed(2)," €"]}),o.jsxs("div",{style:{fontSize:"12px",color:"#6b7280"},children:[(j.activities.reduce((C,z)=>C+z.hours,0)/8).toFixed(1)," PT"]})]})]}):o.jsxs("div",{style:{textAlign:"center",padding:"20px",color:"#6b7280",fontSize:"14px",fontStyle:"italic"},children:[o.jsx("div",{style:{marginBottom:"8px"},children:"📝 Keine Positionen vorhanden"}),o.jsx("div",{style:{fontSize:"12px"},children:'Klicken Sie auf "Positionen" um Arbeitsstunden hinzuzufügen'})]})})}),e==="create"&&o.jsxs("div",{className:"card",style:{marginTop:"24px"},children:[o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:"Neuer Leistungsnachweis"}),o.jsx("div",{style:{opacity:.7,fontSize:"14px"},children:"Erstellen Sie einen neuen Leistungsnachweis. Positionen können danach hinzugefügt werden."})]}),o.jsx(tv,{onSubmit:R,onCancel:B,submitLabel:"Erstellen"})]}),e==="editActivities"&&n&&o.jsxs("div",{className:"card",style:{marginTop:"24px"},children:[o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsxs("h3",{style:{margin:"0 0 8px 0",fontSize:"20px"},children:["Positionen bearbeiten: ",n.title]}),o.jsx("div",{style:{opacity:.7,fontSize:"14px"},children:"Verwalten Sie die Arbeitspositionen für diesen Leistungsnachweis."})]}),o.jsx(nv,{timesheet:n,onUpdate:j=>w(n.id,j),onCancel:B})]})]})}const iv="modulepreload",ov=function(e,t){return new URL(e,t).href},Yd={},Zd=function(t,n,r){let i=Promise.resolve();if(n&&n.length>0){const l=document.getElementsByTagName("link"),d=document.querySelector("meta[property=csp-nonce]"),p=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));i=Promise.allSettled(n.map(u=>{if(u=ov(u,r),u in Yd)return;Yd[u]=!0;const m=u.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(!!r)for(let h=l.length-1;h>=0;h--){const S=l[h];if(S.href===u&&(!m||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${u}"]${g}`))return;const E=document.createElement("link");if(E.rel=m?"stylesheet":iv,m||(E.as="script"),E.crossOrigin="",E.href=u,p&&E.setAttribute("nonce",p),document.head.appendChild(E),m)return new Promise((h,S)=>{E.addEventListener("load",h),E.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${u}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return i.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return t().catch(a)})};function av({colors:e,onChange:t,onApply:n,isApplying:r}){const[i,a]=k.useState(e);k.useEffect(()=>{a(e)},[e]);const l=(p,u)=>{const m={...i,[p]:u};a(m),t(m)},d=()=>{a(Ql),t(Ql)};return o.jsxs("div",{style:{padding:"16px",backgroundColor:"rgba(255,255,255,0.05)",borderRadius:"8px",border:"1px solid rgba(255,255,255,0.1)",marginTop:"12px"},children:[o.jsx("h4",{style:{margin:"0 0 16px 0",color:"white",fontSize:"14px",fontWeight:"600"},children:"🎨 Custom Colors"}),o.jsxs("div",{style:{display:"grid",gap:"12px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("label",{style:{color:"rgba(255,255,255,0.9)",fontSize:"13px",minWidth:"80px",fontWeight:"500"},children:"Primary:"}),o.jsx("input",{type:"color",value:i.primary,onChange:p=>l("primary",p.target.value),style:{width:"40px",height:"32px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",backgroundColor:"transparent",cursor:"pointer"}}),o.jsx("input",{type:"text",value:i.primary,onChange:p=>l("primary",p.target.value),placeholder:"#4a5d5a",style:{flex:1,padding:"6px 10px",backgroundColor:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",color:"white",fontSize:"13px",fontFamily:"Monaco, Consolas, monospace"}})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("label",{style:{color:"rgba(255,255,255,0.9)",fontSize:"13px",minWidth:"80px",fontWeight:"500"},children:"Secondary:"}),o.jsx("input",{type:"color",value:i.secondary,onChange:p=>l("secondary",p.target.value),style:{width:"40px",height:"32px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",backgroundColor:"transparent",cursor:"pointer"}}),o.jsx("input",{type:"text",value:i.secondary,onChange:p=>l("secondary",p.target.value),placeholder:"#3a4d4a",style:{flex:1,padding:"6px 10px",backgroundColor:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",color:"white",fontSize:"13px",fontFamily:"Monaco, Consolas, monospace"}})]}),o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[o.jsx("label",{style:{color:"rgba(255,255,255,0.9)",fontSize:"13px",minWidth:"80px",fontWeight:"500"},children:"Accent:"}),o.jsx("input",{type:"color",value:i.accent,onChange:p=>l("accent",p.target.value),style:{width:"40px",height:"32px",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",backgroundColor:"transparent",cursor:"pointer"}}),o.jsx("input",{type:"text",value:i.accent,onChange:p=>l("accent",p.target.value),placeholder:"#7dd3a0",style:{flex:1,padding:"6px 10px",backgroundColor:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",color:"white",fontSize:"13px",fontFamily:"Monaco, Consolas, monospace"}})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"16px",justifyContent:"space-between",alignItems:"center"},children:[o.jsx("button",{onClick:d,disabled:r,style:{padding:"6px 12px",backgroundColor:"rgba(255,255,255,0.1)",border:"1px solid rgba(255,255,255,0.2)",borderRadius:"6px",color:"rgba(255,255,255,0.8)",fontSize:"12px",cursor:r?"not-allowed":"pointer",opacity:r?.6:1,transition:"all 0.2s ease"},children:"🔄 Reset"}),o.jsx("button",{onClick:n,disabled:r,style:{padding:"8px 16px",backgroundColor:i.accent,border:"none",borderRadius:"6px",color:"white",fontSize:"13px",fontWeight:"600",cursor:r?"not-allowed":"pointer",opacity:r?.6:1,transition:"all 0.2s ease",textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:r?"🔄 Anwenden...":"✅ Übernehmen"})]}),o.jsxs("div",{style:{marginTop:"16px",padding:"12px",background:`linear-gradient(160deg, ${i.primary} 0%, ${i.secondary} 40%, ${i.secondary} 100%)`,borderRadius:"6px",border:"1px solid rgba(255,255,255,0.1)"},children:[o.jsx("div",{style:{color:"white",fontSize:"12px",fontWeight:"600",textShadow:"0 1px 2px rgba(0,0,0,0.3)"},children:"👁️ Vorschau"}),o.jsx("div",{style:{marginTop:"6px",padding:"6px 8px",backgroundColor:i.accent,borderRadius:"4px",color:"white",fontSize:"11px",display:"inline-block",fontWeight:"500"},children:"Accent Farbe"})]})]})}const sv=({isOpen:e,onClose:t})=>{var R,N;const[n,r]=k.useState("idle"),[i,a]=k.useState({percent:0,transferred:0,total:0}),[l,d]=k.useState(null),[p,u]=k.useState(""),[m,g]=k.useState(""),[v,E]=k.useState(""),h=k.useRef(null);k.useEffect(()=>{e&&(async()=>{var A,F;try{if((F=(A=window.rawalite)==null?void 0:A.version)!=null&&F.get){const B=await window.rawalite.version.get();B.ok&&B.app?g(B.app):g("")}else console.warn("⚠️ Version API nicht verfügbar - Fallback wird verwendet"),g("")}catch(B){console.error("❌ Fehler beim Laden der aktuellen Version:",B),g("")}})()},[e]);const S=async()=>{var L,A,F;r("checking"),u("");try{const B=await((F=(A=(L=window.rawalite)==null?void 0:L.updater)==null?void 0:A.check)==null?void 0:F.call(A));B!=null&&B.hasUpdate&&B.target?(r("available"),d(B.target)):(r("upToDate"),setTimeout(()=>{r("idle")},3e3))}catch(B){console.error("❌ Update-Check fehlgeschlagen:",B),u(`Fehler beim Prüfen auf Updates: ${B instanceof Error?B.message:"Unbekannter Fehler"}`),r("error")}},T=async()=>{var A,F,B,j,C,z,M;if(!l)return;r("downloading"),a({percent:0,transferred:0,total:0});const L=(B=(F=(A=window.rawalite)==null?void 0:A.updater)==null?void 0:F.onProgress)==null?void 0:B.call(F,Y=>{a(Y)});try{const Y=(j=l.files)==null?void 0:j.find(me=>me.kind==="nsis"&&me.arch==="x64");if(!Y)throw new Error("Keine kompatible Installer-Datei gefunden");const he=await((M=(z=(C=window.rawalite)==null?void 0:C.updater)==null?void 0:z.download)==null?void 0:M.call(z,Y.url));if(he!=null&&he.ok&&(he!=null&&he.file))E(he.file),r("verifying"),setTimeout(()=>{r("readyToInstall")},1500);else throw new Error((he==null?void 0:he.error)||"Download fehlgeschlagen")}catch(Y){console.error("❌ Download fehlgeschlagen:",Y),u(`Fehler beim Download: ${Y instanceof Error?Y.message:"Unbekannter Fehler"}`),r("error")}finally{L==null||L()}},b=async()=>{var L,A,F;if(v){r("installing");try{const B=await((F=(A=(L=window.rawalite)==null?void 0:L.updater)==null?void 0:A.install)==null?void 0:F.call(A,v));if(!(B!=null&&B.ok))throw new Error((B==null?void 0:B.error)||"Installation fehlgeschlagen");console.log("✅ Installation erfolgreich - App startet neu")}catch(B){console.error("❌ Installation fehlgeschlagen:",B),u(`Fehler bei der Installation: ${B instanceof Error?B.message:"Unbekannter Fehler"}`),r("error")}}},y=()=>{r("idle"),a({percent:0,transferred:0,total:0}),d(null),u(""),E(""),t()},w=L=>{if(!L||L===0)return"wird ermittelt...";const A=L/(1024*1024);return`${Math.round(A*100)/100} MB`};return e?o.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},onClick:y,children:o.jsxs("div",{ref:h,style:{backgroundColor:"white",borderRadius:"12px",padding:"24px",maxWidth:"500px",width:"90%",maxHeight:"80vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)"},onClick:L=>L.stopPropagation(),children:[o.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",borderBottom:"1px solid #eee",paddingBottom:"16px"},children:[o.jsx("h2",{style:{fontSize:"20px",fontWeight:"600",color:"#333",margin:0},children:"RawaLite Update-Manager"}),o.jsx("button",{style:{background:"none",border:"none",fontSize:"24px",color:"#666",cursor:"pointer",padding:"4px 8px"},onClick:y,title:"Schließen",children:"×"})]}),o.jsxs("div",{style:{minHeight:"200px"},children:[m&&o.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[o.jsx("strong",{children:"Aktuelle Version:"})," ",m]}),n==="idle"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"Prüfen Sie auf verfügbare Updates für RawaLite."}),o.jsx("button",{style:{backgroundColor:"#4a5d5a",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},onClick:S,children:"🔍 Auf Updates prüfen"})]}),n==="checking"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⏳"}),o.jsx("p",{children:"Suche nach Updates..."})]}),n==="available"&&l&&o.jsxs("div",{children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"20px"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🎉"}),o.jsx("h3",{style:{color:"#28a745",margin:"0 0 12px 0"},children:"Update verfügbar!"})]}),o.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginBottom:"16px"},children:[o.jsxs("p",{children:[o.jsx("strong",{children:"Neue Version:"})," ",l.version]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Größe:"})," ",w(((N=(R=l.files)==null?void 0:R[0])==null?void 0:N.size)||0)]}),l.notes&&o.jsxs("p",{children:[o.jsx("strong",{children:"Hinweise:"})," ",l.notes]})]}),o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("button",{style:{backgroundColor:"#4a5d5a",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",cursor:"pointer",marginRight:"12px"},onClick:T,children:"⬇️ Update herunterladen"}),o.jsx("button",{style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},onClick:y,children:"Später"})]})]}),n==="downloading"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⬇️"}),o.jsx("h3",{children:"Download läuft..."}),o.jsx("div",{style:{width:"100%",height:"8px",backgroundColor:"#f0f0f0",borderRadius:"4px",marginTop:"12px"},children:o.jsx("div",{style:{height:"100%",backgroundColor:"#4a5d5a",borderRadius:"4px",width:`${i.percent}%`,transition:"width 0.3s ease"}})}),o.jsxs("p",{style:{marginTop:"8px",color:"#666"},children:["Fortschritt: ",Math.round(i.percent),"%",i.total>0&&` (${w(i.transferred)} / ${w(i.total)})`]})]}),n==="verifying"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"🔐"}),o.jsx("p",{children:"Verifiziere Download-Integrität..."})]}),n==="readyToInstall"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"✅"}),o.jsx("h3",{style:{color:"#28a745"},children:"Bereit zur Installation"}),o.jsx("p",{style:{marginBottom:"20px",color:"#666"},children:"Das Update wurde erfolgreich heruntergeladen und verifiziert."}),o.jsx("button",{style:{backgroundColor:"#4a5d5a",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",cursor:"pointer",marginRight:"12px"},onClick:b,children:"🚀 Jetzt installieren"}),o.jsx("button",{style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},onClick:y,children:"Abbrechen"})]}),n==="installing"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚙️"}),o.jsx("h3",{children:"Installation läuft..."}),o.jsxs("p",{style:{color:"#666"},children:["Der Installer wird jetzt geöffnet. Die App wird geschlossen und nach Abschluss ",o.jsx("strong",{children:"automatisch neu gestartet"}),"."]})]}),n==="upToDate"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"✅"}),o.jsx("h3",{style:{color:"#28a745"},children:"Alles aktuell!"}),o.jsx("p",{style:{color:"#666"},children:"Sie verwenden bereits die neueste Version von RawaLite."})]}),n==="error"&&o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"❌"}),o.jsx("h3",{style:{color:"#dc3545"},children:"Fehler aufgetreten"}),p&&o.jsx("div",{style:{backgroundColor:"#fee",color:"#c33",padding:"12px",borderRadius:"6px",marginTop:"12px",fontSize:"14px"},children:p}),o.jsxs("div",{style:{marginTop:"20px"},children:[o.jsx("button",{style:{backgroundColor:"#4a5d5a",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",cursor:"pointer",marginRight:"12px"},onClick:S,children:"🔄 Erneut versuchen"}),o.jsx("button",{style:{backgroundColor:"#6c757d",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",fontSize:"14px",cursor:"pointer"},onClick:y,children:"Schließen"})]})]})]})]})}):null};function lv({title:e="Einstellungen"}){rs();const t=yn(),{settings:n,loading:r,error:i,updateCompanyData:a,updateNumberingCircles:l,getNextNumber:d}=qt(),{currentTheme:p,currentNavigationMode:u,currentCustomColors:m,updateTheme:g,updateNavigationMode:v,loading:E}=kr(),{adapter:h}=ln(),{showError:S,showSuccess:T}=un(),{activities:b,createActivity:y,updateActivity:w,deleteActivity:R}=ic(),[N,L]=k.useState("company"),[A,F]=k.useState(n.companyData),[B,j]=k.useState(n.numberingCircles),[C,z]=k.useState(!1),[M,Y]=k.useState(!1),[he,me]=k.useState(!1),[ve,G]=k.useState("customers"),[O,W]=k.useState(null),[V,te]=k.useState({}),[Se,Z]=k.useState(null),[$,Q]=k.useState(m||Ql);k.useEffect(()=>{var q,re;const D=Number(V.defaultHourlyRate);console.log("🔍 Activity form data changed:",{activityFormData:V,name:V.name,nameValid:!!((q=V.name)!=null&&q.trim()),hourlyRate:V.defaultHourlyRate,hourlyRateNumber:D,hourlyRateType:typeof V.defaultHourlyRate,isNaN:isNaN(D),hourlyRateValid:!!(V.defaultHourlyRate&&!isNaN(D)&&D>0),isButtonDisabled:C||!((re=V.name)!=null&&re.trim())||!V.defaultHourlyRate||V.defaultHourlyRate<=0})},[V,C]),fa.useEffect(()=>{var D;console.log("🔍 Settings loaded - Logo length:",((D=n.companyData.logo)==null?void 0:D.length)||0),F(n.companyData),j(n.numberingCircles)},[n]),fa.useEffect(()=>{m&&Q(m)},[m]),k.useEffect(()=>{const q=new URLSearchParams(t.search).get("tab");q&&["company","logo","tax","bank","numbering","activities","design","navigation","updates","maintenance"].includes(q)&&(L(q),console.log("🔗 Navigated to tab from URL parameter:",q))},[t.search]);const fe=async D=>{var Re;const q=(Re=D.target.files)==null?void 0:Re[0];if(!q)return;if(!q.type.startsWith("image/")){alert("❌ Fehler: Bitte wählen Sie eine Bilddatei aus (PNG, JPG, GIF, etc.)"),D.target.value="";return}const re=2,we=q.size/(1024*1024);if(q.size>re*1024*1024){alert(`❌ Datei zu groß: ${we.toFixed(2)} MB

Maximum erlaubt: ${re} MB
Bitte verkleinern Sie das Bild oder wählen Sie eine andere Datei.`),D.target.value="";return}try{me(!0),T(`✅ Logo wird hochgeladen... (${we.toFixed(2)} MB)`);const ke=new FileReader;ke.onload=()=>{const Ae=ke.result;F(ne=>({...ne,logo:Ae})),T("Logo erfolgreich geladen! Vergessen Sie nicht zu speichern.")},ke.onerror=()=>{S("Fehler beim Lesen der Datei"),D.target.value=""},ke.readAsDataURL(q)}catch{S("Fehler beim Verarbeiten des Logos"),D.target.value=""}finally{me(!1)}},Te=()=>{F(D=>({...D,logo:""}))},at=async D=>{D.preventDefault(),console.log("🏢 Company form submitted with data:",A);try{z(!0),await a(A),T("Unternehmensdaten gespeichert!")}catch(q){console.error("Company save error:",q),S("Fehler beim Speichern der Unternehmensdaten")}finally{z(!1)}},Ft=async D=>{D.preventDefault(),console.log("Tax form submitted, NOT calling clear data");try{z(!0),await a(A),T("Steuerliche Einstellungen gespeichert!")}catch(q){console.error("Tax settings save error:",q),S("Fehler beim Speichern der steuerlichen Einstellungen")}finally{z(!1)}},st=async D=>{D.preventDefault(),console.log("🖼️ Logo form submitted, saving logo only");try{z(!0),await a(A),T("Logo erfolgreich gespeichert!")}catch(q){console.error("Logo save error:",q),S("Fehler beim Speichern des Logos")}finally{z(!1)}},Xt=async D=>{D.preventDefault(),console.log("🏦 Bank form submitted, saving bank data only");try{z(!0),await a(A),T("Bankverbindung erfolgreich gespeichert!")}catch(q){console.error("Bank save error:",q),S("Fehler beim Speichern der Bankverbindung")}finally{z(!1)}},di=D=>{console.log("🔧 Kleinunternehmer checkbox changed to:",D.target.checked,"NOT deleting any data"),D.stopPropagation(),F({...A,kleinunternehmer:D.target.checked})},rr=async D=>{D.preventDefault();try{z(!0),await l(B),T("Nummernkreise gespeichert!")}catch{S("Fehler beim Speichern der Nummernkreise")}finally{z(!1)}},ir=(D,q,re)=>{const we=[...B];we[D]={...we[D],[q]:re},j(we)},Fe=async()=>{try{if(z(!0),!h){alert("Fehler: Datenbankadapter nicht verfügbar");return}const[D,q,re,we]=await Promise.all([h.listCustomers(),h.listInvoices(),h.listOffers(),h.listPackages()]),Re={companyData:n.companyData,numberingCircles:n.numberingCircles,customers:D,invoices:q,offers:re,packages:we,exportDate:new Date().toISOString(),version:"1.0.0"},ke=(await Zd(async()=>{const{default:wt}=await import("./jszip.min-B0wxociw.js").then(Je=>Je.j);return{default:wt}},[],import.meta.url)).default,Ae=new ke;Ae.file("backup.json",JSON.stringify(Re,null,2)),Ae.file("README.txt",`RawaLite Backup
Erstellt am: ${new Date().toLocaleDateString("de-DE")}
Version: ${Re.version}

Diese Datei enthält alle Ihre RawaLite-Daten und kann über die Datensicherungs-Funktion importiert werden.

Enthaltene Daten:
- Kunden: ${D.length}
- Rechnungen: ${q.length}
- Angebote: ${re.length}
- Pakete: ${we.length}
- Unternehmenseinstellungen
- Nummernkreise`);const ne=await Ae.generateAsync({type:"blob"}),de=window.URL.createObjectURL(ne),Xe=document.createElement("a");Xe.href=de;const gt=new Date,J=gt.toISOString().split("T")[0]+"_"+gt.toTimeString().split(" ")[0].replace(/:/g,"-");Xe.download=`rawalite-backup-${J}.zip`,document.body.appendChild(Xe),Xe.click(),document.body.removeChild(Xe),window.URL.revokeObjectURL(de),alert(`Backup erfolgreich erstellt!
      
Enthalten:
- ${D.length} Kunden
- ${q.length} Rechnungen  
- ${re.length} Angebote
- ${we.length} Pakete`)}catch(D){console.error("Backup error:",D),alert("Fehler beim Erstellen des Backups: "+D)}finally{z(!1)}},Dn=async D=>{try{if(z(!0),!h){alert("Fehler: Datenbankadapter nicht verfügbar");return}let q=[],re="",we=[];switch(D){case"customers":q=await h.listCustomers(),re="kunden",we=["ID","Nummer","Name","E-Mail","Telefon","Straße","PLZ","Ort","Notizen","Erstellt"];break;case"invoices":q=await h.listInvoices(),re="rechnungen",we=["ID","Nummer","Kunde ID","Titel","Status","Fällig am","Zwischensumme","MwSt-Satz","MwSt-Betrag","Gesamt","Notizen","Erstellt"];break;case"offers":q=await h.listOffers(),re="angebote",we=["ID","Nummer","Kunde ID","Titel","Status","Gültig bis","Zwischensumme","MwSt-Satz","MwSt-Betrag","Gesamt","Notizen","Erstellt"];break;case"packages":q=await h.listPackages(),re="pakete",we=["ID","Name","Beschreibung","Preis","Erstellt"];break}if(q.length===0){alert(`Keine ${re} zum Exportieren gefunden.`);return}const Re=[we.join(";"),...q.map(gt=>we.map(J=>{const wt=yo(gt,J);return`"${String(wt).replace(/"/g,'""')}"`}).join(";"))].join(`
`),ke=new Blob(["\uFEFF"+Re],{type:"text/csv;charset=utf-8;"}),Ae=window.URL.createObjectURL(ke),ne=document.createElement("a");ne.href=Ae;const de=new Date,Xe=de.toISOString().split("T")[0]+"_"+de.toTimeString().split(" ")[0].replace(/:/g,"-");ne.download=`${re}-${Xe}.csv`,document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),window.URL.revokeObjectURL(Ae),alert(`${q.length} ${re} erfolgreich als CSV exportiert!`)}catch(q){console.error("CSV Export error:",q),alert("Fehler beim CSV-Export: "+q)}finally{z(!1)}},yo=(D,q)=>{switch(q){case"ID":return D.id||"";case"Nummer":return D.number||D.invoiceNumber||D.offerNumber||"";case"Name":return D.name||"";case"E-Mail":return D.email||"";case"Telefon":return D.phone||"";case"Straße":return D.street||"";case"PLZ":return D.zip||"";case"Ort":return D.city||"";case"Notizen":return D.notes||"";case"Kunde ID":return D.customerId||"";case"Titel":return D.title||"";case"Status":return D.status||"";case"Fällig am":return D.dueDate||"";case"Gültig bis":return D.validUntil||"";case"Zwischensumme":return D.subtotal||"";case"MwSt-Satz":return D.vatRate||"";case"MwSt-Betrag":return D.vatAmount||"";case"Gesamt":return D.total||"";case"Beschreibung":return D.description||"";case"Preis":return D.price||"";case"Erstellt":return D.createdAt||"";default:return""}},pi=async D=>{var re,we,Re,ke,Ae;const q=(re=D.target.files)==null?void 0:re[0];if(q){if(!q.name.endsWith(".zip")){alert("Bitte wählen Sie eine ZIP-Datei aus.");return}if(!h){alert("Fehler: Datenbankadapter nicht verfügbar");return}try{z(!0);const ne=(await Zd(async()=>{const{default:Le}=await import("./jszip.min-B0wxociw.js").then(Oe=>Oe.j);return{default:Le}},[],import.meta.url)).default,gt=(await new ne().loadAsync(q)).file("backup.json");if(!gt){alert("Ungültige Backup-Datei: backup.json nicht gefunden.");return}const J=JSON.parse(await gt.async("text")),wt=`⚠️ ACHTUNG: DATEN WERDEN ÜBERSCHRIEBEN ⚠️

Das Backup enthält:
- ${((we=J.customers)==null?void 0:we.length)||0} Kunden
- ${((Re=J.invoices)==null?void 0:Re.length)||0} Rechnungen
- ${((ke=J.offers)==null?void 0:ke.length)||0} Angebote
- ${((Ae=J.packages)==null?void 0:Ae.length)||0} Pakete

WARNUNG: Der Import wird ALLE aktuellen Daten löschen und durch die Backup-Daten ersetzen!

Möchten Sie wirklich fortfahren?`;if(!confirm(wt)||!confirm("LETZTE WARNUNG: Alle aktuellen Daten werden unwiderruflich gelöscht! Fortfahren?"))return;try{const[Le,Oe,xn,lt]=await Promise.all([h.listCustomers(),h.listInvoices(),h.listOffers(),h.listPackages()]);await Promise.all([...Le.map(Ue=>h.deleteCustomer(Ue.id)),...Oe.map(Ue=>h.deleteInvoice(Ue.id)),...xn.map(Ue=>h.deleteOffer(Ue.id)),...lt.map(Ue=>h.deletePackage(Ue.id))])}catch(Le){console.warn("Fehler beim Löschen existierender Daten:",Le)}let Je={customers:0,invoices:0,offers:0,packages:0};if(J.customers&&Array.isArray(J.customers))for(const Le of J.customers)try{const{id:Oe,createdAt:xn,updatedAt:lt,...Ue}=Le;await h.createCustomer(Ue),Je.customers++}catch(Oe){console.warn("Fehler beim Importieren von Kunde:",Le,Oe)}if(J.offers&&Array.isArray(J.offers))for(const Le of J.offers)try{const{id:Oe,createdAt:xn,updatedAt:lt,...Ue}=Le;await h.createOffer(Ue),Je.offers++}catch(Oe){console.warn("Fehler beim Importieren von Angebot:",Le,Oe)}if(J.invoices&&Array.isArray(J.invoices))for(const Le of J.invoices)try{const{id:Oe,createdAt:xn,updatedAt:lt,...Ue}=Le;await h.createInvoice(Ue),Je.invoices++}catch(Oe){console.warn("Fehler beim Importieren von Rechnung:",Le,Oe)}if(J.packages&&Array.isArray(J.packages))for(const Le of J.packages)try{const{id:Oe,createdAt:xn,updatedAt:lt,...Ue}=Le;await h.createPackage(Ue),Je.packages++}catch(Oe){console.warn("Fehler beim Importieren von Paket:",Le,Oe)}if(J.companyData)try{console.log("🏢 Importing company data..."),await a(J.companyData),console.log("✅ Company data imported successfully")}catch(Le){console.warn("Error importing company data:",Le)}if(J.numberingCircles)try{console.log("🔢 Analyzing imported data for intelligent numbering...");const[Le,Oe,xn,lt]=await Promise.all([h.listCustomers(),h.listInvoices(),h.listOffers(),h.listPackages()]),Ue=(It,K)=>{const bo=new Set;It.forEach(ut=>{if(ut.number&&ut.number.startsWith(K)){const hi=ut.number.replace(K,""),Nr=parseInt(hi,10);isNaN(Nr)||bo.add(Nr)}});let fi=1;for(;bo.has(fi);)fi++;return Math.max(0,fi-1)},vo=J.numberingCircles.map(It=>{let K=0;switch(It.id){case"customers":K=Ue(Le,It.prefix);break;case"invoices":K=Ue(Oe,It.prefix);break;case"offers":K=Ue(xn,It.prefix);break;case"packages":K=Ue(lt,It.prefix);break}return console.log(`📊 ${It.id}: Next free number will be ${It.prefix}${(K+1).toString().padStart(3,"0")}, setting current to ${K}`),{...It,current:K}});console.log("🔢 Importing intelligent numbering circles..."),await l(vo),console.log("✅ Intelligent numbering circles imported successfully")}catch(Le){console.warn("Error importing intelligent numbering circles:",Le),await l(J.numberingCircles)}T(`✅ Backup erfolgreich importiert!

Importierte Daten:
- ${Je.customers} Kunden
- ${Je.invoices} Rechnungen
- ${Je.offers} Angebote
- ${Je.packages} Pakete
- Unternehmenseinstellungen
- Intelligente Nummernkreise (angepasst an vorhandene Daten)

🔄 Die Anwendung wurde aktualisiert. Sie können jetzt mit den importierten Daten arbeiten.`),console.log("✅ Backup import completed successfully")}catch(ne){console.error("Import error:",ne),alert("Fehler beim Importieren des Backups: "+ne)}finally{z(!1),D.target.value="",W(null)}}},xo=D=>{var re;const q=(re=D.target.files)==null?void 0:re[0];if(!q){W(null);return}if(!q.name.endsWith(".csv")){S("Bitte wählen Sie eine CSV-Datei aus."),W(null);return}W(q)},Cr=async()=>{if(!O){S("Bitte wählen Sie zuerst eine CSV-Datei aus.");return}if(!h){S("Fehler: Datenbankadapter nicht verfügbar");return}try{z(!0);const q=(await O.text()).split(`
`).filter(Ae=>Ae.trim());if(q.length<2){S("CSV-Datei ist leer oder hat keine Daten.");return}const re=q[0].split(";").map(Ae=>Ae.trim().replace(/^"|"$/g,"")),we=q.slice(1);console.log("CSV Headers:",re),console.log("CSV Data lines:",we.length);let Re=0,ke=0;if(ve==="customers"){for(const Ae of we)try{const ne=Ae.split(";").map(Xe=>Xe.trim().replace(/^"|"$/g,"")),de={};if(ne[0]&&(de.name=ne[0]),ne[1]&&(de.email=ne[1]),ne[2]&&(de.phone=ne[2]),ne[3]&&(de.street=ne[3]),ne[4]&&(de.zip=ne[4]),ne[5]&&(de.city=ne[5]),ne[6]&&(de.notes=ne[6]),!de.name){console.warn("Überspringe Zeile ohne Namen:",ne),ke++;continue}try{de.number=await d("customers")}catch{de.number=`K-${Date.now()}-${Math.floor(Math.random()*1e3)}`}await h.createCustomer(de),Re++}catch(ne){console.warn("Fehler beim Importieren einer CSV-Zeile:",Ae,ne),ke++}T(`✅ CSV-Import abgeschlossen!
        
Erfolgreich importiert: ${Re} Kunden
${ke>0?`Fehler: ${ke}`:""}

CSV-Format: Name;Email;Telefon;Straße;PLZ;Ort;Notizen`)}else if(ve==="offers"){for(const Ae of we)try{const ne=Ae.split(";").map(J=>J.trim().replace(/^"|"$/g,"")),de={};if(ne[0]&&(de.title=ne[0]),ne[1]&&(de.customerName=ne[1]),ne[2]&&(de.total=parseFloat(ne[2])||0),ne[3]&&(de.validUntil=ne[3]),ne[4]&&(de.notes=ne[4]),!de.title){console.warn("Überspringe Zeile ohne Titel:",ne),ke++;continue}let Xe=null;if(de.customerName){const wt=(await h.listCustomers()).find(Je=>Je.name.toLowerCase()===de.customerName.toLowerCase());wt&&(Xe=wt.id)}if(!Xe){console.warn("Kunde nicht gefunden für Angebot:",de.customerName),ke++;continue}try{de.offerNumber=await d("offers")}catch{de.offerNumber=`A-${Date.now()}-${Math.floor(Math.random()*1e3)}`}const gt={...de,customerId:Xe,lineItems:[],subtotal:de.total,vatAmount:0,vatRate:19,status:"draft"};delete gt.customerName,await h.createOffer(gt),Re++}catch(ne){console.warn("Fehler beim Importieren einer CSV-Zeile:",Ae,ne),ke++}T(`✅ CSV-Import abgeschlossen!
        
Erfolgreich importiert: ${Re} Angebote
${ke>0?`Fehler: ${ke}`:""}

CSV-Format: Titel;Kundenname;Gesamtbetrag;Gültig bis (YYYY-MM-DD);Notizen`)}else if(ve==="invoices"){for(const Ae of we)try{const ne=Ae.split(";").map(J=>J.trim().replace(/^"|"$/g,"")),de={};if(ne[0]&&(de.title=ne[0]),ne[1]&&(de.customerName=ne[1]),ne[2]&&(de.total=parseFloat(ne[2])||0),ne[3]&&(de.dueDate=ne[3]),ne[4]&&(de.notes=ne[4]),!de.title){console.warn("Überspringe Zeile ohne Titel:",ne),ke++;continue}let Xe=null;if(de.customerName){const wt=(await h.listCustomers()).find(Je=>Je.name.toLowerCase()===de.customerName.toLowerCase());wt&&(Xe=wt.id)}if(!Xe){console.warn("Kunde nicht gefunden für Rechnung:",de.customerName),ke++;continue}try{de.invoiceNumber=await d("invoices")}catch{de.invoiceNumber=`R-${Date.now()}-${Math.floor(Math.random()*1e3)}`}const gt={...de,customerId:Xe,lineItems:[],subtotal:de.total,vatAmount:0,vatRate:19,status:"draft"};delete gt.customerName,await h.createInvoice(gt),Re++}catch(ne){console.warn("Fehler beim Importieren einer CSV-Zeile:",Ae,ne),ke++}T(`✅ CSV-Import abgeschlossen!
        
Erfolgreich importiert: ${Re} Rechnungen
${ke>0?`Fehler: ${ke}`:""}

CSV-Format: Titel;Kundenname;Gesamtbetrag;Fällig am (YYYY-MM-DD);Notizen`)}else S(`CSV-Import für "${ve}" ist noch nicht implementiert.`)}catch(D){console.error("CSV Import error:",D),S("Fehler beim CSV-Import: "+D)}finally{z(!1),W(null)}},as=async()=>{if(console.log("🚨 CRITICAL: handleClearAllData was called! This should only happen from the Clear All Data button!"),console.trace("Call stack:"),!!confirm("WARNUNG: Alle Daten werden unwiderruflich gelöscht! Sind Sie sicher?")&&confirm("Letzte Warnung: Haben Sie ein Backup erstellt? Alle Daten gehen verloren!")){if(!h){alert("Fehler: Datenbankadapter nicht verfügbar");return}try{z(!0);let D=0;try{const q=await h.listCustomers();for(const re of q)await h.deleteCustomer(re.id),D++}catch(q){console.warn("Error deleting customers:",q)}try{const q=await h.listInvoices();for(const re of q)await h.deleteInvoice(re.id),D++}catch(q){console.warn("Error deleting invoices:",q)}try{const q=await h.listOffers();for(const re of q)await h.deleteOffer(re.id),D++}catch(q){console.warn("Error deleting offers:",q)}try{const q=await h.listPackages();for(const re of q)await h.deletePackage(re.id),D++}catch(q){console.warn("Error deleting packages:",q)}try{console.log("🔄 Resetting numbering circles to default values"),localStorage.removeItem("rawalite-numbering"),console.log("🗑️ Cleared localStorage numbering data");const q=nn.numberingCircles.map(re=>({...re,current:0,lastResetYear:void 0}));console.log("📝 Setting numbering circles to:",q),await l(q),console.log("✅ Numbering circles reset successfully")}catch(q){console.warn("Error resetting numbering circles:",q),localStorage.removeItem("rawalite-numbering"),localStorage.setItem("rawalite-numbering",JSON.stringify(nn.numberingCircles))}try{console.log("🔄 Resetting company data to defaults"),await a(nn.companyData),console.log("✅ Company data reset successfully")}catch(q){console.warn("Error resetting company data:",q)}T(`${D} Datensätze wurden gelöscht und alle Nummernkreise zurückgesetzt. Die Anwendung wird neu geladen...`),setTimeout(()=>{window.location.reload()},2e3)}catch(D){console.error("Clear data error:",D),alert("Fehler beim Löschen der Daten: "+D)}finally{z(!1)}}};return r?o.jsx("div",{className:"card",children:"Lade Einstellungen..."}):i?o.jsxs("div",{className:"card",children:["Fehler beim Laden der Einstellungen: ",i]}):o.jsxs("div",{className:"card",children:[o.jsxs("div",{style:{marginBottom:"24px"},children:[o.jsx("h2",{style:{margin:"0 0 4px 0"},children:e}),o.jsx("div",{style:{opacity:.7},children:"Konfiguriere deine Unternehmensdaten und Nummernkreise."})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",borderBottom:"1px solid rgba(0,0,0,.15)",flexWrap:"wrap"},children:[o.jsx("button",{onClick:()=>L("company"),style:{backgroundColor:N==="company"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="company"?"white":"#374151",border:N==="company"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="company"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="company"?"600":"500"},children:"Stammdaten"}),o.jsx("button",{onClick:()=>L("logo"),style:{backgroundColor:N==="logo"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="logo"?"white":"#374151",border:N==="logo"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="logo"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="logo"?"600":"500"},children:"Logo & Design"}),o.jsx("button",{onClick:()=>L("tax"),style:{backgroundColor:N==="tax"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="tax"?"white":"#374151",border:N==="tax"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="tax"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="tax"?"600":"500"},children:"Steuerliche Angaben"}),o.jsx("button",{onClick:()=>L("bank"),style:{backgroundColor:N==="bank"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="bank"?"white":"#374151",border:N==="bank"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="bank"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="bank"?"600":"500"},children:"Bankverbindung"}),o.jsx("button",{onClick:()=>L("numbering"),style:{backgroundColor:N==="numbering"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="numbering"?"white":"#374151",border:N==="numbering"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="numbering"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="numbering"?"600":"500"},children:"Nummernkreise"}),o.jsx("button",{onClick:()=>L("activities"),style:{backgroundColor:N==="activities"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="activities"?"white":"#374151",border:N==="activities"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="activities"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="activities"?"600":"500"},children:"Tätigkeiten"}),o.jsx("button",{onClick:()=>L("design"),style:{backgroundColor:N==="design"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="design"?"white":"#374151",border:N==="design"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="design"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="design"?"600":"500"},children:"🎨 Farbthemen"}),o.jsx("button",{onClick:()=>L("navigation"),style:{backgroundColor:N==="navigation"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="navigation"?"white":"#374151",border:N==="navigation"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="navigation"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="navigation"?"600":"500"},children:"🧭 Navigation"}),o.jsx("button",{onClick:()=>L("updates"),style:{backgroundColor:N==="updates"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="updates"?"white":"#374151",border:N==="updates"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="updates"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="updates"?"600":"500"},children:"Updates"}),o.jsx("button",{onClick:()=>L("maintenance"),style:{backgroundColor:N==="maintenance"?"#1e3a2e":"rgba(255,255,255,0.8)",color:N==="maintenance"?"white":"#374151",border:N==="maintenance"?"1px solid #1e3a2e":"1px solid rgba(0,0,0,.2)",padding:"8px 16px",borderRadius:"8px 8px 0 0",cursor:"pointer",borderBottom:N==="maintenance"?"2px solid #1e3a2e":"2px solid transparent",transition:"all 0.2s ease",fontWeight:N==="maintenance"?"600":"500"},children:"Datensicherung"})]}),N==="company"&&o.jsx("form",{onSubmit:at,children:o.jsxs("div",{style:{display:"grid",gap:"16px",gridTemplateColumns:"1fr 1fr"},children:[o.jsx("div",{style:{gridColumn:"1 / -1"},children:o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"Stammdaten"})}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Firmenname *"}),o.jsx("input",{type:"text",value:A.name,onChange:D=>F({...A,name:D.target.value}),required:!0,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"E-Mail"}),o.jsx("input",{type:"email",value:A.email,onChange:D=>F({...A,email:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Straße"}),o.jsx("input",{type:"text",value:A.street,onChange:D=>F({...A,street:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Telefon"}),o.jsx("input",{type:"tel",value:A.phone,onChange:D=>F({...A,phone:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"PLZ"}),o.jsx("input",{type:"text",value:A.postalCode,onChange:D=>F({...A,postalCode:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Ort"}),o.jsx("input",{type:"text",value:A.city,onChange:D=>F({...A,city:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Website"}),o.jsx("input",{type:"url",value:A.website,onChange:D=>F({...A,website:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"24px"},children:o.jsx("button",{type:"submit",disabled:C,style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:C?"Speichere...":"Stammdaten speichern"})})]})}),N==="logo"&&o.jsx("form",{onSubmit:st,children:o.jsxs("div",{style:{display:"grid",gap:"16px",maxWidth:"600px"},children:[o.jsx("div",{children:o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"Logo & Design"})}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Firmenlogo"}),o.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"8px"},children:[A.logo&&o.jsxs("div",{style:{position:"relative",display:"inline-block",maxWidth:"300px",padding:"16px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"8px",backgroundColor:"rgba(255,255,255,.05)"},children:[o.jsx("img",{src:A.logo,alt:"Firmenlogo",style:{maxWidth:"100%",maxHeight:"120px",objectFit:"contain",display:"block"}}),o.jsx("button",{type:"button",onClick:Te,style:{position:"absolute",top:"-8px",right:"-8px",background:"#ef4444",color:"white",border:"none",borderRadius:"50%",width:"24px",height:"24px",fontSize:"14px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center"},title:"Logo entfernen",children:"×"})]}),o.jsx("input",{type:"file",accept:"image/*",onChange:fe,disabled:he,style:{padding:"12px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",cursor:"pointer"}}),o.jsxs("div",{style:{fontSize:"14px",opacity:.7,lineHeight:"1.4"},children:[o.jsx("strong",{children:"Empfehlungen:"}),o.jsx("br",{}),"• Dateiformate: PNG, JPG, GIF",o.jsx("br",{}),"• Maximale Dateigröße: 2MB",o.jsx("br",{}),"• Empfohlene Größe: 200x80px",o.jsx("br",{}),"• Transparenter Hintergrund für beste Ergebnisse"]})]})]}),o.jsx("div",{style:{marginTop:"24px"},children:o.jsx("button",{type:"submit",disabled:C||he,style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:C?"Speichere...":"Logo speichern"})})]})}),N==="tax"&&o.jsx("form",{onSubmit:Ft,children:o.jsxs("div",{style:{display:"grid",gap:"16px",gridTemplateColumns:"1fr 1fr"},children:[o.jsx("div",{style:{gridColumn:"1 / -1"},children:o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"Steuerliche Angaben"})}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Steuernummer"}),o.jsx("input",{type:"text",value:A.taxNumber,onChange:D=>F({...A,taxNumber:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Umsatzsteuer-ID"}),o.jsx("input",{type:"text",value:A.vatId,onChange:D=>F({...A,vatId:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer"},children:[o.jsx("input",{type:"checkbox",checked:A.kleinunternehmer,onChange:di,style:{cursor:"pointer"}}),o.jsx("span",{style:{fontWeight:"500"},children:"Kleinunternehmer (§19 UStG)"})]}),o.jsx("div",{style:{fontSize:"12px",opacity:.7,marginTop:"4px",marginLeft:"28px"},children:"Als Kleinunternehmer weisen Sie keine Umsatzsteuer aus und sind nicht zum Vorsteuerabzug berechtigt."})]}),o.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"24px"},children:o.jsx("button",{type:"submit",disabled:C,style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:C?"Speichere...":"Steuerliche Angaben speichern"})})]})}),N==="bank"&&o.jsx("form",{onSubmit:Xt,children:o.jsxs("div",{style:{display:"grid",gap:"16px",gridTemplateColumns:"1fr 1fr"},children:[o.jsx("div",{style:{gridColumn:"1 / -1"},children:o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"Bankverbindung"})}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Bank"}),o.jsx("input",{type:"text",value:A.bankName,onChange:D=>F({...A,bankName:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"BIC"}),o.jsx("input",{type:"text",value:A.bankBic,onChange:D=>F({...A,bankBic:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{style:{gridColumn:"1 / -1"},children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"IBAN"}),o.jsx("input",{type:"text",value:A.bankAccount,onChange:D=>F({...A,bankAccount:D.target.value}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsx("div",{style:{gridColumn:"1 / -1",marginTop:"24px"},children:o.jsx("button",{type:"submit",disabled:C,style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"500"},children:C?"Speichere...":"Bankverbindung speichern"})})]})}),N==="numbering"&&o.jsxs("form",{onSubmit:rr,children:[o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"Nummernkreise"}),o.jsx("p",{style:{opacity:.7,marginBottom:"24px"},children:"Verwalte die automatische Nummerierung für verschiedene Dokumenttypen."}),B.map((D,q)=>o.jsxs("div",{style:{marginBottom:"24px",padding:"16px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"8px",backgroundColor:"rgba(255,255,255,.02)"},children:[o.jsx("h4",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:D.name}),o.jsxs("div",{style:{display:"grid",gap:"16px",gridTemplateColumns:"1fr 1fr 1fr 1fr"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Präfix"}),o.jsx("input",{type:"text",value:D.prefix,onChange:re=>ir(q,"prefix",re.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Stellen"}),o.jsx("input",{type:"number",min:"1",max:"10",value:D.digits,onChange:re=>ir(q,"digits",parseInt(re.target.value)||1),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Aktuell"}),o.jsx("input",{type:"number",min:"0",value:D.current,onChange:re=>ir(q,"current",parseInt(re.target.value)||0),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Reset"}),o.jsxs("select",{value:D.resetMode,onChange:re=>ir(q,"resetMode",re.target.value),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"},children:[o.jsx("option",{value:"never",children:"Nie"}),o.jsx("option",{value:"yearly",children:"Jährlich"})]})]})]}),o.jsxs("div",{style:{marginTop:"12px",fontSize:"14px",opacity:.7},children:[o.jsx("strong",{children:"Vorschau nächste Nummer:"})," ",D.prefix,(D.current+1).toString().padStart(D.digits,"0")]})]},D.id))]}),o.jsx("div",{style:{marginTop:"24px"},children:o.jsx("button",{type:"submit",disabled:C,style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:C?"not-allowed":"pointer",fontWeight:"500",opacity:C?.6:1},children:C?"Speichere...":"Nummernkreise speichern"})})]}),N==="activities"&&o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"Tätigkeiten verwalten"}),o.jsx("p",{style:{margin:"0 0 24px 0",color:"#6b7280",fontSize:"14px"},children:"Verwalten Sie Ihre Tätigkeiten mit individuellen Stundensätzen für die Leistungserfassung."}),o.jsxs("div",{style:{marginBottom:"24px",padding:"16px",border:"1px solid rgba(255,255,255,.1)",borderRadius:"8px",backgroundColor:"rgba(255,255,255,.02)"},children:[o.jsx("h4",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:Se?"Tätigkeit bearbeiten":"Neue Tätigkeit"}),o.jsxs("div",{style:{display:"grid",gap:"16px",gridTemplateColumns:"2fr 1fr 1fr auto"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Name *"}),o.jsx("input",{type:"text",value:V.name||"",onChange:D=>te({...V,name:D.target.value}),placeholder:"z.B. Entwicklung, Beratung, Design...",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Stundensatz (€) *"}),o.jsx("input",{type:"number",step:"0.01",min:"0",value:V.defaultHourlyRate||"",onChange:D=>{const q=D.target.value,re=parseFloat(q),we=!isNaN(re)&&re>0;console.log("💰 Hourly rate input changed:",{value:q,parsed:re,isValidNumber:we,isEmptyString:q==="",finalValue:q===""?void 0:re}),te({...V,defaultHourlyRate:q===""?void 0:re})},placeholder:"85.00",style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Status"}),o.jsxs("select",{value:V.isActive!==!1?"active":"inactive",onChange:D=>te({...V,isActive:D.target.value==="active"}),style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)"},children:[o.jsx("option",{value:"active",children:"Aktiv"}),o.jsx("option",{value:"inactive",children:"Inaktiv"})]})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",alignItems:"end"},children:[o.jsx("button",{type:"button",onClick:async()=>{var D,q;if(console.log("🎯 Button clicked!",{activityFormData:V,formDataKeys:Object.keys(V),name:V.name,nameType:typeof V.name,hourlyRate:V.defaultHourlyRate,hourlyRateType:typeof V.defaultHourlyRate,isDisabled:C||!((D=V.name)!=null&&D.trim())||!V.defaultHourlyRate||V.defaultHourlyRate<=0}),!((q=V.name)!=null&&q.trim())){console.log("❌ Name validation failed"),alert("Bitte geben Sie einen Namen für die Tätigkeit ein.");return}if(!V.defaultHourlyRate){console.log("❌ Hourly rate validation failed - no value"),alert("Bitte geben Sie einen Stundensatz ein.");return}if(V.defaultHourlyRate<=0){console.log("❌ Hourly rate validation failed - invalid value:",V.defaultHourlyRate),alert("Der Stundensatz muss größer als 0 sein.");return}console.log("✅ Validation passed, creating activity...");try{if(z(!0),Se)console.log("📝 Updating activity:",Se),await w(Se,{name:V.name,defaultHourlyRate:V.defaultHourlyRate,isActive:V.isActive!==!1,description:V.description}),T("Tätigkeit erfolgreich aktualisiert!"),Z(null);else{console.log("➕ Creating new activity...");const re=await y({name:V.name,defaultHourlyRate:V.defaultHourlyRate,isActive:V.isActive!==!1,description:V.description});console.log("✅ Activity created successfully:",re),T("Tätigkeit erfolgreich erstellt!")}te({})}catch(re){console.error("❌ Error in activity operation:",re),S(`Fehler beim ${Se?"Aktualisieren":"Erstellen"} der Tätigkeit: ${re}`)}finally{z(!1)}},disabled:C,style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:C?"not-allowed":"pointer",fontWeight:"500",opacity:C?.6:1},children:C?"Speichere...":Se?"Aktualisieren":"Hinzufügen"}),Se&&o.jsx("button",{type:"button",onClick:()=>{Z(null),te({})},style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",fontWeight:"500"},children:"Abbrechen"})]})]}),o.jsxs("div",{style:{marginTop:"12px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontWeight:"500"},children:"Beschreibung (optional)"}),o.jsx("textarea",{value:V.description||"",onChange:D=>te({...V,description:D.target.value}),placeholder:"Detaillierte Beschreibung der Tätigkeit...",rows:2,style:{width:"100%",padding:"8px",borderRadius:"4px",border:"1px solid rgba(255,255,255,.2)",backgroundColor:"rgba(255,255,255,.05)",color:"var(--foreground)",resize:"vertical"}})]})]}),o.jsxs("div",{children:[o.jsxs("h4",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:["Bestehende Tätigkeiten (",b.length,")"]}),b.length===0?o.jsxs("div",{style:{padding:"32px",textAlign:"center",color:"#6b7280",border:"1px dashed rgba(255,255,255,.2)",borderRadius:"8px"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:"⚠️"}),o.jsx("p",{style:{margin:"0 0 8px 0",fontWeight:"500"},children:"Noch keine Tätigkeiten definiert"}),o.jsx("p",{style:{margin:"0",fontSize:"14px"},children:"Erstellen Sie Tätigkeiten mit individuellen Stundensätzen für die Leistungserfassung."})]}):o.jsx("div",{style:{border:"1px solid rgba(255,255,255,.1)",borderRadius:"8px",backgroundColor:"rgba(255,255,255,.02)"},children:o.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[o.jsx("thead",{children:o.jsxs("tr",{style:{borderBottom:"1px solid rgba(255,255,255,.1)"},children:[o.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"500"},children:"Name"}),o.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"500"},children:"Stundensatz"}),o.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"500"},children:"Status"}),o.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"500"},children:"Beschreibung"}),o.jsx("th",{style:{padding:"12px",textAlign:"left",fontWeight:"500"},children:"Aktionen"})]})}),o.jsx("tbody",{children:b.map((D,q)=>o.jsxs("tr",{style:{borderBottom:q<b.length-1?"1px solid rgba(255,255,255,.05)":"none"},children:[o.jsx("td",{style:{padding:"12px"},children:o.jsx("div",{style:{fontWeight:"500"},children:D.name})}),o.jsx("td",{style:{padding:"12px"},children:o.jsxs("div",{style:{fontFamily:"monospace"},children:[D.defaultHourlyRate.toFixed(2)," €"]})}),o.jsx("td",{style:{padding:"12px"},children:o.jsx("span",{style:{padding:"4px 8px",borderRadius:"12px",fontSize:"12px",fontWeight:"500",backgroundColor:D.isActive?"#10b98120":"#6b728020",color:D.isActive?"#10b981":"#6b7280"},children:D.isActive?"Aktiv":"Inaktiv"})}),o.jsx("td",{style:{padding:"12px"},children:o.jsx("div",{style:{fontSize:"14px",color:"#6b7280",maxWidth:"200px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.description||"-"})}),o.jsx("td",{style:{padding:"12px"},children:o.jsxs("div",{style:{display:"flex",gap:"8px"},children:[o.jsx("button",{onClick:()=>{Z(D.id),te({name:D.name,defaultHourlyRate:D.defaultHourlyRate,isActive:D.isActive,description:D.description})},style:{color:"#3b82f6",background:"none",border:"none",cursor:"pointer",fontSize:"14px",textDecoration:"underline"},children:"Bearbeiten"}),o.jsx("button",{onClick:async()=>{if(confirm(`Tätigkeit "${D.name}" wirklich löschen?`))try{z(!0),await R(D.id),T("Tätigkeit erfolgreich gelöscht!")}catch(re){S("Fehler beim Löschen der Tätigkeit: "+re)}finally{z(!1)}},style:{color:"#ef4444",background:"none",border:"none",cursor:"pointer",fontSize:"14px",textDecoration:"underline"},children:"Löschen"})]})})]},D.id))})]})})]})]}),N==="design"&&o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"🎨 Farbthemen"}),o.jsx("p",{style:{margin:"0 0 24px 0",color:"#6b7280",fontSize:"14px"},children:"Wählen Sie ein Farbthema für die Anwendung. Das Theme wird sofort angewendet und automatisch gespeichert."}),o.jsxs("div",{style:{display:"grid",gap:"16px",gridTemplateColumns:"repeat(auto-fit, minmax(280px, 1fr))"},children:[Gl.map(D=>o.jsxs("div",{onClick:async()=>{if(!E)try{await g(D.id),T(`Farbthema "${D.name}" wurde angewendet!`)}catch(q){S(`Fehler beim Anwenden des Themes: ${q}`)}},style:{border:p===D.id?"3px solid var(--theme-accent)":"2px solid rgba(255,255,255,.1)",borderRadius:"12px",padding:"16px",cursor:E?"not-allowed":"pointer",background:`linear-gradient(135deg, ${D.primary}15 0%, ${D.secondary}10 100%)`,transition:"all 0.2s ease",position:"relative",opacity:E?.6:1,transform:p===D.id?"scale(1.02)":"scale(1)",boxShadow:p===D.id?`0 8px 25px ${D.primary}30, 0 4px 10px rgba(0,0,0,0.1)`:"0 2px 8px rgba(0,0,0,0.1)"},children:[o.jsxs("div",{style:{background:D.gradient,borderRadius:"8px",padding:"12px",marginBottom:"12px",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{color:"white",fontWeight:"600",fontSize:"16px",textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:D.name}),o.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"12px",marginTop:"4px"},children:D.description}),p===D.id&&o.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:"rgba(255,255,255,0.2)",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backdropFilter:"blur(10px)"},children:"✓ Aktiv"})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"20px",background:D.primary,borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}}),o.jsx("div",{style:{width:"40px",height:"20px",background:D.secondary,borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}}),o.jsx("div",{style:{width:"40px",height:"20px",background:D.accent,borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}})]}),o.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",lineHeight:"1.4"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Primary:"})," ",D.primary]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accent:"})," ",D.accent]})]}),o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:p===D.id?"transparent":"rgba(255,255,255,0)",borderRadius:"12px",transition:"background 0.2s ease",pointerEvents:"none"}})]},D.id)),o.jsxs("div",{onClick:async()=>{if(!E)try{await g("custom",$),T("Custom Colors-Theme wurde angewendet!")}catch(D){S(`Fehler beim Anwenden des Custom Themes: ${D}`)}},style:{border:p==="custom"?"3px solid var(--theme-accent)":"2px solid rgba(255,255,255,.1)",borderRadius:"12px",padding:"16px",cursor:E?"not-allowed":"pointer",background:`linear-gradient(135deg, ${$.primary}15 0%, ${$.secondary}10 100%)`,transition:"all 0.2s ease",position:"relative",opacity:E?.6:1,transform:p==="custom"?"scale(1.02)":"scale(1)",boxShadow:p==="custom"?`0 8px 25px ${$.primary}30, 0 4px 10px rgba(0,0,0,0.1)`:"0 2px 8px rgba(0,0,0,0.1)"},children:[o.jsxs("div",{style:{background:`linear-gradient(160deg, ${$.primary} 0%, ${$.secondary} 40%, ${$.secondary} 100%)`,borderRadius:"8px",padding:"12px",marginBottom:"12px",position:"relative",overflow:"hidden"},children:[o.jsx("div",{style:{color:"white",fontWeight:"600",fontSize:"16px",textShadow:"0 1px 2px rgba(0,0,0,0.2)"},children:"🎨 Custom Colors"}),o.jsx("div",{style:{color:"rgba(255,255,255,0.9)",fontSize:"12px",marginTop:"4px"},children:"Benutzerdefinierte Farbauswahl"}),p==="custom"&&o.jsx("div",{style:{position:"absolute",top:"8px",right:"8px",background:"rgba(255,255,255,0.2)",color:"white",padding:"4px 8px",borderRadius:"12px",fontSize:"11px",fontWeight:"600",backdropFilter:"blur(10px)"},children:"✓ Aktiv"})]}),o.jsxs("div",{style:{display:"flex",gap:"8px",marginBottom:"12px"},children:[o.jsx("div",{style:{width:"40px",height:"20px",background:$.primary,borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}}),o.jsx("div",{style:{width:"40px",height:"20px",background:$.secondary,borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}}),o.jsx("div",{style:{width:"40px",height:"20px",background:$.accent,borderRadius:"4px",border:"1px solid rgba(255,255,255,0.2)"}})]}),o.jsxs("div",{style:{fontSize:"12px",color:"#6b7280",lineHeight:"1.4"},children:[o.jsxs("div",{children:[o.jsx("strong",{children:"Primary:"})," ",$.primary]}),o.jsxs("div",{children:[o.jsx("strong",{children:"Accent:"})," ",$.accent]})]}),o.jsx("div",{style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:p==="custom"?"transparent":"rgba(255,255,255,0)",borderRadius:"12px",transition:"background 0.2s ease",pointerEvents:"none"}})]})]}),p==="custom"&&o.jsx(av,{colors:$,onChange:Q,onApply:async()=>{try{await g("custom",$),T("Custom Colors wurden angewendet!")}catch(D){S(`Fehler beim Anwenden der Custom Colors: ${D}`)}},isApplying:E}),o.jsxs("div",{style:{marginTop:"32px",padding:"16px",background:"rgba(59, 130, 246, 0.1)",border:"1px solid rgba(59, 130, 246, 0.2)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"18px"},children:"💡"}),o.jsx("strong",{style:{color:"#1e40af"},children:"Tipp:"})]}),o.jsx("p",{style:{margin:"0",color:"#1e40af",fontSize:"14px",lineHeight:"1.5"},children:"Das gewählte Farbthema wird auf die gesamte Anwendung angewendet, einschließlich der Sidebar, Buttons und Akzentfarben. Die Änderung ist sofort sichtbar und wird automatisch gespeichert."})]})]}),N==="navigation"&&o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"🧭 Navigation & Layout"}),o.jsx("p",{style:{margin:"0 0 24px 0",color:"#6b7280",fontSize:"14px"},children:"Wählen Sie, wo die Hauptnavigation angezeigt werden soll. Die Änderung wird sofort angewendet."}),o.jsxs("div",{style:{display:"grid",gap:"20px",gridTemplateColumns:"1fr 1fr",maxWidth:"800px"},children:[o.jsxs("div",{onClick:async()=>{if(!E)try{await v("sidebar"),T("Navigation in der Sidebar aktiviert!")}catch(D){S(`Fehler beim Umschalten der Navigation: ${D}`)}},style:{border:u==="sidebar"?"3px solid var(--theme-accent)":"2px solid rgba(255,255,255,.2)",borderRadius:"12px",padding:"20px",cursor:E?"not-allowed":"pointer",background:u==="sidebar"?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.02)",transition:"all 0.2s ease",position:"relative",opacity:E?.6:1,transform:u==="sidebar"?"scale(1.02)":"scale(1)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"8px",filter:u==="sidebar"?"none":"grayscale(0.5)"},children:"📋"}),o.jsx("h4",{style:{margin:"0",color:"var(--accent)",fontSize:"18px"},children:"Sidebar-Navigation"}),u==="sidebar"&&o.jsx("div",{style:{display:"inline-block",background:"var(--theme-accent)",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",marginTop:"8px"},children:"✓ Aktiv"})]}),o.jsxs("div",{style:{color:"#374151",fontSize:"14px",lineHeight:"1.5",textAlign:"center"},children:[o.jsxs("p",{style:{margin:"0 0 12px 0"},children:[o.jsx("strong",{children:"Klassische Ansicht"})," mit fixierter Seitenleiste links"]}),o.jsxs("ul",{style:{margin:"0",padding:"0",listStyle:"none",color:"#6b7280"},children:[o.jsx("li",{children:"✓ Menü immer sichtbar"}),o.jsx("li",{children:"✓ Mini-Dashboard in Sidebar"}),o.jsx("li",{children:"✓ Firmenlogo prominent"}),o.jsx("li",{children:"✓ Mehr vertikaler Platz für Inhalte"})]})]})]}),o.jsxs("div",{onClick:async()=>{if(!E)try{await v("header"),T("Navigation im Header aktiviert!")}catch(D){S(`Fehler beim Umschalten der Navigation: ${D}`)}},style:{border:u==="header"?"3px solid var(--theme-accent)":"2px solid rgba(255,255,255,.2)",borderRadius:"12px",padding:"20px",cursor:E?"not-allowed":"pointer",background:u==="header"?"rgba(255,255,255,0.05)":"rgba(255,255,255,0.02)",transition:"all 0.2s ease",position:"relative",opacity:E?.6:1,transform:u==="header"?"scale(1.02)":"scale(1)"},children:[o.jsxs("div",{style:{textAlign:"center",marginBottom:"16px"},children:[o.jsx("div",{style:{fontSize:"48px",marginBottom:"8px",filter:u==="header"?"none":"grayscale(0.5)"},children:"📱"}),o.jsx("h4",{style:{margin:"0",color:"var(--accent)",fontSize:"18px"},children:"Header-Navigation"}),u==="header"&&o.jsx("div",{style:{display:"inline-block",background:"var(--theme-accent)",color:"white",padding:"4px 12px",borderRadius:"12px",fontSize:"12px",fontWeight:"600",marginTop:"8px"},children:"✓ Aktiv"})]}),o.jsxs("div",{style:{color:"#374151",fontSize:"14px",lineHeight:"1.5",textAlign:"center"},children:[o.jsxs("p",{style:{margin:"0 0 12px 0"},children:[o.jsx("strong",{children:"Moderne Ansicht"})," mit Navigation im oberen Bereich"]}),o.jsxs("ul",{style:{margin:"0",padding:"0",listStyle:"none",color:"#6b7280"},children:[o.jsx("li",{children:"✓ Mehr horizontaler Platz"}),o.jsx("li",{children:"✓ Mobile-freundliches Layout"}),o.jsx("li",{children:"✓ Kompakte Menüführung"}),o.jsx("li",{children:"✓ Fokus auf Hauptinhalt"})]})]})]})]}),o.jsxs("div",{style:{marginTop:"32px",padding:"16px",background:"rgba(245, 158, 11, 0.1)",border:"1px solid rgba(245, 158, 11, 0.2)",borderRadius:"8px"},children:[o.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",marginBottom:"8px"},children:[o.jsx("span",{style:{fontSize:"18px"},children:"⚡"}),o.jsx("strong",{style:{color:"#d97706"},children:"Hinweis:"})]}),o.jsx("p",{style:{margin:"0",color:"#d97706",fontSize:"14px",lineHeight:"1.5"},children:"Die Navigation kann jederzeit umgestellt werden. Bei Header-Navigation wird die Sidebar vollständig ausgeblendet, um mehr Platz für den Hauptinhalt zu schaffen."})]})]}),N==="updates"&&o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"App-Updates & Versionsverwaltung"}),o.jsx("p",{style:{margin:"0 0 24px 0",color:"#6b7280",fontSize:"14px"},children:"Verwalten Sie App-Updates sicher mit automatischen Backups vor jedem Update."}),o.jsx("div",{style:{display:"flex",gap:"16px",marginBottom:"24px"},children:o.jsxs("button",{onClick:()=>Y(!0),style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:"pointer",fontWeight:"600",fontSize:"15px",display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",minWidth:"200px",transition:"all 0.2s ease",boxShadow:"0 2px 4px rgba(0, 0, 0, 0.1)"},children:[o.jsx("span",{style:{fontSize:"16px"},children:"🔄"}),o.jsx("span",{children:"Update-Manager öffnen"})]})}),o.jsx(sv,{isOpen:M,onClose:()=>Y(!1)})]}),N==="maintenance"&&o.jsxs("div",{children:[o.jsx("h3",{style:{margin:"0 0 16px 0",color:"var(--accent)"},children:"Datensicherung & Datenmanagement"}),o.jsxs("div",{style:{marginBottom:"32px"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151"},children:"Backup erstellen"}),o.jsx("p",{style:{margin:"0 0 16px 0",color:"#6b7280",fontSize:"14px"},children:"Erstellen Sie ein vollständiges Backup aller Ihrer Daten als ZIP-Datei."}),o.jsx("button",{type:"button",onClick:Fe,disabled:C,className:"btn",style:{backgroundColor:"var(--accent)",color:"white",border:"none",padding:"12px 24px",borderRadius:"8px",cursor:C?"not-allowed":"pointer",fontWeight:"500",opacity:C?.6:1},children:C?"Erstelle Backup...":"📦 Backup erstellen (ZIP)"})]}),o.jsxs("div",{style:{marginBottom:"32px"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151"},children:"Daten exportieren"}),o.jsx("p",{style:{margin:"0 0 16px 0",color:"#6b7280",fontSize:"14px"},children:"Exportieren Sie Ihre Daten als CSV-Dateien für die Verwendung in anderen Programmen."}),o.jsxs("div",{style:{display:"flex",gap:"12px",flexWrap:"wrap"},children:[o.jsx("button",{type:"button",onClick:()=>Dn("customers"),disabled:C,className:"btn btn-secondary",style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:C?"not-allowed":"pointer",fontWeight:"500",opacity:C?.6:1},children:"📄 Kunden exportieren (CSV)"}),o.jsx("button",{type:"button",onClick:()=>Dn("invoices"),disabled:C,className:"btn btn-secondary",style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:C?"not-allowed":"pointer",fontWeight:"500",opacity:C?.6:1},children:"🧾 Rechnungen exportieren (CSV)"}),o.jsx("button",{type:"button",onClick:()=>Dn("offers"),disabled:C,className:"btn btn-secondary",style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:C?"not-allowed":"pointer",fontWeight:"500",opacity:C?.6:1},children:"📋 Angebote exportieren (CSV)"}),o.jsx("button",{type:"button",onClick:()=>Dn("packages"),disabled:C,className:"btn btn-secondary",style:{backgroundColor:"#6b7280",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:C?"not-allowed":"pointer",fontWeight:"500",opacity:C?.6:1},children:"📦 Pakete exportieren (CSV)"})]})]}),o.jsxs("div",{style:{marginBottom:"32px"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#374151"},children:"Daten importieren"}),o.jsx("p",{style:{margin:"0 0 16px 0",color:"#6b7280",fontSize:"14px"},children:"Importieren Sie Backup-Dateien oder CSV-Daten zurück in die Anwendung."}),o.jsxs("div",{style:{marginBottom:"20px"},children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"Backup importieren (ZIP)"}),o.jsx("input",{type:"file",accept:".zip",onChange:pi,style:{padding:"8px",border:"1px solid rgba(0,0,0,.2)",borderRadius:"6px",backgroundColor:"rgba(255,255,255,0.9)",width:"100%",maxWidth:"400px"}})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"8px",fontWeight:"500",color:"#374151"},children:"CSV importieren"}),o.jsxs("div",{style:{display:"grid",gap:"12px",gridTemplateColumns:"auto 1fr auto",alignItems:"end"},children:[o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",color:"#6b7280"},children:"Datentyp"}),o.jsxs("select",{value:ve,onChange:D=>G(D.target.value),style:{padding:"8px",border:"1px solid rgba(0,0,0,.2)",borderRadius:"6px",backgroundColor:"rgba(255,255,255,0.9)",minWidth:"120px"},children:[o.jsx("option",{value:"customers",children:"Kunden"}),o.jsx("option",{value:"invoices",children:"Rechnungen"}),o.jsx("option",{value:"offers",children:"Angebote"})]})]}),o.jsxs("div",{children:[o.jsx("label",{style:{display:"block",marginBottom:"4px",fontSize:"12px",color:"#6b7280"},children:"CSV-Datei auswählen"}),o.jsx("input",{type:"file",accept:".csv",onChange:xo,style:{padding:"8px",border:"1px solid rgba(0,0,0,.2)",borderRadius:"6px",backgroundColor:"rgba(255,255,255,0.9)",width:"100%"}})]}),o.jsx("div",{children:o.jsx("button",{type:"button",onClick:Cr,disabled:!O||C,className:"btn btn-secondary",style:{backgroundColor:O?"#059669":"#6b7280",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:O&&!C?"pointer":"not-allowed",fontWeight:"500",opacity:O&&!C?1:.6,whiteSpace:"nowrap"},children:C?"Importiere...":"Import starten"})})]}),O&&o.jsxs("div",{style:{marginTop:"8px",fontSize:"14px",color:"#059669"},children:["📄 Ausgewählte Datei: ",O.name," (",Math.round(O.size/1024),"KB)"]})]})]}),o.jsxs("div",{style:{marginTop:"40px",padding:"20px",border:"2px solid #ef4444",borderRadius:"8px",backgroundColor:"rgba(239, 68, 68, 0.05)"},children:[o.jsx("h4",{style:{margin:"0 0 12px 0",color:"#ef4444"},children:"⚠️ Gefahrenbereich"}),o.jsx("p",{style:{margin:"0 0 16px 0",color:"#6b7280",fontSize:"14px"},children:"Diese Aktionen können nicht rückgängig gemacht werden. Erstellen Sie vorher ein Backup!"}),o.jsx("button",{type:"button",onClick:as,className:"btn btn-danger",style:{backgroundColor:"#ef4444",color:"white",border:"none",padding:"10px 20px",borderRadius:"6px",cursor:"pointer",fontWeight:"500"},children:"🗑️ Alle Daten löschen"})]})]})]})}const uv=()=>{const e=rs(),[t,n]=k.useState(5);return k.useEffect(()=>{const r=setInterval(()=>{n(i=>i<=1?(e("/",{replace:!0}),0):i-1)},1e3);return()=>clearInterval(r)},[e]),o.jsxs("div",{children:[o.jsx(Dh,{}),o.jsxs("div",{className:"card",children:[o.jsx("h2",{children:"🔍 Seite nicht gefunden"}),o.jsx("p",{children:"Der angeforderte Pfad existiert nicht."}),o.jsxs("p",{children:["Sie werden in ",o.jsx("strong",{children:t})," Sekunden automatisch zum Dashboard weitergeleitet."]}),o.jsx("button",{onClick:()=>e("/",{replace:!0}),style:{padding:"8px 16px",backgroundColor:"var(--accent)",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",marginTop:"12px"},children:"Sofort zum Dashboard"})]})]})};function cv(){const{currentNavigationMode:e}=kr();return o.jsxs("div",{className:"app","data-nav-mode":e,children:[o.jsx(I0,{}),o.jsx(Dh,{}),o.jsx("main",{className:"main",children:o.jsxs(Mx,{children:[o.jsx(Zt,{path:"/",element:o.jsx(Fx,{to:"/dashboard",replace:!0})}),o.jsx(Zt,{path:"/dashboard",element:o.jsx(F0,{})}),o.jsx(Zt,{path:"/kunden",element:o.jsx(G0,{})}),o.jsx(Zt,{path:"/angebote",element:o.jsx(Y0,{})}),o.jsx(Zt,{path:"/angebote/:id",element:o.jsx(Z0,{})}),o.jsx(Zt,{path:"/pakete",element:o.jsx(J0,{})}),o.jsx(Zt,{path:"/rechnungen",element:o.jsx(ev,{})}),o.jsx(Zt,{path:"/leistungsnachweise",element:o.jsx(rv,{})}),o.jsx(Zt,{path:"/einstellungen",element:o.jsx(lv,{})}),o.jsx(Zt,{path:"*",element:o.jsx(uv,{})})]})})]})}function dv(){return o.jsx(cv,{})}function pt(){return new Date().toISOString()}class Jd{async ready(){await Ke()}async getSettings(){await Ke();const t=ce("SELECT * FROM settings WHERE id = 1");if(!t||t.length===0){console.warn("⚠️ No settings found in database, creating default settings");const n={id:1,companyName:"",street:"",zip:"",city:"",taxId:"",kleinunternehmer:!0,nextCustomerNumber:1,nextOfferNumber:1,nextInvoiceNumber:1,nextTimesheetNumber:1,createdAt:pt(),updatedAt:pt()};return oe(`
        INSERT INTO settings (
          id, companyName, street, zip, city, taxId, kleinunternehmer,
          nextCustomerNumber, nextOfferNumber, nextInvoiceNumber, nextTimesheetNumber,
          createdAt, updatedAt
        ) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `,[1,"","","","","",1,1,1,1,1,n.createdAt,n.updatedAt]),n}return t[0]}async updateSettings(t){return Ne(async()=>{const r={...await this.getSettings(),...t,updatedAt:pt()};return oe(`
        UPDATE settings SET
          companyName = ?, street = ?, zip = ?, city = ?, taxId = ?,
          kleinunternehmer = ?, nextCustomerNumber = ?, nextOfferNumber = ?, nextInvoiceNumber = ?, nextTimesheetNumber = ?,
          listPreferences = ?, updatedAt = ?
        WHERE id = 1
      `,[r.companyName??null,r.street??null,r.zip??null,r.city??null,r.taxId??null,r.kleinunternehmer?1:0,r.nextCustomerNumber??1,r.nextOfferNumber??1,r.nextInvoiceNumber??1,r.nextTimesheetNumber??1,r.listPreferences??"{}",r.updatedAt]),r})}async listCustomers(){return await Ke(),ce("SELECT * FROM customers ORDER BY createdAt DESC")}async getCustomer(t){return await Ke(),ce("SELECT * FROM customers WHERE id = ?",[t])[0]??null}async createCustomer(t){return Ne(async()=>{const n=pt();return oe(`
        INSERT INTO customers (number, name, email, phone, street, zip, city, notes, createdAt, updatedAt)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `,[t.number,t.name,t.email??null,t.phone??null,t.street??null,t.zip??null,t.city??null,t.notes??null,n,n]),ce("SELECT * FROM customers WHERE rowid = last_insert_rowid()")[0]})}async updateCustomer(t,n){return Ne(async()=>{const r=await this.getCustomer(t);if(!r)throw new Error("Customer not found");const i={...r,...n,updatedAt:pt()};oe(`
        UPDATE customers SET
          number = ?, name = ?, email = ?, phone = ?, street = ?, zip = ?, city = ?, notes = ?, updatedAt = ?
        WHERE id = ?
      `,[i.number,i.name,i.email??null,i.phone??null,i.street??null,i.zip??null,i.city??null,i.notes??null,i.updatedAt,t]);const a=await this.getCustomer(t);if(!a)throw new Error("Customer update failed");return a})}async deleteCustomer(t){await Ne(async()=>{oe("DELETE FROM customers WHERE id = ?",[t])})}async listPackages(){await Ke();const t=ce("SELECT * FROM packages ORDER BY createdAt DESC"),n=[];for(const r of t){const i=ce("SELECT id, title, quantity, amount, parentItemId, description FROM package_line_items WHERE packageId = ? ORDER BY id",[r.id]);n.push({...r,lineItems:i.map(a=>({id:a.id,title:a.title,quantity:a.quantity,amount:a.amount,parentItemId:a.parentItemId||void 0,description:a.description||void 0}))})}return n}async getPackage(t){await Ke();const n=ce("SELECT * FROM packages WHERE id = ?",[t]);if(!n[0])return null;const r=n[0],i=ce("SELECT id, title, quantity, amount, parentItemId, description FROM package_line_items WHERE packageId = ? ORDER BY id",[t]);return{...r,lineItems:i.map(a=>({id:a.id,title:a.title,quantity:a.quantity,amount:a.amount,parentItemId:a.parentItemId||void 0,description:a.description||void 0}))}}async createPackage(t){return Ne(async()=>{const n=pt();oe(`
        INSERT INTO packages (internalTitle, parentPackageId, total, addVat, createdAt, updatedAt)
        VALUES (?, ?, ?, ?, ?, ?)
      `,[t.internalTitle,t.parentPackageId??null,t.total,t.addVat?1:0,n,n]);const i=ce("SELECT id FROM packages WHERE rowid = last_insert_rowid()")[0].id;for(const l of t.lineItems)oe("INSERT INTO package_line_items (packageId, title, quantity, amount, parentItemId, description) VALUES (?, ?, ?, ?, ?, ?)",[i,l.title,l.quantity,l.amount,l.parentItemId||null,l.description||null]);const a=await this.getPackage(i);if(!a)throw new Error("Package creation failed");return a})}async updatePackage(t,n){return Ne(async()=>{const r=await this.getPackage(t);if(!r)throw new Error("Package not found");const i={...r,...n,updatedAt:pt()};if(oe(`
        UPDATE packages SET
          internalTitle = ?, parentPackageId = ?, total = ?, addVat = ?, updatedAt = ?
        WHERE id = ?
      `,[i.internalTitle,i.parentPackageId??null,i.total,i.addVat?1:0,i.updatedAt,t]),n.lineItems){oe("DELETE FROM package_line_items WHERE packageId = ?",[t]);for(const l of n.lineItems)oe("INSERT INTO package_line_items (packageId, title, quantity, amount, parentItemId, description) VALUES (?, ?, ?, ?, ?, ?)",[t,l.title,l.quantity,l.amount,l.parentItemId||null,l.description||null])}const a=await this.getPackage(t);if(!a)throw new Error("Package update failed");return a})}async deletePackage(t){await Ne(async()=>{oe("DELETE FROM package_line_items WHERE packageId = ?",[t]),oe("DELETE FROM packages WHERE id = ?",[t])})}async listOffers(){await Ke();const t=ce("SELECT * FROM offers ORDER BY createdAt DESC"),n=[];for(const r of t){const i=ce("SELECT id, title, description, quantity, unitPrice, total, parentItemId FROM offer_line_items WHERE offerId = ? ORDER BY id",[r.id]);n.push({...r,lineItems:i.map(a=>({id:a.id,title:a.title,description:a.description||void 0,quantity:a.quantity,unitPrice:a.unitPrice,total:a.total,parentItemId:a.parentItemId||void 0}))})}return n}async getOffer(t){await Ke();const n=ce("SELECT * FROM offers WHERE id = ?",[t]);if(!n[0])return null;const r=n[0],i=ce("SELECT id, title, description, quantity, unitPrice, total, parentItemId FROM offer_line_items WHERE offerId = ? ORDER BY id",[t]);return{...r,lineItems:i.map(a=>({id:a.id,title:a.title,description:a.description||void 0,quantity:a.quantity,unitPrice:a.unitPrice,total:a.total,parentItemId:a.parentItemId||void 0}))}}async createOffer(t){return Ne(async()=>{const n=pt();oe(`
        INSERT INTO offers (offerNumber, customerId, title, status, validUntil, subtotal, vatRate, vatAmount, total, notes, createdAt, updatedAt)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `,[t.offerNumber,t.customerId,t.title,t.status,t.validUntil,t.subtotal,t.vatRate,t.vatAmount,t.total,t.notes||null,n,n]);const i=ce("SELECT id FROM offers WHERE rowid = last_insert_rowid()")[0].id;for(const l of t.lineItems)oe("INSERT INTO offer_line_items (offerId, title, description, quantity, unitPrice, total, parentItemId) VALUES (?, ?, ?, ?, ?, ?, ?)",[i,l.title,l.description||null,l.quantity,l.unitPrice,l.total,l.parentItemId||null]);const a=await this.getOffer(i);if(!a)throw new Error("Offer creation failed");return a})}async updateOffer(t,n){return Ne(async()=>{const r=await this.getOffer(t);if(!r)throw new Error("Offer not found");const i={...r,...n,updatedAt:pt()};if(oe(`
        UPDATE offers SET
          offerNumber = ?, customerId = ?, title = ?, status = ?, validUntil = ?, 
          subtotal = ?, vatRate = ?, vatAmount = ?, total = ?, notes = ?, updatedAt = ?
        WHERE id = ?
      `,[i.offerNumber,i.customerId,i.title,i.status,i.validUntil,i.subtotal,i.vatRate,i.vatAmount,i.total,i.notes||null,i.updatedAt,t]),n.lineItems){oe("DELETE FROM offer_line_items WHERE offerId = ?",[t]);for(const l of n.lineItems)oe("INSERT INTO offer_line_items (offerId, title, description, quantity, unitPrice, total, parentItemId) VALUES (?, ?, ?, ?, ?, ?, ?)",[t,l.title,l.description||null,l.quantity,l.unitPrice,l.total,l.parentItemId||null])}const a=await this.getOffer(t);if(!a)throw new Error("Offer update failed");return a})}async deleteOffer(t){await Ne(async()=>{oe("DELETE FROM offer_line_items WHERE offerId = ?",[t]),oe("DELETE FROM offers WHERE id = ?",[t])})}async listInvoices(){await Ke();const t=ce("SELECT * FROM invoices ORDER BY createdAt DESC"),n=[];for(const r of t){const i=ce("SELECT id, title, description, quantity, unitPrice, total, parentItemId FROM invoice_line_items WHERE invoiceId = ? ORDER BY id",[r.id]);n.push({...r,lineItems:i.map(a=>({id:a.id,title:a.title,description:a.description||void 0,quantity:a.quantity,unitPrice:a.unitPrice,total:a.total,parentItemId:a.parentItemId||void 0}))})}return n}async getInvoice(t){await Ke();const n=ce("SELECT * FROM invoices WHERE id = ?",[t]);if(!n[0])return null;const r=n[0],i=ce("SELECT id, title, description, quantity, unitPrice, total, parentItemId FROM invoice_line_items WHERE invoiceId = ? ORDER BY id",[t]);return{...r,lineItems:i.map(a=>({id:a.id,title:a.title,description:a.description||void 0,quantity:a.quantity,unitPrice:a.unitPrice,total:a.total,parentItemId:a.parentItemId||void 0}))}}async createInvoice(t){return Ne(async()=>{const n=pt();oe(`
        INSERT INTO invoices (invoiceNumber, customerId, offerId, title, status, dueDate, subtotal, vatRate, vatAmount, total, notes, createdAt, updatedAt)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `,[t.invoiceNumber,t.customerId,t.offerId||null,t.title,t.status,t.dueDate,t.subtotal,t.vatRate,t.vatAmount,t.total,t.notes||null,n,n]);const i=ce("SELECT id FROM invoices WHERE rowid = last_insert_rowid()")[0].id;for(const l of t.lineItems)oe("INSERT INTO invoice_line_items (invoiceId, title, description, quantity, unitPrice, total, parentItemId) VALUES (?, ?, ?, ?, ?, ?, ?)",[i,l.title,l.description||null,l.quantity,l.unitPrice,l.total,l.parentItemId||null]);const a=await this.getInvoice(i);if(!a)throw new Error("Invoice creation failed");return a})}async updateInvoice(t,n){return Ne(async()=>{const r=await this.getInvoice(t);if(!r)throw new Error("Invoice not found");const i={...r,...n,updatedAt:pt()};if(oe(`
        UPDATE invoices SET
          invoiceNumber = ?, customerId = ?, offerId = ?, title = ?, status = ?, dueDate = ?, 
          subtotal = ?, vatRate = ?, vatAmount = ?, total = ?, notes = ?, updatedAt = ?
        WHERE id = ?
      `,[i.invoiceNumber,i.customerId,i.offerId||null,i.title,i.status,i.dueDate,i.subtotal,i.vatRate,i.vatAmount,i.total,i.notes||null,i.updatedAt,t]),n.lineItems){oe("DELETE FROM invoice_line_items WHERE invoiceId = ?",[t]);for(const l of n.lineItems)oe("INSERT INTO invoice_line_items (invoiceId, title, description, quantity, unitPrice, total, parentItemId) VALUES (?, ?, ?, ?, ?, ?, ?)",[t,l.title,l.description||null,l.quantity,l.unitPrice,l.total,l.parentItemId||null])}const a=await this.getInvoice(t);if(!a)throw new Error("Invoice update failed");return a})}async deleteInvoice(t){await Ne(async()=>{oe("DELETE FROM invoice_line_items WHERE invoiceId = ?",[t]),oe("DELETE FROM invoices WHERE id = ?",[t])})}async listTimesheets(){await Ke();const t=ce("SELECT * FROM timesheets ORDER BY createdAt DESC"),n=[];for(const r of t){const i=await this.getTimesheetActivities(r.id);n.push({...r,activities:i})}return n}async getTimesheet(t){await Ke();const n=ce("SELECT * FROM timesheets WHERE id = ?",[t]);if(!n[0])return null;const r=n[0],i=await this.getTimesheetActivities(t);return{...r,activities:i}}async createTimesheet(t){return Ne(async()=>{const n=pt();oe(`
        INSERT INTO timesheets (timesheetNumber, customerId, title, status, startDate, endDate, subtotal, vatRate, vatAmount, total, notes, createdAt, updatedAt)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
      `,[t.timesheetNumber,t.customerId,t.title,t.status,t.startDate,t.endDate,t.subtotal,t.vatRate,t.vatAmount,t.total,t.notes||null,n,n]);const i=ce("SELECT id FROM timesheets WHERE rowid = last_insert_rowid()")[0].id;for(const l of t.activities)await this._createTimesheetActivityInternal({timesheetId:i,activityId:l.activityId,hours:l.hours,hourlyRate:l.hourlyRate,total:l.total,description:l.description,position:l.position});const a=await this.getTimesheet(i);if(!a)throw new Error("Timesheet creation failed");return a})}async updateTimesheet(t,n){return Ne(async()=>{const r=await this.getTimesheet(t);if(!r)throw new Error("Timesheet not found");const i={...r,...n,updatedAt:pt()};if(oe(`
        UPDATE timesheets SET
          timesheetNumber = ?, customerId = ?, title = ?, status = ?, startDate = ?, endDate = ?, 
          subtotal = ?, vatRate = ?, vatAmount = ?, total = ?, notes = ?, updatedAt = ?
        WHERE id = ?
      `,[i.timesheetNumber,i.customerId,i.title,i.status,i.startDate,i.endDate,i.subtotal,i.vatRate,i.vatAmount,i.total,i.notes||null,i.updatedAt,t]),n.activities){oe("DELETE FROM timesheet_activities WHERE timesheetId = ?",[t]);for(const l of n.activities)await this._createTimesheetActivityInternal({timesheetId:t,activityId:l.activityId,hours:l.hours,hourlyRate:l.hourlyRate,total:l.total,description:l.description,position:l.position})}const a=await this.getTimesheet(t);if(!a)throw new Error("Timesheet update failed");return a})}async deleteTimesheet(t){await Ne(async()=>{oe("DELETE FROM timesheets WHERE id = ?",[t])})}async listActivities(){return await Ke(),ce("SELECT * FROM activities ORDER BY name ASC")}async getActivity(t){return await Ke(),ce("SELECT * FROM activities WHERE id = ?",[t])[0]??null}async createActivity(t){return Ne(async()=>{const n=pt();oe("INSERT INTO activities (name, description, defaultHourlyRate, isActive, createdAt, updatedAt) VALUES (?, ?, ?, ?, ?, ?)",[t.name,t.description||null,t.defaultHourlyRate,t.isActive?1:0,n,n]);const i=ce("SELECT id FROM activities WHERE rowid = last_insert_rowid()")[0].id,a=await this.getActivity(i);if(!a)throw new Error("Activity creation failed");return a})}async updateActivity(t,n){return Ne(async()=>{const r=await this.getActivity(t);if(!r)throw new Error("Activity not found");const i={...r,...n,updatedAt:pt()};oe("UPDATE activities SET name = ?, description = ?, defaultHourlyRate = ?, isActive = ?, updatedAt = ? WHERE id = ?",[i.name,i.description||null,i.defaultHourlyRate,i.isActive?1:0,i.updatedAt,t]);const a=await this.getActivity(t);if(!a)throw new Error("Activity update failed");return a})}async deleteActivity(t){await Ne(async()=>{oe("DELETE FROM activities WHERE id = ?",[t])})}async getTimesheetActivities(t){return await Ke(),ce("SELECT * FROM timesheet_activities WHERE timesheetId = ? ORDER BY id",[t])}async _createTimesheetActivityInternal(t){return oe("INSERT INTO timesheet_activities (timesheetId, activityId, hours, hourlyRate, total, description, position) VALUES (?, ?, ?, ?, ?, ?, ?)",[t.timesheetId,t.activityId,t.hours,t.hourlyRate,t.total,t.description||null,t.position||null]),ce("SELECT * FROM timesheet_activities WHERE rowid = last_insert_rowid()")[0]}async createTimesheetActivity(t){return Ne(async()=>this._createTimesheetActivityInternal(t))}async updateTimesheetActivity(t,n){return Ne(async()=>{const r=ce("SELECT * FROM timesheet_activities WHERE id = ?",[t])[0];if(!r)throw new Error("Timesheet activity not found");const i={...r,...n};oe("UPDATE timesheet_activities SET timesheetId = ?, activityId = ?, hours = ?, hourlyRate = ?, total = ?, description = ?, position = ? WHERE id = ?",[i.timesheetId,i.activityId,i.hours,i.hourlyRate,i.total,i.description||null,i.position||null,t]);const a=ce("SELECT * FROM timesheet_activities WHERE id = ?",[t]);if(!a[0])throw new Error("Timesheet activity update failed");return a[0]})}async deleteTimesheetActivity(t){await Ne(async()=>{oe("DELETE FROM timesheet_activities WHERE id = ?",[t])})}async fixLineItemPrices(){let t=0;const n=[];try{return await Ne(async()=>{const r=ce(`
          SELECT id, offerId, quantity, unitPrice, total 
          FROM offer_line_items 
          WHERE unitPrice IS NULL OR total IS NULL OR unitPrice = 0 OR total = 0
        `);for(const a of r)try{const l=a.quantity||1,d=a.unitPrice||0,p=a.total||0;let u=d,m=p;(d===0||d===null)&&p>0?u=p/l:(p===0||p===null)&&d>0?m=d*l:d===0&&p===0&&(u=0,m=0),oe(`
              UPDATE offer_line_items 
              SET unitPrice = ?, total = ? 
              WHERE id = ?
            `,[u,m,a.id]),t++}catch(l){n.push(`Failed to fix offer line item ${a.id}: ${l}`)}const i=ce(`
          SELECT id, invoiceId, quantity, unitPrice, total 
          FROM invoice_line_items 
          WHERE unitPrice IS NULL OR total IS NULL OR unitPrice = 0 OR total = 0
        `);for(const a of i)try{const l=a.quantity||1,d=a.unitPrice||0,p=a.total||0;let u=d,m=p;(d===0||d===null)&&p>0?u=p/l:(p===0||p===null)&&d>0?m=d*l:d===0&&p===0&&(u=0,m=0),oe(`
              UPDATE invoice_line_items 
              SET unitPrice = ?, total = ? 
              WHERE id = ?
            `,[u,m,a.id]),t++}catch(l){n.push(`Failed to fix invoice line item ${a.id}: ${l}`)}}),console.log(`✅ Line Item Data Fix: ${t} items corrected, ${n.length} errors`),{fixed:t,errors:n}}catch(r){return n.push(`Transaction failed: ${r}`),{fixed:t,errors:n}}}async getListPreferences(){await Ke();const t=await this.getSettings();try{return t.listPreferences?JSON.parse(t.listPreferences):{}}catch(n){return console.warn("Error parsing listPreferences:",n),{}}}async setListPreferences(t){return Ne(async()=>{const n=JSON.stringify(t);oe("UPDATE settings SET listPreferences = ?, updatedAt = ? WHERE id = 1",[n,pt()])})}async updateListPreference(t,n){return Ne(async()=>{const r=await this.getListPreferences(),a={...r[t]||{},...n},l={...r,[t]:a};await this.setListPreferences(l)})}}function pv({children:e,mode:t="sqlite"}){const[n,r]=k.useState(null),[i,a]=k.useState(!1),[l,d]=k.useState(),p=k.useMemo(()=>t==="sqlite"?new Jd:new Jd,[t]);return k.useEffect(()=>{let u=!0;return(async()=>{try{if(await p.ready(),!u)return;r(p),a(!0)}catch(m){d(String((m==null?void 0:m.message)??m))}})(),()=>{u=!1}},[p]),o.jsx(Lh.Provider,{value:{adapter:n,ready:i,error:l},children:e})}class Fh{static log(t){console.log(t)}}class fv{log(t,n,r){const i=r?`[Backup${t.toUpperCase()}] ${n} - ${JSON.stringify(r)}`:`[Backup${t.toUpperCase()}] ${n}`;Fh.log(i)}async create(t){var n;try{if(this.log("info","Creating backup via filesystem IPC",t),typeof window>"u"||!((n=window.rawalite)!=null&&n.backup))return this.log("warn","Backup IPC not available - skipping backup in non-Electron environment"),{success:!1,error:"Backup functionality not available in browser environment"};const r=await window.rawalite.backup.create(t);return r.success?this.log("info","Backup created successfully",{backupId:r.backupId,filePath:r.filePath,size:r.size}):this.log("error","Backup creation failed",{error:r.error}),r}catch(r){const i=r instanceof Error?r.message:String(r);return this.log("error","Backup creation error",{error:i}),{success:!1,error:`Backup creation failed: ${i}`}}}async list(){var t;try{if(this.log("info","Listing backups"),typeof window>"u"||!((t=window.rawalite)!=null&&t.backup))return this.log("warn","Backup IPC not available, returning empty list"),[];const n=await window.rawalite.backup.list();if(n.success&&n.backups){const r=n.backups.map(i=>({...i,sizeFormatted:this.formatBytes(i.size),dateFormatted:this.formatDate(i.createdAt)}));return this.log("info","Backups listed successfully",{count:r.length}),r}else return this.log("error","Failed to list backups",{error:n.error}),[]}catch(n){return this.log("error","Error listing backups",{error:n instanceof Error?n.message:String(n)}),[]}}async prune(t={}){var n;try{const r={keep:5,maxTotalMB:500,...t};if(this.log("info","Pruning old backups",r),typeof window>"u"||!((n=window.rawalite)!=null&&n.backup))throw new Error("Backup IPC not available");const i=await window.rawalite.backup.prune(r);return i.success?this.log("info","Backup pruning completed",{removedCount:i.removedCount}):this.log("error","Backup pruning failed",{error:i.error}),i}catch(r){const i=r instanceof Error?r.message:String(r);return this.log("error","Backup pruning error",{error:i}),{success:!1,error:`Backup pruning failed: ${i}`}}}async createPreUpdateBackup(t){return this.create({kind:"pre-update",description:`Automatic backup before update from v${t}`,payloadMeta:{version:t}})}async createManualBackup(t){return this.create({kind:"manual",description:t||"Manual backup created by user"})}async createPostDownloadBackup(t){return this.create({kind:"post-download",description:`Backup after downloading v${t}`,payloadMeta:{version:t}})}async autoCleanup(){return this.prune({keep:5,maxTotalMB:500})}async getStats(){var t,n;try{const r=await this.list();if(r.length===0)return{totalCount:0,totalSize:0,totalSizeFormatted:"0 Bytes"};const i=r.reduce((l,d)=>l+d.size,0),a=[...r].sort((l,d)=>new Date(l.createdAt).getTime()-new Date(d.createdAt).getTime());return{totalCount:r.length,totalSize:i,totalSizeFormatted:this.formatBytes(i),oldestBackup:(t=a[0])==null?void 0:t.dateFormatted,newestBackup:(n=a[a.length-1])==null?void 0:n.dateFormatted}}catch(r){return this.log("error","Error getting backup stats",{error:r instanceof Error?r.message:String(r)}),{totalCount:0,totalSize:0,totalSizeFormatted:"0 Bytes"}}}isAvailable(){var t;return typeof window<"u"&&!!((t=window.rawalite)!=null&&t.backup)}formatBytes(t){if(t===0)return"0 Bytes";const n=1024,r=["Bytes","KB","MB","GB"],i=Math.floor(Math.log(t)/Math.log(n));return parseFloat((t/Math.pow(n,i)).toFixed(2))+" "+r[i]}formatDate(t){return new Date(t).toLocaleString("de-DE",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"})}}const Js=new fv;class hv{constructor(){Qt(this,"SCHEMA_VERSION_TABLE","schema_versions");Qt(this,"BACKUP_METADATA_TABLE","backup_metadata");Qt(this,"CURRENT_VERSION",5)}log(t,n,r){const i=r?`[Migration${t.toUpperCase()}] ${n} - ${JSON.stringify(r)}`:`[Migration${t.toUpperCase()}] ${n}`;Fh.log(i)}async initialize(){var t;try{this.log("info","Starting migration system initialization");try{const n=await Ke();this.log("info","Database connection established")}catch(n){this.log("warn","Database connection failed, will be created on first use",{error:n instanceof Error?n.message:String(n)})}await this.createMigrationTablesIfNeeded(),await this.detectAndRunMigrations(),this.log("info","Migration system initialization completed successfully")}catch(n){if(this.log("error","Migration system initialization failed",{error:n instanceof Error?n.message:String(n)}),typeof window<"u"&&((t=window.location)==null?void 0:t.hostname)==="localhost"){this.log("warn","Development mode: Migration failure is non-critical");return}throw n}}async createMigrationTablesIfNeeded(){var t;try{const n=await Ke();await oe(`
        CREATE TABLE IF NOT EXISTS ${this.SCHEMA_VERSION_TABLE} (
          id INTEGER PRIMARY KEY CHECK (id = 1),
          version INTEGER NOT NULL DEFAULT 0,
          lastMigration TEXT,
          backupPath TEXT,
          migratedAt TEXT NOT NULL,
          appVersion TEXT NOT NULL,
          createdAt TEXT NOT NULL DEFAULT (datetime('now')),
          updatedAt TEXT NOT NULL DEFAULT (datetime('now'))
        )
      `),await oe(`
        CREATE TABLE IF NOT EXISTS ${this.BACKUP_METADATA_TABLE} (
          id TEXT PRIMARY KEY,
          version INTEGER NOT NULL,
          appVersion TEXT NOT NULL,
          size INTEGER NOT NULL,
          createdAt TEXT NOT NULL,
          description TEXT NOT NULL,
          checksumSHA256 TEXT NOT NULL,
          isValid INTEGER NOT NULL DEFAULT 1
        )
      `);const r=new Date().toISOString();try{await oe(`
          INSERT OR IGNORE INTO ${this.SCHEMA_VERSION_TABLE} 
          (id, version, migratedAt, appVersion) 
          VALUES (1, 1, ?, ?)
        `,[r,this.getAppVersion()]),(await ce(`SELECT * FROM ${this.SCHEMA_VERSION_TABLE} WHERE id = 1 AND migratedAt = ?`,[r])).length>0?this.log("info","Schema version tracking initialized",{version:1}):this.log("info","Schema version tracking already exists")}catch(i){this.log("warn","Schema version initialization had issues, but continuing",{error:i instanceof Error?i.message:String(i)})}}catch(n){if(this.log("error","Failed to create migration tables",{error:n instanceof Error?n.message:String(n)}),typeof window<"u"&&((t=window.location)==null?void 0:t.hostname)==="localhost"){this.log("warn","Development mode: Migration table creation failure ignored");return}throw n}}async checkTableExists(t){try{return(await ce(`
        SELECT name FROM sqlite_master 
        WHERE type='table' AND name = ?
      `,[t])).length>0}catch(n){return this.log("warn",`Error checking table existence: ${t}`,{error:n}),!1}}getMigrationSteps(){return[{version:1,name:"initial_schema_setup",description:"Sets up initial database schema version tracking",up:async()=>{this.log("info","Initial schema setup completed")},down:async()=>{this.log("warn","Cannot downgrade initial schema")},test:async()=>(await ce(`
            SELECT name FROM sqlite_master 
            WHERE type='table' AND name IN ('${this.SCHEMA_VERSION_TABLE}', '${this.BACKUP_METADATA_TABLE}')
          `)).length===2},{version:2,name:"add_activity_tracking",description:"Adds activity tracking capabilities to timesheets",up:async()=>{(await ce(`
            SELECT name FROM sqlite_master WHERE type='table' AND name='activities'
          `)).length===0&&(await oe(`
              CREATE TABLE IF NOT EXISTS activities (
                id INTEGER PRIMARY KEY AUTOINCREMENT,
                name TEXT NOT NULL,
                description TEXT,
                defaultHourlyRate REAL NOT NULL,
                isActive BOOLEAN DEFAULT 1,
                createdAt TEXT DEFAULT CURRENT_TIMESTAMP,
                updatedAt TEXT DEFAULT CURRENT_TIMESTAMP
              )
            `),this.log("info","Created activities table")),(await ce("PRAGMA table_info(timesheets)")).some(i=>i.name==="activityId")||(await oe("ALTER TABLE timesheets ADD COLUMN activityId INTEGER"),this.log("info","Added activityId column to timesheets"))},down:async()=>{this.log("warn","Downgrade not implemented for activity tracking")},test:async()=>{const t=await ce(`
            SELECT name FROM sqlite_master WHERE type='table' AND name='activities'
          `),r=(await ce("PRAGMA table_info(timesheets)")).some(i=>i.name==="activityId");return t.length>0&&r}},{version:3,name:"improve_numbering_system",description:"Improves the numbering system for better control",up:async()=>{this.log("info","Numbering system improvements applied"),await oe("CREATE INDEX IF NOT EXISTS idx_customers_number ON customers(number)"),await oe("CREATE INDEX IF NOT EXISTS idx_invoices_number ON invoices(invoiceNumber)"),await oe("CREATE INDEX IF NOT EXISTS idx_offers_number ON offers(offerNumber)")},down:async()=>{this.log("warn","Downgrade not implemented for numbering improvements")},test:async()=>(await ce(`
            SELECT name FROM sqlite_master 
            WHERE type='index' AND name IN (
              'idx_customers_number', 
              'idx_invoices_number', 
              'idx_offers_number'
            )
          `)).length>=3},{version:4,name:"add_audit_fields",description:"Adds audit fields for better tracking",up:async()=>{const t=["customers","invoices","offers","packages"];for(const n of t)try{const r=await ce(`PRAGMA table_info(${n})`);r.some(i=>i.name==="createdAt")||await oe(`ALTER TABLE ${n} ADD COLUMN createdAt TEXT DEFAULT CURRENT_TIMESTAMP`),r.some(i=>i.name==="updatedAt")||await oe(`ALTER TABLE ${n} ADD COLUMN updatedAt TEXT DEFAULT CURRENT_TIMESTAMP`),this.log("info",`Added audit fields to ${n} table`)}catch(r){this.log("warn",`Could not add audit fields to ${n}: ${r}`)}},down:async()=>{this.log("warn","Downgrade not implemented for audit fields")},test:async()=>{try{const t=await ce("PRAGMA table_info(customers)");return t.some(n=>n.name==="createdAt")&&t.some(n=>n.name==="updatedAt")}catch{return!0}}},{version:5,name:"optimize_indexes",description:"Optimizes database indexes for better performance",up:async()=>{const t=["CREATE INDEX IF NOT EXISTS idx_customers_email ON customers(email)","CREATE INDEX IF NOT EXISTS idx_invoices_customer ON invoices(customerId)","CREATE INDEX IF NOT EXISTS idx_invoices_status ON invoices(status)","CREATE INDEX IF NOT EXISTS idx_offers_customer ON offers(customerId)","CREATE INDEX IF NOT EXISTS idx_offers_status ON offers(status)","CREATE INDEX IF NOT EXISTS idx_timesheets_customer ON timesheets(customerId)","CREATE INDEX IF NOT EXISTS idx_timesheets_date ON timesheets(date)"];for(const n of t)try{await oe(n)}catch(r){this.log("warn",`Could not create index: ${r}`)}this.log("info","Performance indexes optimized")},down:async()=>{this.log("warn","Downgrade not implemented for index optimization")},test:async()=>(await ce(`
            SELECT name FROM sqlite_master 
            WHERE type='index' AND name LIKE 'idx_%'
          `)).length>=3}]}async detectAndRunMigrations(){const t=await this.getCurrentSchemaVersion(),n=this.CURRENT_VERSION;if(t.version>=n){this.log("info","Schema is up to date",{current:t.version,target:n});return}this.log("info","Migrations required",{from:t.version,to:n});const r=await this.createDatabaseBackup(`Before migration from v${t.version} to v${n}`);try{await this.runMigrations(t.version,n),this.log("info","All migrations completed successfully",{from:t.version,to:n,backupId:r})}catch(i){throw this.log("error","Migration failed",{error:i instanceof Error?i.message:String(i),backupId:r}),i}}async runMigrations(t,n){const r=this.getMigrationSteps();for(let i=t+1;i<=n;i++){const a=r.find(l=>l.version===i);if(!a)throw new Error(`Migration for version ${i} not found`);this.log("info",`Running migration: ${a.name}`);try{if(await a.up(),!await a.test())throw new Error(`Migration test failed for version ${i}`);await Ne(async()=>{await this.updateSchemaVersion(i,a.name)}),this.log("info",`Migration completed: ${a.name}`)}catch(l){throw this.log("error",`Migration failed: ${a.name}`,{error:l instanceof Error?l.message:String(l)}),l}}}async createDatabaseBackup(t){var n;try{this.log("info","Creating database backup using BackupService",{description:t});const r=await Js.createManualBackup(t);if(!r.success||!r.backupId){if((n=r.error)!=null&&n.includes("browser environment"))return this.log("warn","Backup not available in browser environment - continuing without backup"),"no-backup-browser-env";throw new Error(r.error||"Backup creation failed")}const i=await this.getCurrentSchemaVersion(),a=new Date().toISOString();try{await Ne(async()=>{await oe(`
            INSERT INTO ${this.BACKUP_METADATA_TABLE}
            (id, version, appVersion, size, createdAt, description, checksumSHA256)
            VALUES (?, ?, ?, ?, ?, ?, ?)
          `,[r.backupId,i.version,this.getAppVersion(),r.size||0,a,t,"filesystem"])})}catch(l){this.log("warn","Transaction failed, trying direct insert for backup metadata",{error:l instanceof Error?l.message:String(l)}),await oe(`
          INSERT INTO ${this.BACKUP_METADATA_TABLE}
          (id, version, appVersion, size, createdAt, description, checksumSHA256)
          VALUES (?, ?, ?, ?, ?, ?, ?)
        `,[r.backupId,i.version,this.getAppVersion(),r.size||0,a,t,"filesystem"])}return this.log("info","Database backup created successfully",{backupId:r.backupId,size:r.size,filePath:r.filePath}),r.backupId}catch(r){throw this.log("error","Failed to create backup",{error:r instanceof Error?r.message:String(r)}),new Error(`Backup creation failed: ${r}`)}}async runIntegrityCheck(){try{const t=ce("PRAGMA integrity_check");if(!(t.length===1&&t[0].integrity_check==="ok"))return this.log("error","Database integrity check failed",{result:t}),!1;const r=ce(`
        SELECT name FROM sqlite_master 
        WHERE type='table' AND name IN (
          'settings', 'customers', 'packages', 'offers', 'invoices', 'timesheets', 'activities'
        )
      `),i=["settings","customers","packages","offers","invoices"],a=r.map(d=>d.name),l=i.filter(d=>!a.includes(d));return l.length>0?(this.log("error","Missing essential tables",{missingTables:l}),!1):(this.log("info","Database integrity check passed"),!0)}catch(t){return this.log("error","Integrity check failed",{error:t instanceof Error?t.message:String(t)}),!1}}async cleanupOldBackups(t=5){try{this.log("info","Cleaning up old backups",{keepCount:t});const n=await Js.prune({keep:t,maxTotalMB:500});n.success?this.log("info","Backup cleanup completed",{removedCount:n.removedCount}):this.log("warn","Backup cleanup failed",{error:n.error});try{const r=await ce(`
          SELECT * FROM ${this.BACKUP_METADATA_TABLE} 
          WHERE checksumSHA256 != 'filesystem'
          ORDER BY createdAt DESC
        `);if(r.length>t){const i=r.slice(t);for(const a of i){const l=`rawalite.backup.${a.id}`;try{localStorage.removeItem(l),await oe(`DELETE FROM ${this.BACKUP_METADATA_TABLE} WHERE id = ?`,[a.id]),this.log("info","Cleaned up legacy backup",{backupId:a.id})}catch(d){this.log("warn","Failed to clean up legacy backup",{backupId:a.id,error:d instanceof Error?d.message:String(d)})}}}}catch(r){this.log("warn","Legacy backup cleanup failed",{error:r instanceof Error?r.message:String(r)})}}catch(n){this.log("error","Backup cleanup failed",{error:n instanceof Error?n.message:String(n)})}}async createManualBackup(t){return this.createDatabaseBackup(t||"Manual backup")}async listBackups(){try{const t=await ce(`
        SELECT * FROM ${this.BACKUP_METADATA_TABLE} 
        ORDER BY createdAt DESC
      `),n=await Js.list(),r=new Map;for(const a of n)r.set(a.id,{id:a.id,version:parseInt(a.version)||0,appVersion:a.version,size:a.size,createdAt:a.createdAt,description:a.description,checksumSHA256:"filesystem"});for(const a of t)r.has(a.id)||r.set(a.id,a);const i=Array.from(r.values()).sort((a,l)=>new Date(l.createdAt).getTime()-new Date(a.createdAt).getTime());return this.log("info","Listed merged backups",{total:i.length,filesystem:n.length,database:t.length}),i}catch(t){return this.log("warn","Error listing backups",{error:t instanceof Error?t.message:String(t)}),[]}}async getMigrationStatus(){const t=await this.getCurrentSchemaVersion(),n=Math.max(0,this.CURRENT_VERSION-t.version);return{currentVersion:t.version,targetVersion:this.CURRENT_VERSION,lastMigration:t.lastMigration,pendingMigrations:n,needsMigration:n>0}}async exportDatabase(){return(await Ke()).export()}async getCurrentSchemaVersion(){try{const t=await ce(`SELECT * FROM ${this.SCHEMA_VERSION_TABLE} WHERE id = 1`);return t.length>0?t[0]:(this.log("warn","No schema version found, returning default"),{version:0,lastMigration:"",migratedAt:new Date().toISOString(),appVersion:this.getAppVersion()})}catch(t){return this.log("warn","Error reading schema version, returning default",{error:t instanceof Error?t.message:String(t)}),{version:0,lastMigration:"",migratedAt:new Date().toISOString(),appVersion:this.getAppVersion()}}}async updateSchemaVersion(t,n){const r=new Date().toISOString();await oe(`
      UPDATE ${this.SCHEMA_VERSION_TABLE} 
      SET version = ?, lastMigration = ?, migratedAt = ?, appVersion = ?, updatedAt = ?
      WHERE id = 1
    `,[t,n,r,this.getAppVersion(),r]),this.log("info","Schema version updated",{version:t,migration:n})}generateBackupId(){return`backup_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}getAppVersion(){return"1.0.0"}base64FromUint8Array(t){let n="";for(let r=0;r<t.byteLength;r++)n+=String.fromCharCode(t[r]);return btoa(n)}async calculateChecksum(t){const n=window.crypto||window.msCrypto;if(n&&n.subtle){const r=new ArrayBuffer(t.length);new Uint8Array(r).set(t);const i=await n.subtle.digest("SHA-256",r);return Array.from(new Uint8Array(i)).map(l=>l.toString(16).padStart(2,"0")).join("")}else{let r=0;for(let i=0;i<t.length;i++)r=(r<<5)-r+t[i]&4294967295;return Math.abs(r).toString(16)}}}const gv=({children:e})=>{const[t,n]=k.useState(!1),[r,i]=k.useState(null);return k.useEffect(()=>{(async()=>{try{console.log("🔧 Starting migration initialization..."),await new hv().initialize(),console.log("✅ Migration initialization completed successfully"),n(!0)}catch(l){console.error("❌ Migration initialization failed:",l);const d=l instanceof Error?l.message:"Migration initialization failed";i(d),setTimeout(()=>{console.warn("⚠️ Starting app after timeout despite migration errors"),n(!0)},5e3)}})()},[]),t?(r&&console.warn("Migration error on startup:",r),o.jsx(o.Fragment,{children:e})):o.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"#1a1a1a",color:"white",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center",zIndex:9999},children:[o.jsxs("div",{style:{textAlign:"center"},children:[o.jsx("div",{style:{width:"40px",height:"40px",border:"4px solid #333",borderTop:"4px solid #007acc",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 20px"}}),o.jsx("h3",{style:{margin:"0 0 10px 0"},children:"🔧 Initialisiere Datenbank..."}),o.jsx("p",{style:{margin:0,opacity:.7},children:"Migrations werden geprüft und ausgeführt"})]}),o.jsx("style",{children:`
          @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
          }
        `})]})};Yr("salbeigrün");Zr("sidebar");el.createRoot(document.getElementById("root")).render(o.jsx(fa.StrictMode,{children:o.jsx(V0,{children:o.jsx(U0,{children:o.jsx(pv,{mode:"sqlite",children:o.jsx(T0,{children:o.jsxs(gv,{children:[o.jsx(l0,{children:o.jsx(dv,{})}),o.jsx(q0,{}),o.jsx(W0,{})]})})})})})}));export{yv as c,ep as g};
